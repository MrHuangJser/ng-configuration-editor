{"version":3,"file":"angular-editor-lib.umd.js","sources":["../../../node_modules/tslib/tslib.es6.js","../projects/angular-editor-lib/src/lib/services/utils.service.ts","../../projects/angular-editor-lib/src/lib/store.ts","../projects/angular-editor-lib/src/lib/services/store.service.ts","../esm2015/projects/angular-editor-lib/src/lib/components/bordered-area/bordered-area.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/bordered-area/bordered-area.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/box-item/box-item.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/box-item/box-item.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/canvas-background/canvas-background.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/canvas-background/canvas-background.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/canvas-grid/canvas-grid.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/canvas-grid/canvas-grid.component.html","../projects/angular-editor-lib/src/lib/actions/border-and-selected.actions.ts","../projects/angular-editor-lib/src/lib/actions/canvas.actions.ts","../projects/angular-editor-lib/src/lib/actions/nodes.actions.ts","../projects/angular-editor-lib/src/lib/actions/refline.actions.ts","../projects/angular-editor-lib/src/lib/directives/draggable.directive.ts","../esm2015/projects/angular-editor-lib/src/lib/components/canvas/canvas.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/canvas/canvas.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/layer-tree/layer-tree.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/layer-tree/layer-tree.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/panel/panel.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/panel/panel.component.ts","../esm2015/lib/components/projects/angular-editor-lib/src/lib/components/property-form/forms/canvas-forms/canvas-forms.component.html","../esm2015/lib/components/projects/angular-editor-lib/src/lib/components/property-form/forms/canvas-forms/canvas-forms.component.ts","../esm2015/lib/components/projects/angular-editor-lib/src/lib/components/property-form/forms/widget-form/widget-form.component.html","../esm2015/lib/components/projects/angular-editor-lib/src/lib/components/property-form/forms/widget-form/widget-form.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/property-form/property-form.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/property-form/property-form.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/resize-handle/resize-handle.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/resize-handle/resize-handle.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/rotate-handle/rotate-handle.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/rotate-handle/rotate-handle.component.html","../projects/angular-editor-lib/src/lib/directives/no-zoom-area.directive.ts","../projects/angular-editor-lib/src/lib/directives/selector.directive.ts","../projects/angular-editor-lib/src/lib/directives/zoom-area.directive.ts","../projects/angular-editor-lib/src/lib/directives/ce-toolbar.directive.ts","../esm2015/projects/angular-editor-lib/src/lib/components/toolbar/toolbar.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/toolbar/toolbar.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/widget-list/widget-list.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/widget-list/widget-list.component.html","../../projects/angular-editor-lib/src/lib/angular-editor-lib.component.html","../../projects/angular-editor-lib/src/lib/angular-editor-lib.component.ts","../../projects/angular-editor-lib/src/lib/angular-editor-lib.module.ts","../../../projects/angular-editor-lib/src/public-api.ts","../../../projects/angular-editor-lib/src/angular-editor-lib.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Injectable, TemplateRef } from '@angular/core';\nimport * as _ from 'lodash';\nimport { INode } from '../store';\n\nexport type IPosition = [number, number];\nexport interface IAbsolutePosition {\n  tl: IPosition;\n  tr: IPosition;\n  bl: IPosition;\n  br: IPosition;\n}\n\nexport interface IVerticalAndHorizontalPosition {\n  t: IPosition;\n  r: IPosition;\n  b: IPosition;\n  l: IPosition;\n}\n\nexport interface IDOMRect {\n  width: number;\n  height: number;\n  left: number;\n  top: number;\n  cx?: number;\n  cy?: number;\n  bottom?: number;\n  right?: number;\n}\n\nexport type IRectDirection = 'tl' | 't' | 'tr' | 'r' | 'br' | 'b' | 'bl' | 'l';\n\nconst SPECIAL_ROTATE = new Set([0, 90, 180, 270, 360]);\n\nexport function genNodeId(): string {\n  return `${Date.now()}${Math.round(Math.random() * 1000000000000)}`;\n}\n\n@Injectable({ providedIn: 'root' })\nexport class CeUtilsService {\n  public static shared: CeUtilsService;\n\n  constructor() {\n    CeUtilsService.shared = this;\n  }\n\n  public isTemplateType(content: any) {\n    return content instanceof TemplateRef;\n  }\n\n  public isDeepEqual(v1: any, v2: any) {\n    if (typeof v1 !== typeof v2) {\n      return false;\n    } else {\n      switch (typeof v1) {\n        case 'number':\n        case 'string':\n        case 'bigint':\n        case 'boolean':\n        case 'symbol':\n        case 'undefined':\n        case 'function':\n          return v1 === v2;\n        case 'object':\n          if (v1 === null || v2 === null) {\n            return v1 === v2;\n          } else if (Array.isArray(v1)) {\n            if (v1.length !== v2.length) {\n              return false;\n            }\n            let flag = true;\n            v1.forEach((v, i) => {\n              if (flag) {\n                flag = this.isDeepEqual(v, v2[i]);\n              }\n            });\n            return flag;\n          } else if (v1 instanceof Set && v2 instanceof Set) {\n            return this.isDeepEqual([...v1], [...v2]);\n          } else {\n            let flag = true;\n            Object.keys(v1).forEach((v1k) => {\n              if (flag) {\n                if (v2.hasOwnProperty(v1k)) {\n                  flag = this.isDeepEqual(v1[v1k], v2[v1k]);\n                } else {\n                  flag = false;\n                }\n              }\n            });\n            return flag;\n          }\n      }\n    }\n  }\n\n  /**\n   * 通过节点ID在树中查找节点\n   * @param id 节点ID\n   * @param nodes 节点树\n   */\n  public getNodeById<T = any>(id: string, nodes: INode<T>[]): INode<T> {\n    let flag = false;\n    let node: INode<T>;\n    const stack = [...nodes];\n    while (!flag && stack.length) {\n      const item = stack.pop();\n      if (item.id === id) {\n        flag = true;\n        node = item;\n      } else {\n        if (item.children && item.children.length) {\n          stack.push(...item.children.map((i) => ({ ...i, parentNode: item })));\n        }\n      }\n    }\n    return node;\n  }\n\n  /**\n   * 通过节点ID查找节点及节点所有父级\n   * @param id 节点ID\n   * @param nodes 节点树\n   */\n  public getNodeAndParentListById<T = any>(id: string | undefined, nodes: INode<T>[]): INode[] {\n    if (!id) {\n      return [];\n    }\n    const rootIdSet = new Set(nodes.map((node) => node.id));\n    let flag = false;\n    let path: INode[] = [];\n    const stack = [...nodes];\n    while (!flag && stack.length) {\n      const node = stack.shift();\n      if (rootIdSet.has(node.id)) {\n        path = [];\n      }\n      if (node.id === id) {\n        flag = true;\n        path.unshift(node);\n      } else {\n        if (node.children && node.children.length) {\n          path.unshift(node);\n          stack.unshift(...node.children);\n        }\n      }\n    }\n    return path;\n  }\n\n  /**\n   * 通过子节点id集合和节点树，获取子节点的父节点，若子节点不在同一级则返回undefined\n   * @param childrenIds 子节点ID列表\n   * @param nodes 节点集合\n   */\n  public getSameLayerParentByChildren(childrenIds: string[], nodes: INode[]): INode | false {\n    let flag = true;\n    const parents = childrenIds.map((id) => this.getNodeAndParentListById(id, nodes)[1]);\n    let prevParent = parents.pop();\n    while (flag && parents.length) {\n      const parent = parents.pop();\n      if (prevParent?.id === parent?.id) {\n        prevParent = parent;\n      } else {\n        flag = false;\n      }\n    }\n    return flag && prevParent;\n  }\n\n  /**\n   * 通过直线的两点方程获取直线上人一点点的坐标\n   * y = (x-x1)*(y2-y1)/(x2-x1)+y1\n   * x = (y-y1)*(x2-x1)/(y2-y1)+x1\n   * @param direction 要获取点的坐标轴\n   * @param n 要获取点的已知轴的坐标\n   * @param line 确定一条直线的两点的坐标\n   */\n  public getPointInLine(direction: 'x' | 'y', n: number, line: [[number, number], [number, number]]): number {\n    const [[x1, y1], [x2, y2]] = line;\n    switch (direction) {\n      case 'x':\n        return ((n - y1) * (x2 - x1)) / (y2 - y1) + x1;\n      case 'y':\n        return ((n - x1) * (y2 - y1)) / (x2 - x1) + y1;\n    }\n  }\n\n  /**\n   * 通过元素在所在坐标系的中心点、宽、高以及旋转角度获取元素在所在坐标系的四个顶点的坐标\n   * @param cx 中心点x轴坐标\n   * @param cy 中心点y轴坐标\n   * @param width 宽\n   * @param height 高\n   * @param rotate 旋转角度\n   */\n  public getAbsolutePosition(cx: number, cy: number, width: number, height: number, rotate = 0): IAbsolutePosition {\n    if (SPECIAL_ROTATE.has(rotate)) {\n      return this.getAbsolutePositionSpecial(cx, cy, width, height, rotate);\n    } else {\n      const r = Math.sqrt((width / 2) ** 2 + (height / 2) ** 2);\n      const patchRad1 = Math.atan(height / 2 / (width / 2));\n      const patchRad2 = Math.atan(width / 2 / (height / 2));\n      const currentRad = (rotate * Math.PI) / 180;\n\n      return {\n        tl: [cx - Math.cos(currentRad + patchRad1) * r, cy - Math.sin(currentRad + patchRad1) * r],\n        tr: [cx - Math.cos(currentRad + patchRad1 + patchRad2 * 2) * r, cy - Math.sin(currentRad + patchRad1 + patchRad2 * 2) * r],\n        bl: [cx - Math.cos(currentRad - patchRad1) * r, cy - Math.sin(currentRad - patchRad1) * r],\n        br: [cx - Math.cos(currentRad - patchRad1 - patchRad2 * 2) * r, cy - Math.sin(currentRad - patchRad1 - patchRad2 * 2) * r],\n      };\n    }\n  }\n\n  /**\n   * 获取特殊旋转角度下元素的四个顶点在所在坐标系的坐标\n   * @param cx 元素的中心点x轴坐标\n   * @param cy 元素的中心点y轴坐标\n   * @param width 宽\n   * @param height 高\n   * @param rotate 旋转角度\n   */\n  public getAbsolutePositionSpecial(cx: number, cy: number, width: number, height: number, rotate: number): IAbsolutePosition | undefined {\n    if (SPECIAL_ROTATE.has(rotate)) {\n      switch (rotate) {\n        case 0:\n        case 360:\n          return {\n            tl: [cx - width / 2, cy - height / 2],\n            tr: [cx + width / 2, cy - height / 2],\n            bl: [cx - width / 2, cy + height / 2],\n            br: [cx + width / 2, cy + height / 2],\n          };\n        case 90:\n          return {\n            tl: [cx + height / 2, cy - width / 2],\n            tr: [cx + height / 2, cy + width / 2],\n            bl: [cx - height / 2, cy - width / 2],\n            br: [cx - height / 2, cy + width / 2],\n          };\n        case 180:\n          return {\n            tl: [cx + width / 2, cy + height / 2],\n            tr: [cx - width / 2, cy + height / 2],\n            bl: [cx + width / 2, cy - height / 2],\n            br: [cx - width / 2, cy - height / 2],\n          };\n        case 270:\n          return {\n            tl: [cx - height / 2, cy + width / 2],\n            tr: [cx - height / 2, cy - width / 2],\n            bl: [cx + height / 2, cy + width / 2],\n            br: [cx + height / 2, cy - width / 2],\n          };\n      }\n    }\n  }\n\n  /**\n   * 通过元素顶点坐标获取上、右、下和左方向的坐标\n   * @param position\n   */\n  public getVerticalAndHorizontalPointByAbsolutePosition(position: IAbsolutePosition): IVerticalAndHorizontalPosition {\n    const { tl, bl, br, tr } = position;\n    return {\n      t: [(Math.max(tl[0], tr[0]) - Math.min(tl[0], tr[0])) / 2, (Math.max(tl[1], tr[1]) - Math.min(tl[1], tr[1])) / 2],\n      r: [(Math.max(br[0], tr[0]) - Math.min(br[0], tr[0])) / 2, (Math.max(br[1], tr[1]) - Math.min(br[1], tr[1])) / 2],\n      b: [(Math.max(bl[0], br[0]) - Math.min(bl[0], br[0])) / 2, (Math.max(bl[1], br[1]) - Math.min(bl[1], br[1])) / 2],\n      l: [(Math.max(tl[0], bl[0]) - Math.min(tl[0], bl[0])) / 2, (Math.max(tl[1], bl[1]) - Math.min(tl[1], bl[1])) / 2],\n    };\n  }\n\n  /**\n   * 通过HTML元素的宽、高、旋转角度以及所在坐标系的x、y点获取元素在所在坐标系的包围盒\n   * @param width 宽\n   * @param height 高\n   * @param left 在所在坐标系中x轴的坐标\n   * @param top 在所在坐标系中y轴的坐标\n   * @param rotate 旋转角度\n   */\n  public getBoundingBox(width: number, height: number, left: number, top: number, rotate = 0): IDOMRect {\n    const position = this.getAbsolutePosition(left + width / 2, top + height / 2, width, height, rotate);\n    const l = Math.min(...this.getAxisListByPosition('x', [position]));\n    const r = Math.max(...this.getAxisListByPosition('x', [position]));\n    const t = Math.min(...this.getAxisListByPosition('y', [position]));\n    const b = Math.max(...this.getAxisListByPosition('y', [position]));\n    return { left: l, top: t, width: r - l, height: b - t, bottom: b, right: r, cx: l + (r - l) / 2, cy: t + (b - t) / 2 };\n  }\n\n  /**\n   * 通过盒子的绝对坐标列表获取对应坐标的值的集合\n   * @param axis 要获取的坐标轴\n   * @param positions 绝对坐标列表\n   */\n  public getAxisListByPosition(axis: 'x' | 'y', positions: IAbsolutePosition[]): number[] {\n    switch (axis) {\n      case 'x':\n        return positions.reduce((arr, position) => [...arr, position.bl[0], position.br[0], position.tl[0], position.tr[0]], []);\n      case 'y':\n        return positions.reduce((arr, position) => [...arr, position.bl[1], position.br[1], position.tl[1], position.tr[1]], []);\n    }\n  }\n\n  /**\n   * 获取多个盒子的最小外包围盒的尺寸\n   * @param positions 盒子绝对坐标列表\n   */\n  public getOuterBoundingBox(positions: IAbsolutePosition[]): IDOMRect {\n    const l = Math.min(...this.getAxisListByPosition('x', positions));\n    const r = Math.max(...this.getAxisListByPosition('x', positions));\n    const t = Math.min(...this.getAxisListByPosition('y', positions));\n    const b = Math.max(...this.getAxisListByPosition('y', positions));\n    return { left: l, top: t, width: r - l, height: b - t, bottom: b, right: r, cx: l + (r - l) / 2, cy: t + (b - t) / 2 };\n  }\n\n  /**\n   * 依据zIndex对节点递归排序\n   * @param list 节点列表\n   */\n  public sortNodeListByIndex(list?: INode[]): INode[] {\n    return (\n      list &&\n      _.chain(list)\n        .sortBy((item) => item.zIndex)\n        .map((item) => ({ ...item, children: this.sortNodeListByIndex(item.children) }))\n        .value()\n    );\n  }\n\n  /**\n   * 通过直线的斜率方程和直线上两点A，B以及直线外一点D，求出D点上直线AB的垂线DC和直线AB的交点C的坐标\n   * @param PA 点A\n   * @param PB 点B\n   * @param PD 点D\n   */\n  public getVerticalLineCrossPoint(PA: [number, number], PB: [number, number], PD: [number, number]): [number, number] {\n    const [PAx, PAy] = PA;\n    const [PBx, PBy] = PB;\n    const [PDx, PDy] = PD;\n    if (PAx === PBx) {\n      return [PAx, PDy];\n    } else if (PAy === PBy) {\n      return [PDx, PAy];\n    } else {\n      const L1k = (PAy - PBy) / (PAx - PBx);\n      const L2k = -1 / L1k;\n      const a = PAy - L1k * PAx;\n      const b = PDy - L2k * PDx;\n      const x = (b - a) / (L1k - L2k);\n      const y = L1k * x + a;\n      return [x, y];\n    }\n  }\n\n  /**\n   * 通过元素在所在坐标系内四个顶点的坐标，使用直线的两点方程求出两两对点所在直线的交点（矩形的中心点），\n   * 使用勾股定理求出元素宽高，转换后得到元素在所在坐标系的宽、高、x轴坐标和y轴坐标\n   * width = sqrt((trx - tlx)^2 + (try - tly)^2)\n   * height = sqrt((blx - tlx)^2 + (bly - tly)^2)\n   * a1*x + b1*y + c1 = 0\n   * a2*x + b2*y + c2 = 0\n   * a1*x + b1*y + c1 = a2*x + b2*y + c2\n   * 由直线的两点式方程可得a=y0-y1, b=x1-x0, c=x0*y1 - x1*y0\n   * 解方程组可得两条直线的交点x,y\n   * @param position 元素在所在坐标系内四个顶点的坐标\n   */\n  public getRelativePosition(position: IAbsolutePosition): IDOMRect {\n    const { tl, bl, br, tr } = position;\n    const width: number = Math.sqrt((tr[0] - tl[0]) ** 2 + (tr[1] - tl[1]) ** 2);\n\n    const height: number = Math.sqrt((bl[0] - tl[0]) ** 2 + (bl[1] - tl[1]) ** 2);\n\n    const a1 = br[1] - tl[1];\n    const b1 = tl[0] - br[0];\n    const c1 = br[0] * tl[1] - tl[0] * br[1];\n    const a2 = bl[1] - tr[1];\n    const b2 = tr[0] - bl[0];\n    const c2 = bl[0] * tr[1] - tr[0] * bl[1];\n    const cx = (b1 * c2 - b2 * c1) / (a1 * b2 - a2 * b1);\n    const cy = (a2 * c1 - a1 * c2) / (a1 * b2 - a2 * b1);\n\n    return {\n      cx,\n      cy,\n      width,\n      height,\n      left: cx - width / 2,\n      top: cy - height / 2,\n      bottom: cx + width / 2,\n      right: cy + height / 2,\n    };\n  }\n\n  /**\n   * 获取元素的四个顶点在外包围盒的矩形内的坐标的百分比\n   * @param group 元素外包围盒\n   * @param item 元素的四个顶点坐标\n   */\n  public getItemPercentPositionInGroup(group: IDOMRect, item: IAbsolutePosition): IAbsolutePosition {\n    return {\n      tl: [(item.tl[0] - group.left) / group.width, (item.tl[1] - group.top) / group.height],\n      tr: [(item.tr[0] - group.left) / group.width, (item.tr[1] - group.top) / group.height],\n      bl: [(item.bl[0] - group.left) / group.width, (item.bl[1] - group.top) / group.height],\n      br: [(item.br[0] - group.left) / group.width, (item.br[1] - group.top) / group.height],\n    };\n  }\n\n  /**\n   * 通过矩形中心点坐标C(cx,cy)中心点和Y轴平行线在中心点上方的一点S(sx,sy),旋转落点E(ex,ey),利用三角形余弦定理，\n   * 求出∠SCE的角度，再通过ex和sx的大小判断旋转的角度为内角还是外角\n   * @param cx 中心点x坐标\n   * @param cy 中心点y坐标\n   * @param sx 与中心点相同的x坐标\n   * @param sy 与中心点同x坐标的上方一点的y坐标\n   * @param ex 旋转终点x坐标\n   * @param ey x旋转终点y坐标\n   */\n  public getRotate(cx: number, cy: number, sx: number, sy: number, ex: number, ey: number): number {\n    const rotate =\n      (Math.acos(\n        ((cy - sy) ** 2 + (cx - sx) ** 2 + (cx - ex) ** 2 + (cy - ey) ** 2 - ((ex - sx) ** 2 + (ey - sy) ** 2)) /\n          (2 * Math.sqrt((cy - sy) ** 2 + (cx - sx) ** 2) * Math.sqrt((cx - ex) ** 2 + (cy - ey) ** 2))\n      ) *\n        180) /\n      Math.PI;\n    if (ex === sx) {\n      return 180;\n    }\n    if (ex > sx) {\n      return rotate;\n    }\n    if (ex < sx) {\n      return 360 - rotate;\n    }\n  }\n\n  /**\n   * 通过向量四边形法则求出向量ab、向量ac的对角线ad的d点坐标, ab + ac = ad\n   * @param ab 向量ab\n   * @param ac 向量ac\n   * @param a a点坐标\n   */\n  public getPointByVectorSum(ab: [number, number], ac: [number, number], a: [number, number]): [number, number] {\n    return [ab[0] + ac[0] + a[0], ab[1] + ac[1] + a[1]];\n  }\n\n  /**\n   * 获取两点之间的线段长度\n   * @param point1 点1\n   * @param point2 点2\n   */\n  public getDistanceBeforeToPoint(point1: [number, number], point2: [number, number]): number {\n    return Math.sqrt((point1[0] - point2[0]) ** 2 + (point1[1] - point2[1]) ** 2);\n  }\n\n  /**\n   * 通过获取父节点中心点坐标和原始子节点中心点坐标，将向量（父节点中心点-子节点原始中心点）\n   * 旋转父节点旋转的角度(rotate)后得到向量（父节点中心点-子节点中心点）然后利用向量旋转的\n   * 公式直接求出子节点中心点坐标\n   * x1 = x0*cos(rotate) - y0*sin(rotate)\n   * y1 = x0*sin(rotate) - y0*cos(rotate)\n   * @param parentRect 父元素尺寸\n   * @param parentRotate 父元素旋转角度\n   * @param childRect 子元素尺寸\n   */\n  public getChildPositionBaseOnParentCoordinateSystem(parentRect: IDOMRect, parentRotate: number, childRect: IDOMRect): IDOMRect {\n    const parentCenter = [parentRect.left + parentRect.width / 2, parentRect.top + parentRect.height / 2];\n    const originalCenter = [childRect.left + childRect.width / 2 + parentRect.left, childRect.top + childRect.height / 2 + parentRect.top];\n    const [newCenterX, newCenterY] = [\n      (originalCenter[0] - parentCenter[0]) * Math.cos((parentRotate * Math.PI) / 180) -\n        (originalCenter[1] - parentCenter[1]) * Math.sin((parentRotate * Math.PI) / 180) +\n        parentCenter[0],\n      (originalCenter[1] - parentCenter[1]) * Math.cos((parentRotate * Math.PI) / 180) +\n        (originalCenter[0] - parentCenter[0]) * Math.sin((parentRotate * Math.PI) / 180) +\n        parentCenter[1],\n    ];\n    return {\n      left: newCenterX - childRect.width / 2,\n      top: newCenterY - childRect.height / 2,\n      bottom: newCenterX + childRect.width / 2,\n      right: newCenterY + childRect.height / 2,\n      width: childRect.width,\n      height: childRect.height,\n      cx: newCenterX,\n      cy: newCenterY,\n    };\n  }\n\n  /**\n   * 获取单个子节点相对于多层父节点的坐标\n   * @param child 子节点size\n   * @param parents 父节点集合（排序为从左往右依次外扩）\n   */\n  public getChildPositionBaseOnMultipleParentCoordinataSystem(child: IDOMRect, parents: INode[]): IDOMRect {\n    let rect: IDOMRect = { ...child };\n    while (parents.length) {\n      const parent = parents.shift();\n      rect = this.getChildPositionBaseOnParentCoordinateSystem(parent, parent.rotate, child);\n    }\n    return rect;\n  }\n\n  /**\n   * 获取多个子节点相对与多层父节点的坐标\n   * @param children 子节点列表\n   * @param parents 父节点列表\n   */\n  public getChildrenBoundingBoxBaseOnParentCoordinateSystem(children: INode[], parents: INode[]): IDOMRect {\n    const outerBox = this.getOuterBoundingBox(\n      children.map((child) =>\n        this.getAbsolutePosition(child.left + child.width / 2, child.top + child.height / 2, child.width, child.height, child.rotate)\n      )\n    );\n    let domRect = { ...outerBox };\n    while (parents.length) {\n      const parent = parents.shift();\n      domRect = this.getChildPositionBaseOnParentCoordinateSystem(parent, parent.rotate, domRect);\n    }\n    return domRect;\n  }\n\n  /**\n   * 获取已选中节点的缩放框的尺寸\n   * @param selected 已选中节点\n   * @param nodes 节点树\n   */\n  public getResizeBoundingBox(selected: string[], nodes: INode[]): IDOMRect & { rotate: number } {\n    let rect: IDOMRect;\n    let rotate: number;\n    if (selected.length === 1) {\n      const [node, ...parents] = this.getNodeAndParentListById(selected[0], nodes);\n      rect = { ...this.getChildPositionBaseOnMultipleParentCoordinataSystem(node, [...parents]) };\n      rotate = parents.reduce((sum, p) => sum + (p.rotate ?? 0), node.rotate ?? 0);\n    } else {\n      const parent = this.getSameLayerParentByChildren(selected, nodes);\n      if (parent !== false) {\n        const parents = this.getNodeAndParentListById(parent?.id, nodes);\n        rect = this.getChildrenBoundingBoxBaseOnParentCoordinateSystem(\n          selected.map((id) => this.getNodeById(id, nodes)),\n          [...parents]\n        );\n        rotate = parents.reduce((sum, p) => sum + (p.rotate ?? 0), 0);\n      }\n    }\n    return { ...rect, rotate };\n  }\n}\n","import { TemplateRef, Type } from '@angular/core';\n\nexport interface INode<T = any> {\n  id: string;\n  name: string;\n  locked?: boolean;\n  data?: T;\n  children?: INode[];\n  width: number;\n  height: number;\n  left: number;\n  top: number;\n  rotate: number;\n  zIndex: number;\n  borderStyle?: string;\n  borderWidth?: number;\n  borderColor?: string;\n  borderRadius?: number;\n  backgroundColor?: string;\n  backgroundImage?: string;\n  backgroundRepeat?: string;\n  backgroundPosition?: string;\n  backgroundSize?: string;\n  [key: string]: any;\n}\n\nexport interface ICanvasBackground {\n  backgroundColor?: string;\n  backgroundImage?: string;\n}\n\nexport interface ICanvasSize {\n  width: number;\n  height: number;\n}\nexport interface ICanvasPosition {\n  scale: number;\n  left: number;\n  top: number;\n}\n\nexport type IRefLineDirection = 'tx' | 'bx' | 'ly' | 'ry' | 'cx' | 'cy';\nexport interface IRefLineState {\n  state: boolean;\n  position?: number;\n}\n\nexport interface IStore<T = any> {\n  nodes: INode<T>[];\n  selected: Set<string>;\n  bordered: Set<string>;\n  canvasBackground: ICanvasBackground;\n  canvasSize: ICanvasSize;\n  canvasPosition: ICanvasPosition;\n  refLineState: {\n    [P in IRefLineDirection]: IRefLineState;\n  };\n}\n\nexport type IActionType<T = any> = (state: IStore<T>) => IStore<T>;\n\nexport const DEFAULT_STORE: IStore<any> = {\n  nodes: new Array(500).fill(1).map<INode<any>>((_v, i) => ({\n    id: `${Math.round(Math.random() * Math.pow(10, 8))}`,\n    height: 100,\n    width: 200,\n    left: Math.round(Math.random() * 900),\n    top: Math.round(Math.random() * 500),\n    name: 'test',\n    rotate: 0,\n    locked: false,\n    zIndex: i + 1,\n    borderWidth: 1,\n    borderColor: '#333',\n    borderStyle: 'dashed',\n  })),\n  selected: new Set(),\n  bordered: new Set(),\n  canvasBackground: { backgroundColor: '#ffffff' },\n  canvasPosition: {\n    left: 100,\n    top: 100,\n    scale: 1,\n  },\n  canvasSize: {\n    width: 1366,\n    height: 768,\n  },\n  refLineState: {\n    tx: { state: false },\n    bx: { state: false },\n    ly: { state: false },\n    ry: { state: false },\n    cx: { state: false },\n    cy: { state: false },\n  },\n};\n\nexport interface IWidget<T = any> {\n  type: string;\n  name: string;\n  thumbnail: string;\n  propsComponent: T;\n}\n\nexport interface ITabConfig<T = any> {\n  key: string;\n  title: string;\n  icon: string;\n  content: T;\n}\n\nexport interface IPanel<T = any> {\n  title: string;\n  key: string;\n  content: Type<T> | TemplateRef<T>;\n  show: boolean;\n  x: number;\n  y: number;\n  collapsed?: boolean;\n}\n","import { Injectable } from '@angular/core';\nimport { ComponentStore } from '@ngrx/component-store';\nimport { BehaviorSubject } from 'rxjs';\nimport { filter, map, pairwise, startWith } from 'rxjs/operators';\nimport { LayerTreeComponent, PropertyFormComponent, WidgetListComponent } from '../components';\nimport { DEFAULT_STORE, IPanel, IStore } from '../store';\nimport { CeUtilsService } from './utils.service';\n\n@Injectable()\nexport class EditorStore<T = any> extends ComponentStore<IStore<T>> {\n  private _defaultPanels: IPanel<any>[] = [\n    { key: 'LAYERS', title: '图层', content: LayerTreeComponent, show: true, x: 10, y: 60 },\n    { key: 'WIDGET_LIST', title: '组件', content: WidgetListComponent, show: false, x: 50, y: 60 },\n    { key: 'PROPERTIES', title: '属性', content: PropertyFormComponent, show: true, x: window.innerWidth - 350, y: 60 },\n  ];\n  private panels: IPanel[] = [];\n  panels$ = new BehaviorSubject<IPanel[]>([...this._defaultPanels, ...this.panels]);\n\n  constructor(private utils: CeUtilsService) {\n    super(DEFAULT_STORE);\n  }\n\n  initialize(state: IStore<T>) {\n    this.setState(state);\n  }\n\n  _get() {\n    return this.get();\n  }\n\n  dispatch(action: (state: IStore<T>) => IStore<T>) {\n    this.setState(action);\n  }\n\n  selectDifferent<R>(cb: (state: IStore<T>) => R) {\n    return this.select(cb).pipe(\n      startWith(null, cb(this.get())),\n      pairwise<R>(),\n      filter(([prev, present]) => !this.utils.isDeepEqual(prev, present)),\n      map(([, present]) => present)\n    );\n  }\n\n  toJSON() {\n    const state = this.get();\n    return JSON.stringify({\n      canvasPosition: state.canvasPosition,\n      canvasSize: state.canvasSize,\n      canvasBackground: state.canvasBackground,\n      nodes: state.nodes,\n      selected: state.selected,\n      bordered: state.bordered,\n    });\n  }\n\n  addPanels(panels: IPanel[]) {\n    this.panels = [...this.panels, ...panels];\n    this.panels$.next([...this._defaultPanels, ...this.panels]);\n  }\n\n  getPanel(key: string) {\n    return [...this._defaultPanels, ...this.panels].find((panel) => panel.key === key);\n  }\n\n  updatePanelPosition(key: string, [x, y]: [number, number]) {\n    [...this._defaultPanels, ...this.panels].forEach((panel) => {\n      if (panel.key === key) {\n        panel.x = x;\n        panel.y = y;\n      }\n    });\n    this.panels$.next([...this._defaultPanels, ...this.panels]);\n  }\n\n  togglePanelVisible(key: string) {\n    [...this._defaultPanels, ...this.panels].forEach((panel) => {\n      if (panel.key === key) {\n        panel.show = !panel.show;\n      }\n    });\n    this.panels$.next([...this._defaultPanels, ...this.panels]);\n  }\n\n  togglePanelCollapsed(key: string) {\n    [...this._defaultPanels, ...this.panels].forEach((panel) => {\n      if (panel.key === key) {\n        panel.collapsed = !panel.collapsed;\n      }\n    });\n    this.panels$.next([...this._defaultPanels, ...this.panels]);\n  }\n}\n","<div\n  class=\"box-border\"\n  *ngFor=\"let node of borderedNodeList$ | async; trackBy: trackByFn\"\n  [style.left.%]=\"node.left\"\n  [style.top.%]=\"node.top\"\n  [style.width.%]=\"node.width\"\n  [style.height.%]=\"node.height\"\n  [style.transform]=\"getRotate(node.rotate)\"\n></div>\n","import { ChangeDetectionStrategy, Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService } from '../../services/utils.service';\nimport { ICanvasSize, INode } from '../../store';\n\n@Component({\n  selector: 'ce-bordered-area,[ceBorderedArea]',\n  templateUrl: './bordered-area.component.html',\n  styleUrls: ['./bordered-area.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BorderedAreaComponent implements OnInit {\n  public borderedNodeMap = new Map<string, Partial<DOMRect & { rotate: number }>>();\n  public borderedNodeList$: Observable<({ id: string } & Partial<DOMRect & { rotate: number }>)[]>;\n\n  constructor(private store: EditorStore, private utils: CeUtilsService) {}\n\n  ngOnInit(): void {\n    this.borderedNodeList$ = this.store\n      .selectDifferent((state) => ({ bordered: state.bordered, nodes: state.nodes, canvasSize: state.canvasSize }))\n      .pipe(\n        map(({ bordered, nodes, canvasSize }) => {\n          if (!bordered.size) {\n            return [];\n          } else {\n            return this.refreshBorderedList(nodes, bordered, canvasSize);\n          }\n        })\n      );\n  }\n\n  getRotate(rotate: number): string {\n    return `rotate(${rotate}deg)`;\n  }\n\n  trackByFn(...args: [number, { id: string } & Partial<DOMRect & { rotate: number }>]): string {\n    return `${args[1].id}-${args[1].width}-${args[1].height}-${args[1].left}-${args[1].top}-${args[1].rotate}`;\n  }\n\n  refreshBorderedList(nodes: INode[], bordered: Set<string>, canvasSize: ICanvasSize) {\n    return [...bordered]\n      .map((id) => this.utils.getNodeById(id, nodes))\n      .filter((node) => !!node)\n      .map((node) => {\n        {\n          const [, ...parents] = this.utils.getNodeAndParentListById(node.id, nodes);\n          let child = { ...node };\n          while (parents.length) {\n            const parent = parents.shift();\n            child = {\n              ...child,\n              ...this.utils.getChildPositionBaseOnParentCoordinateSystem(parent, parent.rotate ?? 0, child),\n              rotate: child.rotate + parent.rotate,\n            };\n          }\n          return {\n            id: node.id,\n            width: (child.width / canvasSize.width) * 100,\n            height: (child.height / canvasSize.height) * 100,\n            left: (child.left / canvasSize.width) * 100,\n            top: (child.top / canvasSize.height) * 100,\n            rotate: child.rotate,\n          };\n        }\n      });\n  }\n}\n","<ng-container *ngIf=\"node?.children && node?.children.length\">\n  <ce-box-item *ngFor=\"let item of node.children\" [node]=\"item\"></ce-box-item>\n</ng-container>\n","import { AfterViewInit, ChangeDetectionStrategy, Component, ElementRef, Input, Renderer2, ViewEncapsulation } from '@angular/core';\nimport { INode } from '../../store';\n\n@Component({\n  selector: 'ce-box-item',\n  templateUrl: 'box-item.component.html',\n  styleUrls: ['box-item.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BoxItemComponent<T = any> implements AfterViewInit {\n  private _node: INode<T>;\n  @Input()\n  get node(): INode<T> {\n    return this._node;\n  }\n  set node(val: INode<T>) {\n    this._node = val;\n    this.generatorStyles();\n  }\n\n  constructor(private renderer: Renderer2, private eleRef: ElementRef<HTMLElement>) {}\n\n  ngAfterViewInit() {\n    this.generatorStyles();\n  }\n\n  private generatorStyles() {\n    if (this.eleRef.nativeElement) {\n      this.renderer.setAttribute(this.eleRef.nativeElement, 'id', `box-item-${this.node.id}`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'width', `${this.node.width}px`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'height', `${this.node.height}px`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'left', `${this.node.left}px`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'top', `${this.node.top}px`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'transform', `translate3d(0,0,0) rotate(${this.node.rotate ?? 0}deg)`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'border-style', this.node.borderStyle);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'border-color', this.node.borderColor);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'border-width', `${this.node.borderWidth}px`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'z-index', this.node.zIndex);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'background-image', this.node.backgroundImage);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'background-position', this.node.backgroundPosition);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'background-repeat', this.node.backgroundRepeat);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'background-size', this.node.backgroundSize);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'background-color', this.node.backgroundColor);\n    }\n  }\n}\n","<div [style.background-color]=\"backgroundColor$ | async\">\n  <ng-template [ngIf]=\"backgroundImage$ | async\">\n    <img [src]=\"backgroundImage$ | async | nzSanitizer: 'url'\" alt=\"\" />\n  </ng-template>\n</div>\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { EditorStore } from '../../services';\nimport { IStore } from '../../store';\n\n@Component({\n  selector: 'ce-canvas-background,[ceCanvasBackground]',\n  templateUrl: 'canvas-background.component.html',\n  styleUrls: ['canvas-background.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasBackgroundComponent {\n  public backgroundColor$: Observable<string>;\n  public backgroundImage$: Observable<string>;\n  constructor(private store: EditorStore<IStore>) {\n    this.backgroundColor$ = this.store.selectDifferent((state) => state.canvasBackground.backgroundColor);\n    this.backgroundImage$ = this.store.selectDifferent((state) => state.canvasBackground.backgroundImage);\n  }\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { EditorStore } from '../../services';\nimport { IStore } from '../../store';\n\n@Component({\n  selector: 'ce-canvas-grid',\n  templateUrl: 'canvas-grid.component.html',\n  styleUrls: ['canvas-grid.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasGridComponent {\n  public childDPath$: Observable<string>;\n  public parentDPath$: Observable<string>;\n  public childWidth$: Observable<number>;\n  public parentWidth$: Observable<number>;\n  constructor(private store: EditorStore<IStore>) {\n    const scale$ = this.store.selectDifferent((state) => state.canvasPosition.scale);\n    this.childDPath$ = scale$.pipe(map((scale) => this.getPath(10, scale)));\n    this.parentDPath$ = scale$.pipe(map((scale) => this.getPath(50, scale)));\n    this.childWidth$ = scale$.pipe(map((scale) => 10 * scale));\n    this.parentWidth$ = scale$.pipe(map((scale) => 50 * scale));\n  }\n  getPath(size: number, scale: number): string {\n    return `M ${size * scale || 0} 0 L 0 0 0 ${size * scale || 0}`;\n  }\n}\n","<svg data-html2canvas-ignore class=\"grid\" width=\"100%\" height=\"100%\">\n  <defs>\n    <pattern id=\"smallGrid\" [attr.width]=\"childWidth$ | async\" [attr.height]=\"childWidth$ | async\" patternUnits=\"userSpaceOnUse\">\n      <path [attr.d]=\"childDPath$ | async\" fill=\"none\" stroke=\"rgba(207, 207, 207, 0.8)\" stroke-width=\"1\"></path>\n    </pattern>\n    <pattern id=\"grid\" [attr.width]=\"parentWidth$ | async\" [attr.height]=\"parentWidth$ | async\" patternUnits=\"userSpaceOnUse\">\n      <rect [attr.width]=\"parentWidth$ | async\" [attr.height]=\"parentWidth$ | async\" fill=\"url(#smallGrid)\"></rect>\n      <path [attr.d]=\"parentDPath$ | async\" fill=\"none\" stroke=\"rgba(186, 186, 186, 1)\" stroke-width=\"1\"></path>\n    </pattern>\n  </defs>\n  <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\"></rect>\n</svg>\n","import { IActionType } from '../store';\n\nexport function clearSelected<T = any>(): IActionType<T> {\n  return (state) => ({ ...state, selected: new Set([]) });\n}\n\nexport function addSelectedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, selected: new Set([...state.selected, ...ids]) });\n}\n\nexport function removeSelectedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, selected: new Set([...state.selected].filter((id) => !ids.includes(id))) });\n}\n\nexport function setSelectedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, selected: new Set([...ids]) });\n}\n\nexport function clearBordered<T = any>(): IActionType<T> {\n  return (state) => ({ ...state, bordered: new Set([]) });\n}\n\nexport function addBorderedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, bordered: new Set([...state.bordered, ...ids]) });\n}\n\nexport function removeBorderedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, bordered: new Set([...state.bordered].filter((id) => !ids.includes(id))) });\n}\n\nexport function setBorderedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, bordered: new Set([...ids]) });\n}\n","import { IActionType, ICanvasBackground, ICanvasPosition, ICanvasSize } from '../store';\n\nexport function updateCanvasSize<T = any>(canvasSize: Partial<ICanvasSize>): IActionType<T> {\n  return (state) => ({ ...state, canvasSize: { ...state.canvasSize, ...canvasSize } });\n}\n\nexport function updateCanvasPosition<T = any>(canvasPosition: Partial<ICanvasPosition>): IActionType<T> {\n  return (state) => ({ ...state, canvasPosition: { ...state.canvasPosition, ...canvasPosition } });\n}\n\nexport function updateCanvasBackground<T = any>(canvasBackground: Partial<ICanvasBackground>): IActionType<T> {\n  return (state) => ({ ...state, canvasBackground: { ...state.canvasBackground, ...canvasBackground } });\n}\n","import * as _ from 'lodash';\nimport { CeUtilsService, genNodeId, IDOMRect } from '../services';\nimport { IActionType, INode } from '../store';\n\nexport function lockNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, nodes: state.nodes.map((node) => (ids.includes(node.id) ? { ...node, locked: true } : node)) });\n}\n\nexport function unlockNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, nodes: state.nodes.map((node) => (ids.includes(node.id) ? { ...node, locked: false } : node)) });\n}\n\nexport function addNodes<T = any>(nodes: INode<T>[]): IActionType<T> {\n  return (state) => ({ ...state, nodes: [...state.nodes, ...nodes] });\n}\n\nexport function removeNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => {\n    let parent = CeUtilsService.shared.getSameLayerParentByChildren(ids, state.nodes);\n    if (parent === false) {\n      return { ...state };\n    } else if (parent === undefined) {\n      return { ...state, nodes: state.nodes.filter((node) => !ids.includes(node.id)) };\n    } else {\n      const originalParentId = parent.id;\n      let prevParent: INode;\n      let prevParentId: string;\n      const parents = CeUtilsService.shared.getNodeAndParentListById(parent.id, _.cloneDeep(state.nodes));\n      while (parents.length) {\n        parent = parents.shift();\n        let children: INode<T>[];\n        if (parent.id === originalParentId) {\n          children = parent.children.filter((child: INode<T>) => !ids.includes(child.id));\n        } else {\n          children = parent.children\n            .filter((child: INode<T>) => (child.id === prevParentId ? prevParent : child))\n            .filter((child: INode<T>) => !!child);\n        }\n        prevParentId = parent.id;\n        if (children.length > 1) {\n          const rect = CeUtilsService.shared.getOuterBoundingBox(\n            children\n              .map((child) => ({\n                rotate: child.rotate,\n                ...CeUtilsService.shared.getChildPositionBaseOnParentCoordinateSystem(parent as INode, (parent as INode).rotate, child),\n              }))\n              .map((item) => CeUtilsService.shared.getAbsolutePosition(item.cx, item.cy, item.width, item.height, item.rotate))\n          );\n          parent.width = rect.width;\n          parent.height = rect.height;\n          parent.left = rect.left;\n          parent.top = rect.top;\n          parent.children = children;\n        } else if (children.length === 1) {\n          const rect = CeUtilsService.shared.getChildPositionBaseOnParentCoordinateSystem(parent, parent.rotate, children[0]);\n          parent = { ...children[0], ...rect };\n        } else if (children.length === 0) {\n          parent = null;\n        }\n        prevParent = parent as INode;\n      }\n      return { ...state, nodes: state.nodes.map((node) => (node.id === prevParentId ? parent : node)).filter((node) => !!node) as INode<T>[] };\n    }\n  };\n}\n\nexport function updateNodes<T = any>(nodes: INode<T>[]): IActionType<T> {\n  return (state) => ({ ...state, nodes: state.nodes.map((item) => ({ ...item, ...nodes.find((i) => i.id === item.id) })) });\n}\n\nexport function updateNodesSize<T = any>(nodesSizeMap: Map<string, IDOMRect>): IActionType<T> {\n  return (state) => {\n    let inSameLayer = true;\n    const ids = [...nodesSizeMap.keys()];\n    let parent: INode;\n    while (inSameLayer && ids.length) {\n      const id = ids.pop();\n      const node = CeUtilsService.shared.getNodeById(id, state.nodes);\n      inSameLayer = parent?.id === node.parentNode?.id;\n      parent = node.parentNode;\n    }\n\n    if (!inSameLayer) {\n      return state;\n    } else {\n      if (!parent) {\n        return {\n          ...state,\n          nodes: state.nodes.map((node) => {\n            const newNode = { ...node, ...nodesSizeMap.get(node.id) };\n            if (node.children && node.children.length) {\n              return { ...newNode, children: recursiveUpdateNodeChildrenSize(newNode.children, { ...node }, { ...newNode }) };\n            } else {\n              return newNode;\n            }\n          }),\n        };\n      } else {\n        return state;\n      }\n    }\n  };\n}\n\nexport function groupNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => {\n    const parent = CeUtilsService.shared.getSameLayerParentByChildren(ids, state.nodes);\n    if (parent === false) {\n      return state;\n    }\n    const nodeMap = new Map<string, INode>();\n    ids.forEach((id) => {\n      const node = state.nodes.find((i) => i.id === id);\n      if (node) {\n        nodeMap.set(id, node);\n      }\n    });\n    const groupRect = CeUtilsService.shared.getOuterBoundingBox(\n      ids\n        .filter((id) => nodeMap.has(id))\n        .map((id) => {\n          const node = nodeMap.get(id);\n          return CeUtilsService.shared.getAbsolutePosition(\n            node.left + node.width / 2,\n            node.top + node.height / 2,\n            node.width,\n            node.height,\n            node.rotate\n          );\n        })\n    );\n    const groupNode: INode = {\n      id: genNodeId(),\n      name: 'Group',\n      ...groupRect,\n      rotate: 0,\n      zIndex: Math.max(...state.nodes.filter((node) => !nodeMap.has(node.id)).map((node) => node.zIndex)) + 1,\n      children: ids\n        .filter((id) => nodeMap.has(id))\n        .map((id) => {\n          const node = nodeMap.get(id);\n          const { bl, br, tl, tr } = CeUtilsService.shared.getAbsolutePosition(\n            node.left + node.width / 2,\n            node.top + node.height / 2,\n            node.width,\n            node.height,\n            node.rotate\n          );\n          return {\n            ...node,\n            ...CeUtilsService.shared.getRelativePosition({\n              bl: [bl[0] - groupRect.left, bl[1] - groupRect.top],\n              br: [br[0] - groupRect.left, br[1] - groupRect.top],\n              tl: [tl[0] - groupRect.left, tl[1] - groupRect.top],\n              tr: [tr[0] - groupRect.left, tr[1] - groupRect.top],\n            }),\n          };\n        }),\n    };\n    return { ...state, nodes: [...state.nodes.filter((node) => !nodeMap.has(node.id)), groupNode] };\n  };\n}\n\nexport function breakNode<T = any>(id: string): IActionType<T> {\n  return (state) => {\n    const [node, ...parents] = CeUtilsService.shared.getNodeAndParentListById(id, _.cloneDeep(state.nodes));\n    const newNodes = node.children.map((child: INode<T>) => {\n      return {\n        ...child,\n        ...CeUtilsService.shared.getChildPositionBaseOnParentCoordinateSystem(node, node.rotate, child),\n        rotate: (child.rotate ?? 0) + (node.rotate ?? 0),\n      };\n    });\n    if (!parents.length) {\n      return { ...state, nodes: [...state.nodes.filter((i) => i.id !== node.id), ...newNodes] };\n    } else {\n      let parent = parents.shift();\n      parent.children = [...parent.children.filter((child: INode<T>) => child.id !== node.id), ...newNodes];\n      while (parents.length) {\n        const nextParent = parents.shift();\n        nextParent.children = nextParent.children.map((child: INode<T>) => (child.id === parent.id ? parent : child));\n        parent = nextParent;\n      }\n      return { ...state, nodes: [...state.nodes.filter((i) => i.id !== parent.id), parent] };\n    }\n  };\n}\n\n// /**\n//  * 递归更新节点的位置和大小\n//  * @param nodes 节点列表\n//  * @param oldParentRect 父节点的旧尺寸和位置\n//  * @param newParentRect 父节点的新尺寸和位置\n//  */\n// function recursiveUpdateNodeChildrenSize(nodes: INode[], oldParentRect: IDOMRect, newParentRect: IDOMRect): INode[] {\n//   const { width, height } = newParentRect;\n//   return nodes.map((node) => {\n//     const cxPercent = (node.left + node.width / 2) / oldParentRect.width;\n//     const cyPercent = (node.top + node.height / 2) / oldParentRect.height;\n//     const widthPercent = node.width / oldParentRect.width;\n//     const heightPercent = node.height / oldParentRect.height;\n//     const newNodeRect: IDOMRect = {\n//       width: widthPercent * width,\n//       height: heightPercent * height,\n//       left: cxPercent * width - (widthPercent * width) / 2,\n//       top: cyPercent * height - (heightPercent * height) / 2,\n//     };\n//     if (node.children && node.children.length) {\n//       return { ...node, ...newNodeRect, children: recursiveUpdateNodeChildrenSize(node.children, { ...node }, { ...newNodeRect }) };\n//     } else {\n//       return { ...node, ...newNodeRect };\n//     }\n//   });\n// }\n\n/**\n * 递归更新节点的位置和大小\n * @param nodes 节点列表\n * @param oldParentRect 父节点的旧尺寸和位置\n * @param newParentRect 父节点的新尺寸和位置\n */\nfunction recursiveUpdateNodeChildrenSize(nodes: INode[], oldParentRect: IDOMRect, newParentRect: IDOMRect): INode[] {\n  const { width, height } = newParentRect;\n  return nodes.map((node) => {\n    const nodeAbsolutePosition = CeUtilsService.shared.getAbsolutePosition(\n      node.left + node.width / 2,\n      node.top + node.height / 2,\n      node.width,\n      node.height,\n      node.rotate\n    );\n    const { tl, tr, bl, br } = CeUtilsService.shared.getItemPercentPositionInGroup(\n      {\n        ...oldParentRect,\n        left: 0,\n        top: 0,\n      },\n      nodeAbsolutePosition\n    );\n    const newNodeRect = CeUtilsService.shared.getRelativePosition({\n      tl: [tl[0] * width, tl[1] * height],\n      tr: [tr[0] * width, tr[1] * height],\n      bl: [bl[0] * width, bl[1] * height],\n      br: [br[0] * width, br[1] * height],\n    });\n    if (node.children && node.children.length) {\n      return { ...node, ...newNodeRect, children: recursiveUpdateNodeChildrenSize(node.children, { ...node }, { ...newNodeRect }) };\n    } else {\n      return { ...node, ...newNodeRect };\n    }\n  });\n}\n","import { DEFAULT_STORE, IActionType, IRefLineDirection, IRefLineState } from '../store';\n\nexport function updateRefLineState<T = any>(direction: IRefLineDirection, state: IRefLineState): IActionType<T> {\n  return (state) => ({ ...state, refLineState: { ...state.refLineState, [direction]: state } });\n}\n\nexport function resetRefLineState<T = any>(): IActionType<T> {\n  return (state) => ({ ...state, refLineState: DEFAULT_STORE.refLineState });\n}\n\nexport function updateRefLinesState<T = any>(refLineState: { [K in IRefLineDirection]: IRefLineState }): IActionType<T> {\n  return (state) => ({ ...state, refLineState: { ...state.refLineState, ...refLineState } });\n}\n","import { ChangeDetectorRef, Directive, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { InputBoolean } from 'ng-zorro-antd/core/util';\nimport { fromEvent, Observable, Subscription } from 'rxjs';\nimport { filter, finalize, map, switchMap, takeUntil } from 'rxjs/operators';\n\n@Directive({\n  selector: '[ceDraggable]',\n  exportAs: 'ceDraggable',\n})\nexport class DraggableDirective implements OnInit, OnDestroy {\n  @Input()\n  @InputBoolean()\n  public ceDragDisabled = false;\n  @Input()\n  @InputBoolean()\n  public ceUseSpace = false;\n  @Output()\n  public ceOnStart = new EventEmitter<PointerEvent>();\n  @Output()\n  public ceOnMove = new EventEmitter<MouseEvent>();\n  @Output()\n  public ceOnStop = new EventEmitter<PointerEvent>();\n  @Output()\n  public ceOnSpaceKeyDown = new EventEmitter<void>();\n  public spaceKeyDown = false;\n  private subscription = new Subscription();\n  private mouseMove$ = fromEvent<PointerEvent>(window, 'pointermove');\n  private mouseUp$ = fromEvent<PointerEvent>(window, 'pointerup');\n  private mouseDown$: Observable<PointerEvent>;\n  private mouseEnter$: Observable<PointerEvent>;\n  private mouseLeave$: Observable<PointerEvent>;\n  private keyDown$ = fromEvent<KeyboardEvent>(document, 'keydown');\n  private keyUp$ = fromEvent<KeyboardEvent>(document, 'keyup');\n  constructor(private eleRef: ElementRef<HTMLElement>, private cdr: ChangeDetectorRef) {\n    this.mouseDown$ = fromEvent<PointerEvent>(this.eleRef.nativeElement, 'pointerdown').pipe(filter((e) => e.button === 0));\n    this.mouseEnter$ = fromEvent<PointerEvent>(this.eleRef.nativeElement, 'pointerenter');\n    this.mouseLeave$ = fromEvent<PointerEvent>(this.eleRef.nativeElement, 'pointerleave');\n  }\n\n  ngOnInit(): void {\n    this.listenSpaceKeyEvent();\n    this.mouseDown$\n      .pipe(\n        filter(() => !this.ceDragDisabled),\n        filter(() => (this.ceUseSpace ? this.spaceKeyDown : true)),\n        switchMap((startEv) => {\n          this.ceOnStart.emit(startEv);\n          return this.mouseMove$.pipe(takeUntil(this.mouseUp$.pipe(map((stopEv) => this.ceOnStop.emit(stopEv)))));\n        })\n      )\n      .subscribe((moveEv) => this.ceOnMove.emit(moveEv));\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  listenSpaceKeyEvent(): void {\n    this.subscription.add(\n      this.mouseEnter$\n        .pipe(\n          filter(() => !this.ceDragDisabled),\n          filter(() => this.ceUseSpace),\n          switchMap(() =>\n            this.keyDown$.pipe(\n              switchMap((e) => {\n                this.spaceKeyDown = e.key === ' ';\n                this.cdr.detectChanges();\n                if (this.spaceKeyDown) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                }\n                return this.keyUp$;\n              }),\n              map(() => {\n                this.spaceKeyDown = false;\n                this.ceOnStop.emit();\n              }),\n              takeUntil(this.mouseLeave$),\n              finalize(() => {\n                this.spaceKeyDown = false;\n                this.ceOnStop.emit();\n              })\n            )\n          )\n        )\n        .subscribe()\n    );\n  }\n}\n","<ce-box-item\n  *ngFor=\"let node of nodes$ | async; trackBy: nodeListTrackByFn\"\n  ceDraggable\n  [ceDragDisabled]=\"node?.locked\"\n  (ceOnStart)=\"moveStart($event, node)\"\n  (ceOnMove)=\"moving($event)\"\n  (ceOnStop)=\"moveEnd()\"\n  [node]=\"node\"\n  (pointerenter)=\"showBorder(node.id)\"\n  (pointerleave)=\"removeBorder(node.id)\"\n></ce-box-item>\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport {\n  addBorderedNodes,\n  addSelectedNodes,\n  clearBordered,\n  clearSelected,\n  removeBorderedNodes,\n  resetRefLineState,\n  updateNodes,\n  updateRefLinesState,\n} from '../../actions';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService, IDOMRect } from '../../services/utils.service';\nimport { ICanvasPosition, INode, IRefLineDirection, IRefLineState, IStore } from '../../store';\n\nconst REF_LINE_DIRECTION_COMPARE_MAP: {\n  [P in IRefLineDirection]: {\n    baseKey: keyof IDOMRect;\n    referKey: keyof IDOMRect;\n    baseValue: (baseRect: IDOMRect, referRect: IDOMRect) => { key: keyof IDOMRect; value: number };\n  }[];\n} = {\n  tx: [\n    {\n      baseKey: 'top',\n      referKey: 'top',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.top }),\n    },\n    {\n      baseKey: 'top',\n      referKey: 'cy',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.cy }),\n    },\n    {\n      baseKey: 'top',\n      referKey: 'bottom',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.bottom }),\n    },\n  ],\n  bx: [\n    {\n      baseKey: 'bottom',\n      referKey: 'top',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.top - baseRect.height }),\n    },\n    {\n      baseKey: 'bottom',\n      referKey: 'cy',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.cy - baseRect.height }),\n    },\n    {\n      baseKey: 'bottom',\n      referKey: 'bottom',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.bottom - baseRect.height }),\n    },\n  ],\n  ly: [\n    {\n      baseKey: 'left',\n      referKey: 'left',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.left }),\n    },\n    {\n      baseKey: 'left',\n      referKey: 'cx',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.cx }),\n    },\n    {\n      baseKey: 'left',\n      referKey: 'right',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.right }),\n    },\n  ],\n  ry: [\n    {\n      baseKey: 'right',\n      referKey: 'left',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.left - baseRect.width }),\n    },\n    {\n      baseKey: 'right',\n      referKey: 'cx',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.cx - baseRect.width }),\n    },\n    {\n      baseKey: 'right',\n      referKey: 'right',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.right - baseRect.width }),\n    },\n  ],\n  cx: [\n    {\n      baseKey: 'cy',\n      referKey: 'top',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.top - baseRect.height / 2 }),\n    },\n    {\n      baseKey: 'cy',\n      referKey: 'cy',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.cy - baseRect.height / 2 }),\n    },\n    {\n      baseKey: 'cy',\n      referKey: 'bottom',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.bottom - baseRect.height / 2 }),\n    },\n  ],\n  cy: [\n    {\n      baseKey: 'cx',\n      referKey: 'left',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.left - baseRect.width / 2 }),\n    },\n    {\n      baseKey: 'cx',\n      referKey: 'cx',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.cx - baseRect.width / 2 }),\n    },\n    {\n      baseKey: 'cx',\n      referKey: 'right',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.right - baseRect.width / 2 }),\n    },\n  ],\n};\n@Component({\n  selector: 'ce-canvas',\n  templateUrl: 'canvas.component.html',\n  styleUrls: ['canvas.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasComponent {\n  public nodes$: Observable<INode[]>;\n  public nodes: INode[];\n  private selected: Set<string>;\n  private canvasPosition: ICanvasPosition;\n  private pointerSnapshot: [number, number] = null;\n  private nodesSnapshot: Map<string, INode> = new Map();\n  private outerBoxSnapshot: IDOMRect;\n  private unselectedNodes: INode[];\n  private gap = 5;\n\n  constructor(private store: EditorStore<IStore>, private utils: CeUtilsService) {\n    this.nodes$ = this.store.selectDifferent((state) => state.nodes);\n    this.store.select((state) => state.nodes).subscribe((nodes) => (this.nodes = nodes));\n    this.store.select((state) => state.selected).subscribe((state) => (this.selected = state));\n    this.store.select((state) => state.canvasPosition).subscribe((state) => (this.canvasPosition = state));\n  }\n\n  nodeListTrackByFn(i: number, node: INode): string {\n    return node.id;\n  }\n\n  moveStart(ev: PointerEvent, node: INode): void {\n    ev.preventDefault();\n    ev.stopPropagation();\n    this.nodesSnapshot.clear();\n    this.pointerSnapshot = [ev.clientX, ev.clientY];\n    let selected: string[] = [...this.selected];\n    if (!this.selected.has(node.id)) {\n      this.store.dispatch(clearBordered());\n      this.store.dispatch(clearSelected());\n      this.store.dispatch(addSelectedNodes([node.id]));\n      selected = [node.id];\n    }\n\n    this.outerBoxSnapshot = this.utils.getOuterBoundingBox(\n      selected\n        .map((id) => this.utils.getNodeById(id, this.nodes))\n        .map((item) => this.utils.getAbsolutePosition(item.left + item.width / 2, item.top + item.height / 2, item.width, item.height, item.rotate))\n    );\n    this.unselectedNodes = this.nodes.filter((item) => !selected.includes(item.id));\n\n    selected.forEach((id) => {\n      const item = this.nodes.find((n) => n.id === id);\n      this.nodesSnapshot.set(item.id, {\n        ...item,\n        cxPercent: (item.left + item.width / 2 - this.outerBoxSnapshot.left) / this.outerBoxSnapshot.width,\n        cyPercent: (item.top + item.height / 2 - this.outerBoxSnapshot.top) / this.outerBoxSnapshot.height,\n      });\n    });\n  }\n\n  moving(ev: PointerEvent): void {\n    if (this.pointerSnapshot) {\n      this.store.dispatch(resetRefLineState());\n      const { scale } = this.canvasPosition;\n      const [x, y] = this.pointerSnapshot;\n      const [mx, my] = [(ev.clientX - x) / scale, (ev.clientY - y) / scale];\n      const baseRect: IDOMRect = {\n        ...this.outerBoxSnapshot,\n        left: this.outerBoxSnapshot.left + mx,\n        top: this.outerBoxSnapshot.top + my,\n        right: this.outerBoxSnapshot.right + mx,\n        bottom: this.outerBoxSnapshot.bottom + my,\n        cx: this.outerBoxSnapshot.cx + mx,\n        cy: this.outerBoxSnapshot.cy + my,\n      };\n      const refLinesState: { [P in IRefLineDirection]: IRefLineState } = {\n        bx: null,\n        tx: null,\n        ly: null,\n        ry: null,\n        cx: null,\n        cy: null,\n      };\n      this.unselectedNodes.forEach((node) => {\n        const nodeRect = this.utils.getBoundingBox(node.width, node.height, node.left, node.top, node.rotate);\n        ['tx', 'bx', 'ly', 'ry', 'cx', 'cy'].forEach((direction: IRefLineDirection) => {\n          const result = getRefLineStateByDirection(direction, baseRect, nodeRect, this.gap / scale);\n          if (result) {\n            const { state, position, base } = result;\n            if (state) {\n              refLinesState[direction] = { state, position };\n              baseRect[base.key] = base.value;\n            }\n          }\n        });\n      });\n      const newNodes: INode[] = [];\n      this.nodesSnapshot.forEach((node) => {\n        const { cxPercent, cyPercent, width, height, nodeRect, ...properties } = node;\n        newNodes.push({\n          ...properties,\n          width,\n          height,\n          left: cxPercent * baseRect.width + baseRect.left - width / 2,\n          top: cyPercent * baseRect.height + baseRect.top - height / 2,\n        });\n      });\n\n      this.store.dispatch(updateRefLinesState(refLinesState));\n      this.store.dispatch(updateNodes(newNodes));\n    }\n  }\n\n  moveEnd(): void {\n    this.pointerSnapshot = null;\n    this.store.dispatch(resetRefLineState());\n    this.nodesSnapshot.clear();\n  }\n\n  showBorder(id: string): void {\n    this.store.dispatch(addBorderedNodes([id]));\n  }\n\n  removeBorder(id: string): void {\n    if (!this.selected.has(id)) {\n      this.store.dispatch(removeBorderedNodes([id]));\n    }\n  }\n}\n\nfunction getRefLineStateByDirection(\n  direction: IRefLineDirection,\n  baseRect: IDOMRect,\n  referRect: IDOMRect,\n  gap: number\n): IRefLineState & { base: { key: keyof IDOMRect; value: number } } {\n  return REF_LINE_DIRECTION_COMPARE_MAP[direction]\n    .map(({ baseKey, referKey, baseValue }) => ({\n      state: Math.abs(baseRect[baseKey] - referRect[referKey]) < gap,\n      position: referRect[referKey],\n      base: baseValue(baseRect, referRect),\n    }))\n    .find((item) => item.state);\n}\n","<nz-tree\n  #layerTree\n  nzBlockNode\n  nzMultiple\n  [nzData]=\"treeNodes$ | async\"\n  [nzSelectedKeys]=\"selectedKeys$ | async\"\n  [nzTreeTemplate]=\"nzTreeTemplate\"\n  [nzExpandedIcon]=\"multiExpandedIconTpl\"\n  (nzClick)=\"clickNode($event)\"\n>\n  <ng-template #multiExpandedIconTpl let-node let-origin=\"origin\">\n    <i *ngIf=\"!node.isLeaf\" nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\" class=\"ant-tree-switcher-line-icon\"></i>\n  </ng-template>\n  <ng-template #nzTreeTemplate let-node=\"origin\">\n    <div\n      class=\"layer\"\n      [class.locked]=\"node.locked\"\n      (contextmenu)=\"contextMenu($event, menu, node)\"\n      (pointerenter)=\"showBordered(node.id)\"\n      (pointerleave)=\"clearBordered(node.id)\"\n    >\n      <span>{{ node.title }}</span>\n    </div>\n    <nz-dropdown-menu #menu=\"nzDropdownMenu\">\n      <ul nz-menu>\n        <li *ngIf=\"!node.locked\" nz-menu-item class=\"action-item\" (click)=\"toggleNodesLockState(layerTree.nzSelectedKeys, true)\">\n          <i nz-icon nzType=\"lock\"></i>\n          <span>锁定</span>\n        </li>\n        <li *ngIf=\"node.locked\" nz-menu-item class=\"action-item\" (click)=\"toggleNodesLockState(layerTree.nzSelectedKeys, false)\">\n          <i nz-icon nzType=\"unlock\"></i>\n          <span>解锁</span>\n        </li>\n        <li nz-menu-item class=\"action-item\" (click)=\"deleteNodes(layerTree.nzSelectedKeys)\">\n          <i nz-icon nzType=\"delete\"></i>\n          <span>删除</span>\n        </li>\n        <li *ngIf=\"groupStatus$ | async\" nz-menu-item class=\"action-item\" (click)=\"group(layerTree.nzSelectedKeys)\">\n          <i nz-icon nzIconfont=\"icon-group\"></i>\n          <span>组合</span>\n          <span class=\"shortcuts\"> ctrl+shift+G </span>\n        </li>\n        <li *ngIf=\"selected.size === 1 && node.children && node.children.length\" nz-menu-item (click)=\"breakNode(node.id)\" class=\"action-item\">\n          <i nz-icon nzIconfont=\"icon-break\"></i>\n          <span>打散</span>\n          <span class=\"shortcuts\"> ctrl+shift+B </span>\n        </li>\n      </ul>\n    </nz-dropdown-menu>\n  </ng-template>\n</nz-tree>\n","import { ChangeDetectionStrategy, Component, ElementRef, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { NzContextMenuService, NzDropdownMenuComponent } from 'ng-zorro-antd/dropdown';\nimport { NzFormatEmitEvent, NzTreeComponent, NzTreeNode, NzTreeNodeOptions } from 'ng-zorro-antd/tree';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport {\n  addBorderedNodes,\n  breakNode,\n  clearBordered,\n  clearSelected,\n  groupNodes,\n  lockNodes,\n  removeBorderedNodes,\n  removeNodes,\n  setBorderedNodes,\n  setSelectedNodes,\n  unlockNodes,\n} from '../../actions';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService } from '../../services/utils.service';\nimport { INode, IStore } from '../../store';\n\n@Component({\n  selector: 'ce-layer-tree',\n  exportAs: 'ceLayerTree',\n  templateUrl: 'layer-tree.component.html',\n  styleUrls: ['layer-tree.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LayerTreeComponent {\n  public treeNodes$: Observable<NzTreeNodeOptions[]>;\n  public selected: Set<string>;\n  public selectedKeys$: Observable<string[]>;\n  @ViewChild('layerTree', { read: NzTreeComponent })\n  public layerTree: NzTreeComponent;\n  private parentKey: string;\n  public groupStatus$: Observable<boolean>;\n\n  constructor(\n    public eleRef: ElementRef<HTMLElement>,\n    private store: EditorStore<IStore>,\n    private utils: CeUtilsService,\n    private contextMenuSrv: NzContextMenuService\n  ) {\n    this.treeNodes$ = this.store\n      .selectDifferent((state) => state.nodes)\n      .pipe(map((nodes) => this.transferNodesToNzNodes(this.utils.sortNodeListByIndex(nodes))));\n    this.selectedKeys$ = this.store.selectDifferent((state) => state.selected).pipe(map((selected) => [...selected]));\n    this.groupStatus$ = this.store\n      .selectDifferent((state) => state.selected)\n      .pipe(\n        filter(() => !!this.layerTree),\n        map((selected) =>\n          selected.size > 1\n            ? !![...selected].find((id) => {\n                const node = this.layerTree?.getSelectedNodeList().find((item) => item.key === id);\n                return node && node.parentNode;\n              })\n            : false\n        )\n      );\n    this.store\n      .selectDifferent((state) => state.selected)\n      .subscribe((selected) => {\n        this.selected = selected;\n      });\n  }\n\n  clearBordered(id: string): void {\n    if (!this.selected.has(id)) {\n      this.store.dispatch(removeBorderedNodes([id]));\n    }\n  }\n\n  showBordered(id: string): void {\n    this.store.dispatch(addBorderedNodes([id]));\n  }\n\n  layerTrackByFn(index: number, node: INode): string {\n    return `box-item-${node.id}-${node.zIndex}`;\n  }\n\n  transferNodesToNzNodes(nodes: INode[]): NzTreeNodeOptions[] {\n    return nodes.map((node) => {\n      return {\n        ...node,\n        children: node.children && this.transferNodesToNzNodes(node.children),\n        title: node.name,\n        key: node.id,\n        isLeaf: !node.children?.length,\n      };\n    });\n  }\n\n  contextMenu(event: MouseEvent, menu: NzDropdownMenuComponent, node: NzTreeNode): void {\n    if (!this.selected.has(node.key)) {\n      this.store.dispatch(setSelectedNodes([node.key]));\n    }\n    this.contextMenuSrv.create(event, menu);\n  }\n\n  getParentKey(parentNode?: NzTreeNode): string {\n    return parentNode?.key ?? 'root';\n  }\n\n  multipleSelected(event: NzFormatEmitEvent): void {\n    if (!this.parentKey) {\n      this.parentKey = this.getParentKey(event.node.parentNode);\n    }\n    const ids = event.selectedKeys.filter((node) => this.getParentKey(node.parentNode) === this.parentKey).map((node) => node.key);\n    this.store.dispatch(setSelectedNodes(ids));\n    this.store.dispatch(setBorderedNodes(ids));\n  }\n\n  clickNode(event: NzFormatEmitEvent): void {\n    if (event.node) {\n      if (/Win|Linux/.test(navigator.platform)) {\n        if (event.event.ctrlKey) {\n          this.multipleSelected(event);\n        } else {\n          this.parentKey = this.getParentKey(event.node.parentNode);\n          this.store.dispatch(setSelectedNodes([event.node.key]));\n          this.store.dispatch(setBorderedNodes([event.node.key]));\n        }\n      }\n      if (/Mac/.test(navigator.platform)) {\n        if (event.event.metaKey) {\n          this.multipleSelected(event);\n        } else {\n          this.parentKey = this.getParentKey(event.node.parentNode);\n          this.store.dispatch(setSelectedNodes([event.node.key]));\n          this.store.dispatch(setBorderedNodes([event.node.key]));\n        }\n      }\n    }\n  }\n\n  group(ids: string[]): void {\n    this.store.dispatch(groupNodes(ids));\n  }\n\n  breakNode(id: string): void {\n    this.store.dispatch(clearSelected());\n    this.store.dispatch(clearBordered());\n    this.store.dispatch(breakNode(id));\n  }\n\n  deleteNodes(ids: string[]): void {\n    this.store.dispatch(clearSelected());\n    this.store.dispatch(clearBordered());\n    this.store.dispatch(removeNodes(ids));\n  }\n\n  toggleNodesLockState(ids: string[], state: boolean) {\n    if (state) {\n      this.store.dispatch(lockNodes(ids));\n    } else {\n      this.store.dispatch(unlockNodes(ids));\n    }\n  }\n}\n","<nz-card\n  nzSize=\"small\"\n  [nzTitle]=\"cardTitle\"\n  [nzExtra]=\"cardExtra\"\n  cdkDrag\n  [cdkDragFreeDragPosition]=\"panel\"\n  (cdkDragEnded)=\"updatePosition($event)\"\n  [class.collapsed]=\"panel?.collapsed\"\n>\n  <ng-template #cardTitle>\n    <div cdkDragHandle class=\"d-flex align-items-center\">{{ panel?.title }}</div>\n  </ng-template>\n  <ng-container *ngIf=\"utils.isTemplateType(panel.content)\">\n    <ng-container *ngTemplateOutlet=\"panel.content\"></ng-container>\n  </ng-container>\n  <ng-container *ngIf=\"!utils.isTemplateType(panel.content)\">\n    <ng-container *ngComponentOutlet=\"panel.content\"></ng-container>\n  </ng-container>\n</nz-card>\n\n<ng-template #cardExtra>\n  <button nz-button nzSize=\"small\" nzType=\"link\" (click)=\"toggleCollapsed()\" class=\"collapse-icon\">\n    <i nz-icon nzType=\"caret-down\"></i>\n  </button>\n  <button nz-button nzSize=\"small\" nzType=\"link\" (click)=\"close()\">\n    <i nz-icon nzType=\"close\"></i>\n  </button>\n</ng-template>\n","import { CdkDragEnd } from '@angular/cdk/drag-drop';\nimport { ChangeDetectionStrategy, Component, Input, ViewEncapsulation } from '@angular/core';\nimport { CeUtilsService, EditorStore } from '../../services';\nimport { IPanel } from '../../store';\n\n@Component({\n  selector: 'ce-panel,[cePanel]',\n  templateUrl: './panel.component.html',\n  styleUrls: ['./panel.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PanelComponent<T> {\n  private _panel: IPanel<T>;\n\n  @Input()\n  set panel(val: IPanel<T>) {\n    this._panel = val;\n  }\n  get panel(): IPanel<T> {\n    return this._panel;\n  }\n  constructor(public utils: CeUtilsService, public store: EditorStore) {}\n\n  updatePosition(event: CdkDragEnd) {\n    this.store.updatePanelPosition(this.panel.key, [this.panel.x + event.distance.x, this.panel.y + event.distance.y]);\n  }\n\n  toggleCollapsed() {\n    this.store.togglePanelCollapsed(this.panel.key);\n  }\n\n  close() {\n    this.store.togglePanelVisible(this.panel.key);\n  }\n}\n","<div>\n  <h4>画布尺寸</h4>\n  <form nz-form nzLayout=\"inline\" [formGroup]=\"canvasSizeFormGroup\">\n    <nz-row nzGutter=\"8\">\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-kuandu\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <nz-input-number nzSize=\"small\" formControlName=\"width\"></nz-input-number>\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-gaodu\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <nz-input-number nzSize=\"small\" formControlName=\"height\"></nz-input-number>\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n    </nz-row>\n  </form>\n</div>\n<div class=\"mt-2\">\n  <h4>画布位置</h4>\n  <form nz-form nzLayout=\"inline\" [formGroup]=\"canvasPositionFormGroup\">\n    <nz-row nzGutter=\"8\">\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-left\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <nz-input-number nzSize=\"small\" formControlName=\"left\"></nz-input-number>\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-top\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <nz-input-number nzSize=\"small\" formControlName=\"top\"></nz-input-number>\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-scale\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <nz-input-number nzSize=\"small\" formControlName=\"scale\"></nz-input-number>\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n    </nz-row>\n  </form>\n</div>\n<div class=\"mt-2\">\n  <h4>画布背景</h4>\n  <form nz-form nzLayout=\"inline\" [formGroup]=\"canvasBackgroundFormGroup\">\n    <nz-row nzGutter=\"8\">\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-color\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <input type=\"color\" nz-input nzSize=\"small\" formControlName=\"backgroundColor\" />\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-image\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <input type=\"text\" nz-input nzSize=\"small\" formControlName=\"backgroundImage\" />\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n    </nz-row>\n  </form>\n</div>\n<h5 class=\"mt-1\">背景预览</h5>\n<div>\n  <img\n    [style.max-width.%]=\"100\"\n    *ngIf=\"canvasBackgroundFormGroup.controls['backgroundImage'].value\"\n    [src]=\"canvasBackgroundFormGroup.controls['backgroundImage'].value | nzSanitizer: 'url'\"\n  />\n</div>\n","import { ChangeDetectionStrategy, Component, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { updateCanvasBackground, updateCanvasPosition, updateCanvasSize } from '../../../../actions';\nimport { EditorStore } from '../../../../services/store.service';\n\n@Component({\n  selector: 'ce-canvas-forms,[ceCanvasForms]',\n  templateUrl: './canvas-forms.component.html',\n  styleUrls: ['./canvas-forms.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasFormsComponent implements OnInit, OnDestroy {\n  public canvasSizeFormGroup: FormGroup;\n  public canvasPositionFormGroup: FormGroup;\n  public canvasBackgroundFormGroup: FormGroup;\n  private subscription = new Subscription();\n  constructor(public fb: FormBuilder, public store: EditorStore) {\n    this.canvasSizeFormGroup = this.fb.group({\n      width: [0, [Validators.required, Validators.min(0)]],\n      height: [0, [Validators.required, Validators.min(0)]],\n    });\n    this.canvasPositionFormGroup = this.fb.group({\n      left: [0, [Validators.required]],\n      top: [0, [Validators.required]],\n      scale: [1, [Validators.min(0.01), Validators.required]],\n    });\n    this.canvasBackgroundFormGroup = this.fb.group({\n      backgroundColor: ['#ffffff'],\n      backgroundImage: [null],\n    });\n    this.subscription.add(\n      this.store\n        .selectDifferent((state) => state.canvasSize)\n        .subscribe((state) => {\n          this.canvasSizeFormGroup.patchValue(state, { emitEvent: false });\n        })\n    );\n    this.subscription.add(\n      this.store\n        .selectDifferent((state) => state.canvasPosition)\n        .subscribe((state) => {\n          this.canvasPositionFormGroup.patchValue(\n            { left: Math.round(state.left), top: Math.round(state.top), scale: state.scale?.toFixed(2) },\n            { emitEvent: false }\n          );\n        })\n    );\n    this.subscription.add(\n      this.store\n        .selectDifferent((state) => state.canvasBackground)\n        .subscribe((state) => {\n          this.canvasBackgroundFormGroup.patchValue(state, { emitEvent: false });\n        })\n    );\n  }\n\n  ngOnInit(): void {\n    this.canvasSizeFormGroup.valueChanges.subscribe((value) => {\n      this.store.dispatch(updateCanvasSize(value));\n    });\n    this.canvasPositionFormGroup.valueChanges.subscribe((value) => {\n      this.store.dispatch(updateCanvasPosition(value));\n    });\n    this.canvasBackgroundFormGroup.valueChanges.subscribe((value) => {\n      console.log(value);\n      this.store.dispatch(updateCanvasBackground(value));\n    });\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n}\n","<nz-collapse [nzBordered]=\"false\" nzGhost nzAccordion nzSize=\"small\">\n  <nz-collapse-panel nzHeader=\"外包围盒属性\" nzActive>\n    <div>\n      <h5>尺寸</h5>\n      <form nz-form nzLayout=\"inline\" [formGroup]=\"boundingFormGroup\">\n        <nz-row nzGutter=\"8\">\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzIconfont=\"icon-kuandu\"></i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-input-number nzSize=\"small\" formControlName=\"width\"></nz-input-number>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzIconfont=\"icon-gaodu\"></i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-input-number nzSize=\"small\" formControlName=\"height\"></nz-input-number>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n        </nz-row>\n      </form>\n      <h5>位置</h5>\n      <form nz-form nzLayout=\"inline\" [formGroup]=\"boundingFormGroup\">\n        <nz-row nzGutter=\"8\">\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzIconfont=\"icon-left\"></i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-input-number nzSize=\"small\" formControlName=\"left\"></nz-input-number>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzIconfont=\"icon-top\"></i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-input-number nzSize=\"small\" formControlName=\"top\"></nz-input-number>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzType=\"rotate-right\"> </i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-input-number nzSize=\"small\" formControlName=\"rotate\"></nz-input-number>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzType=\"lock\"> </i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-switch formControlName=\"locked\"></nz-switch>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n        </nz-row>\n      </form>\n      <h5>边框</h5>\n      <form nz-form nzLayout=\"inline\" [formGroup]=\"boundingFormGroup\">\n        <nz-row nzGutter=\"8\">\n          <nz-col nzSpan=\"24\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzType=\"border-outer\"></i>\n              </nz-form-label>\n              <nz-form-control>\n                <ng-template #borderStyleTpl let-selected>\n                  <div class=\"d-flex align-items-center h-100\" [style.width.px]=\"40\">\n                    <ng-container [ngSwitch]=\"selected.nzValue\">\n                      <ng-container *ngSwitchCase=\"'none'\">\n                        <span>none</span>\n                      </ng-container>\n                      <ng-container *ngSwitchCase=\"'dashed'\">\n                        <svg class=\"svg-icon\" viewBox=\"0 0 40 1\">\n                          <path\n                            d=\"M0 1h5V0H0v1zm9 0h5V0H9v1zm10 0h5V0h-5v1zm9 0h5V0h-5v1zm10 0h5V0h-5v1zm9 0h5V0h-5v1zm9 0h5V0h-5v1zm10 0h5V0h-5v1zm9 0h5V0h-5v1z\"\n                          ></path>\n                        </svg>\n                      </ng-container>\n                      <ng-container *ngSwitchCase=\"'solid'\">\n                        <svg class=\"svg-icon\" viewBox=\"0 0 40 1\">\n                          <path d=\"M0 0h80v1H0z\"></path>\n                        </svg>\n                      </ng-container>\n                      <ng-container *ngSwitchCase=\"'dotted'\">\n                        <svg class=\"svg-icon\" viewBox=\"0 0 40 1\">\n                          <path\n                            d=\"M0 1h1V0H0v1zm4 0h1V0H4v1zm4 0h1V0H8v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1z\"\n                          ></path>\n                        </svg>\n                      </ng-container>\n                    </ng-container>\n                  </div>\n                </ng-template>\n                <nz-select nzSize=\"small\" formControlName=\"borderStyle\" [nzCustomTemplate]=\"borderStyleTpl\">\n                  <nz-option nzValue=\"none\" nzLabel=\"none\">\n                    <ng-container *ngTemplateOutlet=\"borderStyleTpl; context: { $implicit: { nzValue: 'none' } }\"></ng-container>\n                  </nz-option>\n                  <nz-option nzValue=\"dashed\" nzLabel=\"dashed\" nzCustomContent>\n                    <ng-container *ngTemplateOutlet=\"borderStyleTpl; context: { $implicit: { nzValue: 'dashed' } }\"></ng-container>\n                  </nz-option>\n                  <nz-option nzValue=\"solid\" nzLabel=\"solid\" nzCustomContent>\n                    <ng-container *ngTemplateOutlet=\"borderStyleTpl; context: { $implicit: { nzValue: 'solid' } }\"></ng-container>\n                  </nz-option>\n                  <nz-option nzValue=\"dotted\" nzLabel=\"dotted\" nzCustomContent>\n                    <ng-container *ngTemplateOutlet=\"borderStyleTpl; context: { $implicit: { nzValue: 'dotted' } }\"></ng-container>\n                  </nz-option>\n                </nz-select>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n        </nz-row>\n      </form>\n    </div>\n  </nz-collapse-panel>\n  <nz-collapse-panel nzHeader=\"组件属性\">\n    <ng-template #container></ng-template>\n  </nz-collapse-panel>\n</nz-collapse>\n","import { Component, ComponentFactoryResolver, OnInit, TemplateRef, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { updateNodes } from '../../../../actions/nodes.actions';\nimport { filter, map, switchMap } from 'rxjs/operators';\nimport { EditorStore } from '../../../../services/store.service';\n\n@Component({\n  selector: 'ce-widget-form,[ceWidgetForm]',\n  templateUrl: './widget-form.component.html',\n  styleUrls: ['./widget-form.component.less'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class WidgetFormComponent implements OnInit {\n  @ViewChild('container')\n  propsFormContainer: TemplateRef<any>;\n  boundingFormGroup: FormGroup;\n  constructor(private fb: FormBuilder, private cfr: ComponentFactoryResolver, private store: EditorStore) {\n    this.boundingFormGroup = this.fb.group({\n      id: [, [Validators.required]],\n      name: [],\n      width: [, [Validators.required]],\n      height: [, [Validators.required]],\n      left: [, [Validators.required]],\n      top: [, [Validators.required]],\n      locked: [],\n      rotate: [, [Validators.required]],\n      zIndex: [, [Validators.required]],\n      borderStyle: [],\n      borderWidth: [],\n      borderColor: [],\n      borderRadius: [],\n      backgroundColor: [],\n      backgroundImage: [],\n      backgroundRepeat: [],\n      backgroundPosition: [],\n      backgroundSize: [],\n    });\n  }\n\n  ngOnInit(): void {\n    this.store\n      .select((state) => state.selected)\n      .pipe(\n        filter((selected) => selected.size === 1),\n        map((selected) => [...selected][0]),\n        switchMap((id) => this.store.select((state) => state.nodes.find((item) => item.id === id))),\n        filter((node) => !!node)\n      )\n      .subscribe((node) => {\n        this.boundingFormGroup.patchValue(\n          {\n            ...node,\n            width: Math.round(node.width),\n            height: Math.round(node.height),\n            left: Math.round(node.left),\n            top: Math.round(node.top),\n          },\n          { emitEvent: false }\n        );\n      });\n    this.boundingFormGroup.valueChanges.subscribe((values) => {\n      this.store.dispatch(updateNodes([values]));\n    });\n  }\n}\n","<ng-container *ngComponentOutlet=\"formComponent$ | async\"></ng-container>\n","import { ChangeDetectionStrategy, Component, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { EditorStore } from '../../services';\nimport { CanvasFormsComponent } from './forms/canvas-forms/canvas-forms.component';\nimport { WidgetFormComponent } from './forms/widget-form/widget-form.component';\n\n@Component({\n  selector: 'ce-property-form,[cePropertyForm]',\n  templateUrl: './property-form.component.html',\n  styleUrls: ['./property-form.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PropertyFormComponent implements OnInit {\n  formComponent$: Observable<any>;\n  @ViewChild('instance')\n  instance: any;\n  constructor(public store: EditorStore) {}\n\n  ngOnInit(): void {\n    this.formComponent$ = this.store\n      .select((state) => state.selected.size)\n      .pipe(map((size) => (size === 1 ? WidgetFormComponent : CanvasFormsComponent)));\n  }\n}\n","<ce-rotate-handle *ngIf=\"hasSelected$ | async\"></ce-rotate-handle>\n<div\n  *ngIf=\"hasSelected$ | async\"\n  class=\"resizable-handle t\"\n  ceDraggable\n  (ceOnStart)=\"resizeStart($event)\"\n  (ceOnMove)=\"resizing($event, 't')\"\n  (ceOnStop)=\"resizeEnd()\"\n></div>\n<div\n  *ngIf=\"hasSelected$ | async\"\n  class=\"resizable-handle r\"\n  ceDraggable\n  (ceOnStart)=\"resizeStart($event)\"\n  (ceOnMove)=\"resizing($event, 'r')\"\n  (ceOnStop)=\"resizeEnd()\"\n></div>\n<div\n  *ngIf=\"hasSelected$ | async\"\n  class=\"resizable-handle b\"\n  ceDraggable\n  (ceOnStart)=\"resizeStart($event)\"\n  (ceOnMove)=\"resizing($event, 'b')\"\n  (ceOnStop)=\"resizeEnd()\"\n></div>\n<div\n  *ngIf=\"hasSelected$ | async\"\n  class=\"resizable-handle l\"\n  ceDraggable\n  (ceOnStart)=\"resizeStart($event)\"\n  (ceOnMove)=\"resizing($event, 'l')\"\n  (ceOnStop)=\"resizeEnd()\"\n></div>\n<div class=\"resizable-handle tr\" ceDraggable (ceOnStart)=\"resizeStart($event)\" (ceOnMove)=\"resizing($event, 'tr')\" (ceOnStop)=\"resizeEnd()\"></div>\n<div class=\"resizable-handle br\" ceDraggable (ceOnStart)=\"resizeStart($event)\" (ceOnMove)=\"resizing($event, 'br')\" (ceOnStop)=\"resizeEnd()\"></div>\n<div class=\"resizable-handle tl\" ceDraggable (ceOnStart)=\"resizeStart($event)\" (ceOnMove)=\"resizing($event, 'tl')\" (ceOnStop)=\"resizeEnd()\"></div>\n<div class=\"resizable-handle bl\" ceDraggable (ceOnStart)=\"resizeStart($event)\" (ceOnMove)=\"resizing($event, 'bl')\" (ceOnStop)=\"resizeEnd()\"></div>\n<div *ngIf=\"hasSelected$ | async\" class=\"t circle\"></div>\n<div *ngIf=\"hasSelected$ | async\" class=\"r circle\"></div>\n<div *ngIf=\"hasSelected$ | async\" class=\"b circle\"></div>\n<div *ngIf=\"hasSelected$ | async\" class=\"l circle\"></div>\n<div class=\"tr circle\"></div>\n<div class=\"br circle\"></div>\n<div class=\"tl circle\"></div>\n<div class=\"bl circle\"></div>\n","import { ChangeDetectionStrategy, Component, ElementRef, HostBinding, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { updateNodesSize } from '../../actions';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService, IAbsolutePosition, IDOMRect, IRectDirection } from '../../services/utils.service';\nimport { ICanvasPosition, INode, IStore } from '../../store';\n\n@Component({\n  selector: 'ce-resize-handle,[ceResizeHandle]',\n  templateUrl: 'resize-handle.component.html',\n  styleUrls: ['resize-handle.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ResizeHandleComponent {\n  @HostBinding('style.display')\n  public display = 'none';\n  @HostBinding('style.width.px')\n  public width: number;\n  @HostBinding('style.height.px')\n  public height: number;\n  @HostBinding('style.left.px')\n  public left: number;\n  @HostBinding('style.top.px')\n  public top: number;\n  @HostBinding('style.transform')\n  public get transform(): string {\n    return `rotate(${this.rotate ?? 0}deg)`;\n  }\n  public selected: Set<string>;\n  public hasSelected$: Observable<boolean>;\n  private canvasPosition: ICanvasPosition;\n  private rotate: number;\n  private nodes: INode[];\n  private resizeMode: 'GROUP' | 'SINGLE';\n  private groupRectSnapshot: IDOMRect;\n  private groupAbsolutePositionSnapshot: IAbsolutePosition;\n  private resizePointSnapshot: { absolute: [number, number]; relative: [number, number] };\n  private nodePositionSnapshotList = new Map<string, IAbsolutePosition>();\n\n  constructor(private store: EditorStore<IStore>, private utils: CeUtilsService, public eleRef: ElementRef<HTMLElement>) {\n    this.hasSelected$ = this.store.selectDifferent((state) => !!state.selected.size);\n    this.store\n      .selectDifferent((state) => ({ selected: state.selected, canvasPosition: state.canvasPosition, nodes: state.nodes }))\n      .subscribe(({ selected, canvasPosition, nodes }) => {\n        this.display = selected.size ? 'block' : 'none';\n        this.selected = selected;\n        this.canvasPosition = canvasPosition;\n        this.nodes = nodes;\n        if (this.selected.size) {\n          this.refreshResizeHandle();\n        }\n      });\n  }\n\n  refreshResizeHandle(): any {\n    if (!this.selected || !this.nodes) {\n      return;\n    }\n\n    const { left, top, width, height, rotate } = this.utils.getResizeBoundingBox([...this.selected], this.nodes);\n    this.left = left * this.canvasPosition.scale;\n    this.top = top * this.canvasPosition.scale;\n    this.width = width * this.canvasPosition.scale;\n    this.height = height * this.canvasPosition.scale;\n    this.rotate = rotate;\n  }\n\n  resizeStart(event: PointerEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    const { scale } = this.canvasPosition;\n    const canvasRect = document.querySelector('ce-canvas').getBoundingClientRect();\n    this.groupRectSnapshot = { width: this.width / scale, height: this.height / scale, left: this.left / scale, top: this.top / scale };\n    this.groupAbsolutePositionSnapshot = this.utils.getAbsolutePosition(\n      (this.left + this.width / 2) / scale,\n      (this.top + this.height / 2) / scale,\n      this.width / scale,\n      this.height / scale\n    );\n    this.resizePointSnapshot = {\n      absolute: [event.clientX, event.clientY],\n      relative: [(event.clientX - canvasRect.left) / scale, (event.clientY - canvasRect.top) / scale],\n    };\n    this.selected.forEach((id) => {\n      const node = this.utils.getNodeById(id, this.nodes);\n      const nodeAbsolutePosition = this.utils.getAbsolutePosition(\n        node.left + node.width / 2,\n        node.top + node.height / 2,\n        node.width,\n        node.height,\n        node.rotate\n      );\n      if (this.selected.size > 1) {\n        this.resizeMode = 'GROUP';\n        const percentPosition = this.utils.getItemPercentPositionInGroup({ ...this.groupRectSnapshot }, nodeAbsolutePosition);\n        this.nodePositionSnapshotList.set(id, percentPosition);\n      } else {\n        this.resizeMode = 'SINGLE';\n        this.nodePositionSnapshotList.set(id, nodeAbsolutePosition);\n      }\n    });\n  }\n\n  resizing(event: PointerEvent, direction: IRectDirection): void {\n    if (this.resizePointSnapshot && this.groupRectSnapshot && this.resizeMode) {\n      const [mx, my] = [event.clientX - this.resizePointSnapshot.absolute[0], event.clientY - this.resizePointSnapshot.absolute[1]];\n      switch (this.resizeMode) {\n        case 'GROUP':\n          this.resizingNodeList(direction, mx, my);\n          break;\n        case 'SINGLE':\n          this.resizingNode(direction, mx, my);\n          break;\n      }\n    }\n  }\n\n  resizeEnd(): void {\n    this.groupRectSnapshot = null;\n    this.resizePointSnapshot = null;\n    this.nodePositionSnapshotList.clear();\n  }\n\n  resizingNodeList(direction: IRectDirection, mx: number, my: number): void {\n    const { scale } = this.canvasPosition;\n    const { relative } = this.resizePointSnapshot;\n    const endPointer: [number, number] = [relative[0] + mx / scale, relative[1] + my / scale];\n    const line = getGroupDiagonalByDirection(direction, this.groupAbsolutePositionSnapshot);\n    const newPoint = getPointByEndPointer(direction, endPointer, line);\n    const newGroupRect: IDOMRect = getGroupRectByDirectionPoint(direction, this.groupAbsolutePositionSnapshot, newPoint);\n    const nodesSizeMap = new Map<string, IDOMRect>();\n    this.nodePositionSnapshotList.forEach(({ tl, bl, br, tr }, id) => {\n      nodesSizeMap.set(\n        id,\n        this.utils.getRelativePosition({\n          bl: [bl[0] * newGroupRect.width + newGroupRect.left, bl[1] * newGroupRect.height + newGroupRect.top],\n          br: [br[0] * newGroupRect.width + newGroupRect.left, br[1] * newGroupRect.height + newGroupRect.top],\n          tl: [tl[0] * newGroupRect.width + newGroupRect.left, tl[1] * newGroupRect.height + newGroupRect.top],\n          tr: [tr[0] * newGroupRect.width + newGroupRect.left, tr[1] * newGroupRect.height + newGroupRect.top],\n        })\n      );\n    });\n    this.store.dispatch(updateNodesSize(nodesSizeMap));\n  }\n\n  resizingNode(direction: IRectDirection, mx: number, my: number): void {\n    const { scale } = this.canvasPosition;\n    const { relative } = this.resizePointSnapshot;\n    const endPointer: [number, number] = [relative[0] + mx / scale, relative[1] + my / scale];\n    this.nodePositionSnapshotList.forEach((position, id) => {\n      this.store.dispatch(\n        updateNodesSize(\n          new Map<string, IDOMRect>([[id, getDOMRectByDirectionAndPosition(direction, position, endPointer)]])\n        )\n      );\n    });\n  }\n}\n\nfunction getGroupDiagonalByDirection(direction: IRectDirection, absolutePosition: IAbsolutePosition): [[number, number], [number, number]] {\n  const verticalAndHorizontalPosition = CeUtilsService.shared.getVerticalAndHorizontalPointByAbsolutePosition(absolutePosition);\n  switch (direction) {\n    case 'tl':\n    case 'br':\n      return [absolutePosition.tl, absolutePosition.br];\n    case 'tr':\n    case 'bl':\n      return [absolutePosition.tr, absolutePosition.bl];\n    case 't':\n    case 'b':\n      return [verticalAndHorizontalPosition.t, verticalAndHorizontalPosition.b];\n    case 'l':\n    case 'r':\n      return [verticalAndHorizontalPosition.l, verticalAndHorizontalPosition.r];\n  }\n}\n\nfunction getPointByEndPointer(direction: IRectDirection, endPointer: [number, number], line: [[number, number], [number, number]]): [number, number] {\n  switch (direction) {\n    case 'tl':\n    case 'tr':\n      if (endPointer[1] >= CeUtilsService.shared.getPointInLine('y', endPointer[0], line)) {\n        return [endPointer[0], CeUtilsService.shared.getPointInLine('y', endPointer[0], line)];\n      } else {\n        return [CeUtilsService.shared.getPointInLine('x', endPointer[1], line), endPointer[1]];\n      }\n    case 'bl':\n    case 'br':\n      if (endPointer[1] >= CeUtilsService.shared.getPointInLine('y', endPointer[0], line)) {\n        return [CeUtilsService.shared.getPointInLine('x', endPointer[1], line), endPointer[1]];\n      } else {\n        return [endPointer[0], CeUtilsService.shared.getPointInLine('y', endPointer[0], line)];\n      }\n  }\n}\n\nfunction getGroupRectByDirectionPoint(direction: IRectDirection, absolutePoint: IAbsolutePosition, point: [number, number]): IDOMRect {\n  switch (direction) {\n    case 'tl':\n      return { left: point[0], top: point[1], width: absolutePoint.tr[0] - point[0], height: absolutePoint.bl[1] - point[1] };\n    case 'tr':\n      return { left: absolutePoint.tl[0], top: point[1], width: point[0] - absolutePoint.tl[0], height: absolutePoint.br[1] - point[1] };\n    case 'br':\n      return { left: absolutePoint.tl[0], top: absolutePoint.tl[1], width: point[0] - absolutePoint.bl[0], height: point[1] - absolutePoint.tr[1] };\n    case 'bl':\n      return { left: point[0], top: absolutePoint.tl[1], width: absolutePoint.br[0] - point[0], height: point[1] - absolutePoint.tl[1] };\n  }\n}\n\nfunction getDOMRectByDirectionAndPosition(direction: IRectDirection, position: IAbsolutePosition, endPointer: [number, number]): IDOMRect {\n  const { bl, br, tl, tr } = position;\n  let newTLPoint: [number, number];\n  let newTRPoint: [number, number];\n  let newBLPoint: [number, number];\n  let newBRPoint: [number, number];\n  switch (direction) {\n    case 'tl':\n      newTRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(br, tr, endPointer);\n      newBLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(br, bl, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl: endPointer, tr: newTRPoint, bl: newBLPoint, br });\n    case 'tr':\n      newTLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(bl, tl, endPointer);\n      newBRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(bl, br, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl: newTLPoint, tr: endPointer, bl, br: newBRPoint });\n    case 'bl':\n      newTLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tr, tl, endPointer);\n      newBRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tr, br, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl: newTLPoint, tr, bl: endPointer, br: newBRPoint });\n    case 'br':\n      newTRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tl, tr, endPointer);\n      newBLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tl, bl, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl, tr: newTRPoint, bl: newBLPoint, br: endPointer });\n    case 't':\n      newTLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(bl, tl, endPointer);\n      newTRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(br, tr, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl: newTLPoint, tr: newTRPoint, bl, br });\n    case 'r':\n      newTRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tl, tr, endPointer);\n      newBRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(bl, br, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl, tr: newTRPoint, bl, br: newBRPoint });\n    case 'b':\n      newBLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tl, bl, endPointer);\n      newBRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tr, br, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl, tr, bl: newBLPoint, br: newBRPoint });\n    case 'l':\n      newTLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tr, tl, endPointer);\n      newBLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(br, bl, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl: newTLPoint, tr, bl: newBLPoint, br });\n  }\n}\n","import { ChangeDetectionStrategy, Component, OnInit, Optional, SkipSelf, ViewEncapsulation } from '@angular/core';\nimport { updateNodes } from '../../actions';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService } from '../../services/utils.service';\nimport { INode, IStore } from '../../store';\nimport { ResizeHandleComponent } from '../resize-handle/resize-handle.component';\n\n@Component({\n  selector: 'ce-rotate-handle',\n  templateUrl: 'rotate-handle.component.html',\n  styleUrls: ['rotate-handle.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class RotateHandleComponent implements OnInit {\n  private selected: Set<string>;\n  private nodes: INode[];\n  public rotateSnapshot: [number, number, number, number, INode] = null;\n\n  constructor(@Optional() @SkipSelf() private parent: ResizeHandleComponent, private store: EditorStore<IStore>, private utils: CeUtilsService) {}\n\n  ngOnInit(): void {\n    this.store.select((state) => state.selected).subscribe((selected) => (this.selected = selected));\n    this.store.select((state) => state.nodes).subscribe((nodes) => (this.nodes = nodes));\n  }\n\n  rotateStart(event: PointerEvent): void {\n    event.stopPropagation();\n    event.preventDefault();\n    const rect = this.parent.eleRef.nativeElement.getBoundingClientRect().toJSON();\n    this.rotateSnapshot = [\n      rect.left + rect.width / 2,\n      rect.top + rect.height / 2,\n      rect.left + rect.width / 2,\n      rect.top + rect.height / 2 - 100,\n      this.utils.getNodeById([...this.selected][0], this.nodes),\n    ];\n  }\n\n  rotating(event: PointerEvent): void {\n    if (this.rotateSnapshot) {\n      const [cx, cy, sx, sy, node] = this.rotateSnapshot;\n      const ex = event.clientX;\n      const ey = event.clientY;\n      const rotate = Math.round(this.utils.getRotate(cx, cy, sx, sy, ex, ey));\n      this.store.dispatch(updateNodes([{ ...node, rotate: rotate === 360 ? 0 : rotate }]));\n    }\n  }\n\n  rotateStop(): void {\n    this.rotateSnapshot = null;\n  }\n}\n","<div\n  class=\"rotate\"\n  ceDraggable\n  (ceOnStart)=\"rotateStart($event)\"\n  (ceOnMove)=\"rotating($event)\"\n  (ceOnStop)=\"rotateStop()\"\n  [style.cursor]=\"rotateSnapshot && 'grabbing'\"\n>\n  <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M10.536 3.464A5 5 0 1 0 11 10l1.424 1.425a7 7 0 1 1-.475-9.374L13.659.34A.2.2 0 0 1 14 .483V5.5a.5.5 0 0 1-.5.5H8.483a.2.2 0 0 1-.142-.341l2.195-2.195z\"\n      fill-rule=\"nonzero\"\n    ></path>\n  </svg>\n</div>\n","import { Directive, HostBinding } from '@angular/core';\nimport { EditorStore } from '../services';\nimport { IStore } from '../store';\n\n@Directive({\n  selector: '[ceNoZoomArea]',\n  exportAs: 'ceNoZoomArea',\n})\nexport class NoZoomAreaDirective {\n  @HostBinding('style.width.px')\n  public width: number;\n  @HostBinding('style.height.px')\n  public height: number;\n  constructor(private store: EditorStore<IStore>) {\n    this.store\n      .select((state) => ({ ...state.canvasSize, scale: state.canvasPosition.scale }))\n      .subscribe((state) => {\n        this.width = state.width * state.scale;\n        this.height = state.height * state.scale;\n      });\n  }\n}\n","import { Directive, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { InputBoolean } from 'ng-zorro-antd/core/util';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { filter, finalize, switchMap, takeUntil } from 'rxjs/operators';\n\nexport interface ISelectorRect {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\n@Directive({\n  selector: '[ceSelector]',\n  exportAs: 'ceSelector',\n})\nexport class SelectorDirective implements OnInit, OnDestroy {\n  private subscription = new Subscription();\n  private move$ = fromEvent<PointerEvent>(window, 'pointermove');\n  private up$ = fromEvent<PointerEvent>(window, 'pointerup');\n  private startPointSnapshot: number[] = null;\n  private boxRect: DOMRect;\n\n  @Input()\n  @InputBoolean()\n  public ceSelectorDisabled = false;\n  @Output()\n  public ceOnSelectorStart = new EventEmitter();\n  @Output()\n  public ceOnSelectorMoving = new EventEmitter<ISelectorRect>();\n  @Output()\n  public ceOnSelectorStop = new EventEmitter();\n  constructor(private eleRef: ElementRef<HTMLDivElement>) {}\n\n  ngOnInit(): void {\n    this.subscription.add(\n      fromEvent<PointerEvent>(this.eleRef.nativeElement, 'pointerdown')\n        .pipe(\n          filter((e) => e.button === 0),\n          filter(() => !this.ceSelectorDisabled),\n          switchMap((ev) => {\n            this.boxRect = this.eleRef.nativeElement.getBoundingClientRect();\n            this.startPointSnapshot = [ev.clientX, ev.clientY];\n            this.ceOnSelectorStart.emit();\n            return this.move$.pipe(\n              finalize(() => {\n                this.startPointSnapshot = null;\n                this.ceOnSelectorStop.emit();\n              }),\n              takeUntil(this.up$)\n            );\n          })\n        )\n        .subscribe((e) => {\n          if (this.startPointSnapshot) {\n            let x: number;\n            let y: number;\n            const [mx, my] = [e.clientX - this.startPointSnapshot[0], e.clientY - this.startPointSnapshot[1]];\n            if (mx >= 0) {\n              x = this.startPointSnapshot[0] - this.boxRect.left;\n            } else {\n              x = e.clientX - this.boxRect.left;\n            }\n            if (my >= 0) {\n              y = this.startPointSnapshot[1] - this.boxRect.top;\n            } else {\n              y = e.clientY - this.boxRect.top;\n            }\n            this.ceOnSelectorMoving.emit({ x, y, width: Math.abs(mx), height: Math.abs(my) });\n          }\n        })\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { Directive, HostBinding } from '@angular/core';\nimport { EditorStore } from '../services';\nimport { IStore } from '../store';\n\n@Directive({\n  selector: '[ceZoomArea]',\n  exportAs: 'ceZoomArea',\n})\nexport class ZoomAreaDirective {\n  @HostBinding('style.transform-origin')\n  transformOrigin = '0 0';\n  @HostBinding('style.transform')\n  public scale: string;\n  @HostBinding('style.width.px')\n  width: number;\n  @HostBinding('style.height.px')\n  height: number;\n  constructor(private store: EditorStore<IStore>) {\n    this.store\n      .select((state) => ({ ...state.canvasSize, scale: state.canvasPosition.scale }))\n      .subscribe((state) => {\n        this.scale = `perspective(1px) scale(${state.scale})`;\n        this.width = state.width;\n        this.height = state.height;\n      });\n  }\n}\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ceToolbar]',\n  exportAs: 'ceToolbar',\n})\nexport class CeToolbarDirective {\n  constructor() {}\n}\n","<ng-container *ngIf=\"ceToolbar; else elseBlock\">\n  <ng-content select=\"[ceToolbar]\"></ng-content>\n</ng-container>\n\n<ng-template #elseBlock>\n  <nz-card nzSize=\"small\" class=\"tool-bar\">\n    <div class=\"d-flex align-items-center col p-0\">\n      <span class=\"ml-2\">Canvas Title</span>\n      <div class=\"d-flex ml-auto align-items-center\">\n        <button [disabled]=\"copyStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-copy\"></i></button>\n        <button nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-paste\"></i></button>\n      </div>\n      <div class=\"d-flex ml-auto align-items-center\">\n        <button [disabled]=\"groupStatus$ | async\" (click)=\"groupNodes()\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-group\"></i></button>\n        <button [disabled]=\"!(breakStatus$ | async)\" (click)=\"breakNode()\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-break\"></i></button>\n      </div>\n      <div class=\"d-flex ml-auto align-items-center\">\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-horizontal-between\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-horizontal-align\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-vertical-between\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-vertical-align\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-left-align\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-right-align\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-top-align\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-bottom-align\"></i></button>\n      </div>\n      <div class=\"d-flex ml-auto align-items-center\">\n        <nz-tag nzMode=\"checkable\" [nzChecked]=\"store.getPanel('LAYERS')?.show\" (nzCheckedChange)=\"store.togglePanelVisible('LAYERS')\">\n          <i nz-icon nzIconfont=\"icon-tuceng\"></i>\n          <span>图层</span>\n        </nz-tag>\n        <nz-tag nzMode=\"checkable\" [nzChecked]=\"store.getPanel('WIDGET_LIST')?.show\" (nzCheckedChange)=\"store.togglePanelVisible('WIDGET_LIST')\">\n          <i nz-icon nzIconfont=\"icon-widgets\"></i>\n          <span>组件</span>\n        </nz-tag>\n        <nz-tag nzMode=\"checkable\" [nzChecked]=\"store.getPanel('PROPERTIES')?.show\" (nzCheckedChange)=\"store.togglePanelVisible('PROPERTIES')\">\n          <i nz-icon nzIconfont=\"icon-widget\"></i>\n          <span>属性</span>\n        </nz-tag>\n      </div>\n      <div class=\"d-flex ml-auto align-items-center\">\n        <button nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-run\"></i></button>\n      </div>\n    </div>\n  </nz-card>\n</ng-template>\n","import { ChangeDetectionStrategy, Component, ContentChild, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { breakNode, clearBordered, clearSelected, groupNodes } from '../../actions';\nimport { CeToolbarDirective } from '../../directives';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService } from '../../services/utils.service';\nimport { INode, IStore } from '../../store';\n\n@Component({\n  selector: 'ce-toolbar',\n  exportAs: 'ceToolbar',\n  templateUrl: 'toolbar.component.html',\n  styleUrls: ['toolbar.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ToolbarComponent {\n  @ContentChild(CeToolbarDirective)\n  ceToolbar: CeToolbarDirective;\n  public selected$: Observable<Set<string>>;\n  public scale: number;\n  public get copyStatus$(): Observable<boolean> {\n    return this.selected$.pipe(map((state) => state.size === 0));\n  }\n  public groupStatus$: Observable<boolean>;\n  public breakStatus$: Observable<boolean>;\n  private selected: Set<string>;\n  private nodes: INode[];\n\n  constructor(public store: EditorStore<IStore>, private utils: CeUtilsService) {\n    this.store\n      .selectDifferent((state) => ({ selected: state.selected, nodes: state.nodes }))\n      .subscribe(({ selected, nodes }) => {\n        this.selected = selected;\n        this.nodes = nodes;\n      });\n    this.selected$ = this.store.selectDifferent((state) => state.selected);\n    this.groupStatus$ = this.selected$.pipe(map((state) => state.size <= 1));\n    this.breakStatus$ = this.selected$.pipe(\n      map((state) => (state.size === 1 ? [...state][0] : false)),\n      map((id) => id && !!this.utils.getNodeById(id as string, this.nodes)?.children?.length)\n    );\n  }\n\n  groupNodes(): void {\n    const ids = [...this.selected];\n    this.store.dispatch(clearSelected());\n    this.store.dispatch(clearBordered());\n    this.store.dispatch(groupNodes(ids));\n  }\n\n  breakNode(): void {\n    const node = this.utils.getNodeById([...this.selected][0], this.nodes);\n    this.store.dispatch(clearSelected());\n    this.store.dispatch(clearBordered());\n    this.store.dispatch(breakNode(node.id));\n  }\n}\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\n\n@Component({\n  selector: 'ce-widget-list',\n  templateUrl: 'widget-list.component.html',\n  styleUrls: ['widget-list.component.less'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class WidgetListComponent implements OnInit {\n  constructor() {}\n\n  ngOnInit(): void {}\n}\n","<p>widget-list works!</p>\n","<ng-content select=\"[toolbar]\"></ng-content>\n<div class=\"col p-0 d-flex\">\n  <div\n    #ceDrag=\"ceDraggable\"\n    #container\n    class=\"canvas-container\"\n    ceDraggable\n    ceUseSpace\n    [class.start-drag]=\"ceDrag.spaceKeyDown\"\n    [class.dragging]=\"startPoints\"\n    (ceOnStart)=\"dragStart($event)\"\n    (ceOnMove)=\"dragging($event)\"\n    (ceOnStop)=\"dragEnd()\"\n    ceSelector\n    [ceSelectorDisabled]=\"ceDrag.spaceKeyDown\"\n    (ceOnSelectorStart)=\"selectorStart()\"\n    (ceOnSelectorMoving)=\"selectorMoving($event)\"\n    (ceOnSelectorStop)=\"selectorEnd()\"\n  >\n    <div class=\"canvas-content\" [style.transform]=\"matrix\">\n      <div ceNoZoomArea>\n        <ce-canvas-background></ce-canvas-background>\n        <ce-canvas-grid></ce-canvas-grid>\n      </div>\n      <div ceZoomArea>\n        <ce-canvas></ce-canvas>\n      </div>\n      <div ceNoZoomArea>\n        <ce-bordered-area></ce-bordered-area>\n        <ce-resize-handle></ce-resize-handle>\n        <div\n          cx\n          [class.active]=\"(refLineState$ | async)?.cx?.state\"\n          [style.top.px]=\"(refLineState$ | async)?.cx?.position * canvasPosition.scale\"\n          class=\"ref-line y\"\n        ></div>\n        <div\n          cy\n          [class.active]=\"(refLineState$ | async)?.cy?.state\"\n          [style.left.px]=\"(refLineState$ | async)?.cy?.position * canvasPosition.scale\"\n          class=\"ref-line x\"\n        ></div>\n        <div\n          tx\n          [class.active]=\"(refLineState$ | async)?.tx?.state\"\n          [style.top.px]=\"(refLineState$ | async)?.tx?.position * canvasPosition.scale\"\n          class=\"ref-line y\"\n        ></div>\n        <div\n          bx\n          [class.active]=\"(refLineState$ | async)?.bx?.state\"\n          [style.top.px]=\"(refLineState$ | async)?.bx?.position * canvasPosition.scale\"\n          class=\"ref-line y\"\n        ></div>\n        <div\n          ly\n          [class.active]=\"(refLineState$ | async)?.ly?.state\"\n          [style.left.px]=\"(refLineState$ | async)?.ly?.position * canvasPosition.scale\"\n          class=\"ref-line x\"\n        ></div>\n        <div\n          ry\n          [class.active]=\"(refLineState$ | async)?.ry?.state\"\n          [style.left.px]=\"(refLineState$ | async)?.ry?.position * canvasPosition.scale\"\n          class=\"ref-line x\"\n        ></div>\n      </div>\n    </div>\n    <div\n      class=\"selector\"\n      *ngIf=\"selectorRect\"\n      [style.left.px]=\"selectorRect.x\"\n      [style.top.px]=\"selectorRect.y\"\n      [style.width.px]=\"selectorRect.width\"\n      [style.height.px]=\"selectorRect.height\"\n    ></div>\n  </div>\n</div>\n\n<ng-container *ngFor=\"let panel of store.panels$ | async; trackBy: panelsTrackByFn\">\n  <ce-panel *ngIf=\"panel.show\" [panel]=\"panel\"></ce-panel>\n</ng-container>\n","import { ChangeDetectionStrategy, Component, ElementRef, Input, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { fromEvent, Observable, Subscription } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { clearBordered, clearSelected, setBorderedNodes, setSelectedNodes, updateCanvasPosition } from './actions';\nimport { ISelectorRect } from './directives/selector.directive';\nimport { EditorStore } from './services/store.service';\nimport { ICanvasPosition, INode, IPanel, IRefLineDirection, IRefLineState, IStore } from './store';\n\n@Component({\n  selector: 'ce-editor',\n  templateUrl: 'angular-editor-lib.component.html',\n  styleUrls: ['angular-editor-lib.less'],\n  encapsulation: ViewEncapsulation.None,\n  providers: [EditorStore],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  exportAs: 'ceEditor',\n})\nexport class AngularEditorLibComponent<T = any> {\n  @Input()\n  set state(state: Partial<IStore<T>>) {\n    this.store?.setState((oldState) => ({ ...oldState, ...state }));\n  }\n  @ViewChild('container', { read: ElementRef, static: true })\n  private containerEleRef: ElementRef<HTMLDivElement>;\n  private subscription = new Subscription();\n  public canvasPosition: ICanvasPosition;\n  public startPoints: number[] = [];\n  public matrix: string;\n  public selectorRect: ISelectorRect = null;\n  public nodes: INode[];\n  public refLineState$: Observable<{ [P in IRefLineDirection]: IRefLineState }>;\n  private nodesRectSnapshot: Map<string, Partial<DOMRect>> = null;\n  private nodeIdList: string[] = null;\n  constructor(public store: EditorStore) {\n    this.store\n      .select((state) => state.canvasPosition)\n      .subscribe((canvasPosition) => {\n        this.canvasPosition = canvasPosition;\n        this.matrix = `translate3d(${this.canvasPosition.left}px,${this.canvasPosition.top}px,0)`;\n      });\n\n    this.store.select((state) => state.nodes).subscribe((nodes) => (this.nodes = nodes));\n    this.refLineState$ = this.store.selectDifferent((state) => state.refLineState);\n  }\n\n  ngAfterViewInit(): void {\n    this.listenScaleEvent();\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  panelsTrackByFn(_i: number, panel: IPanel<any>) {\n    return `${panel.key}_${panel.show.toString()}`;\n  }\n\n  dragStart(ev: PointerEvent): void {\n    this.startPoints = [ev.clientX, ev.clientY, this.canvasPosition.left, this.canvasPosition.top];\n  }\n\n  dragging(ev: PointerEvent): void {\n    if (this.startPoints) {\n      const [sx, sy, left, top] = this.startPoints;\n      const [mx, my] = [ev.clientX - sx, ev.clientY - sy];\n      this.store.dispatch(updateCanvasPosition({ left: left + mx, top: top + my }));\n    }\n  }\n\n  dragEnd(): void {\n    this.startPoints = null;\n  }\n\n  listenScaleEvent(): void {\n    const scaleEle = this.containerEleRef.nativeElement;\n    this.subscription.add(\n      fromEvent<WheelEvent & { wheelDelta: number }>(scaleEle, 'wheel')\n        .pipe(filter((e) => e.ctrlKey))\n        .subscribe((e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          const containerBox = scaleEle.getBoundingClientRect();\n          const wheelDelta = (e.wheelDelta / 120 || -e.deltaY / 3) * 0.05;\n          const [x, y] = [e.clientX - containerBox.left, e.clientY - containerBox.top];\n          if (this.canvasPosition.scale + wheelDelta >= 0.2) {\n            this.store.dispatch(\n              updateCanvasPosition({\n                scale: this.canvasPosition.scale + wheelDelta,\n                left: (this.canvasPosition.left - x) * (wheelDelta / this.canvasPosition.scale) + this.canvasPosition.left,\n                top: (this.canvasPosition.top - y) * (wheelDelta / this.canvasPosition.scale) + this.canvasPosition.top,\n              })\n            );\n          }\n        })\n    );\n  }\n\n  selectorStart(): void {\n    this.clearSelectAndBorder();\n    const boxRect = this.containerEleRef.nativeElement.getBoundingClientRect();\n    this.nodesRectSnapshot = new Map<string, Partial<DOMRect>>();\n    this.nodes\n      .filter((node) => !node.locked)\n      .forEach((node) => {\n        const rect = document.querySelector(`#box-item-${node.id}`)?.getBoundingClientRect();\n        if (rect) {\n          const { width, height, left, top } = rect;\n          this.nodesRectSnapshot.set(node.id, { width, height, left: left - boxRect.left, top: top - boxRect.top });\n        }\n      });\n  }\n\n  selectorMoving(rect: ISelectorRect): void {\n    this.selectorRect = rect;\n    this.nodeIdList = [];\n    this.nodesRectSnapshot.forEach((item, id) => {\n      if (isInBound(item, this.selectorRect)) {\n        this.nodeIdList.push(id);\n      }\n    });\n    this.store.dispatch(setBorderedNodes<T>(this.nodeIdList));\n    this.store.dispatch(setSelectedNodes(this.nodeIdList));\n  }\n\n  selectorEnd(): void {\n    this.nodeIdList = [];\n    this.selectorRect = null;\n    this.nodesRectSnapshot = null;\n  }\n\n  private clearSelectAndBorder(): void {\n    this.store.dispatch(clearBordered<T>());\n    this.store.dispatch(clearSelected<T>());\n  }\n}\n\nfunction isInBound(rect: Partial<DOMRect>, bound: ISelectorRect): boolean {\n  return (\n    rect.left >= bound.x && rect.top >= bound.y && rect.left + rect.width <= bound.x + bound.width && rect.top + rect.height <= bound.y + bound.height\n  );\n}\n","import { DragDropModule } from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { Injector, NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { IconDefinition } from '@ant-design/icons-angular';\nimport * as AllIcons from '@ant-design/icons-angular/icons';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzCardModule } from 'ng-zorro-antd/card';\nimport { NzCollapseModule } from 'ng-zorro-antd/collapse';\nimport { NzDividerModule } from 'ng-zorro-antd/divider';\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzIconModule, NzIconService } from 'ng-zorro-antd/icon';\nimport { NzInputModule } from 'ng-zorro-antd/input';\nimport { NzInputNumberModule } from 'ng-zorro-antd/input-number';\nimport { NzPipesModule } from 'ng-zorro-antd/pipes';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { NzSwitchModule } from 'ng-zorro-antd/switch';\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\nimport { NzTagModule } from 'ng-zorro-antd/tag';\nimport { NzToolTipModule } from 'ng-zorro-antd/tooltip';\nimport { NzTreeModule } from 'ng-zorro-antd/tree';\nimport { AngularEditorLibComponent } from './angular-editor-lib.component';\nimport { BorderedAreaComponent } from './components/bordered-area/bordered-area.component';\nimport { BoxItemComponent } from './components/box-item/box-item.component';\nimport { CanvasBackgroundComponent } from './components/canvas-background/canvas-background.component';\nimport { CanvasGridComponent } from './components/canvas-grid/canvas-grid.component';\nimport { CanvasComponent } from './components/canvas/canvas.component';\nimport { LayerTreeComponent } from './components/layer-tree/layer-tree.component';\nimport { PanelComponent } from './components/panel/panel.component';\nimport { CanvasFormsComponent } from './components/property-form/forms/canvas-forms/canvas-forms.component';\nimport { WidgetFormComponent } from './components/property-form/forms/widget-form/widget-form.component';\nimport { PropertyFormComponent } from './components/property-form/property-form.component';\nimport { ResizeHandleComponent } from './components/resize-handle/resize-handle.component';\nimport { RotateHandleComponent } from './components/rotate-handle/rotate-handle.component';\nimport { ToolbarComponent } from './components/toolbar/toolbar.component';\nimport { WidgetListComponent } from './components/widget-list/widget-list.component';\nimport { CeToolbarDirective } from './directives';\nimport { DraggableDirective } from './directives/draggable.directive';\nimport { NoZoomAreaDirective } from './directives/no-zoom-area.directive';\nimport { SelectorDirective } from './directives/selector.directive';\nimport { ZoomAreaDirective } from './directives/zoom-area.directive';\n\nconst antDesignIcons = AllIcons as {\n  [key: string]: IconDefinition;\n};\nconst ICONS: IconDefinition[] = Object.keys(antDesignIcons).map((key) => antDesignIcons[key]);\n\nconst ANTD_MODULES = [\n  NzCardModule,\n  NzIconModule.forRoot(ICONS),\n  NzButtonModule,\n  NzInputNumberModule,\n  NzTabsModule,\n  NzTreeModule,\n  NzDropDownModule,\n  NzPipesModule,\n  NzToolTipModule,\n  NzFormModule,\n  NzInputModule,\n  NzTagModule,\n  NzDividerModule,\n  NzCollapseModule,\n  NzSwitchModule,\n  NzSelectModule,\n];\n\nconst CDK_MODULES = [DragDropModule];\n\nconst FORMS_COMPONENT = [CanvasFormsComponent, WidgetFormComponent];\n\nconst COMPONENTS = [\n  ToolbarComponent,\n  LayerTreeComponent,\n  WidgetListComponent,\n  CanvasComponent,\n  CanvasGridComponent,\n  CanvasBackgroundComponent,\n  BoxItemComponent,\n  ResizeHandleComponent,\n  RotateHandleComponent,\n  BorderedAreaComponent,\n  AngularEditorLibComponent,\n  PanelComponent,\n  PropertyFormComponent,\n];\n\nconst DIRECTIVES = [NoZoomAreaDirective, ZoomAreaDirective, DraggableDirective, SelectorDirective, CeToolbarDirective];\n\n@NgModule({\n  imports: [CommonModule, BrowserAnimationsModule, HttpClientModule, FormsModule, ReactiveFormsModule, ...ANTD_MODULES, ...CDK_MODULES],\n  declarations: [...COMPONENTS, ...DIRECTIVES, ...FORMS_COMPONENT],\n  exports: [...COMPONENTS, ...DIRECTIVES],\n})\nexport class AngularEditorLibModule {\n  constructor(private injector: Injector) {\n    this.injector.get(NzIconService).fetchFromIconfont({ scriptUrl: 'https://at.alicdn.com/t/font_1310204_lmnttxhl5lk.js' });\n  }\n}\n","/*\n * Public API Surface of angular-editor-lib\n */\n\nexport * from './lib/components';\nexport * from './lib/directives';\nexport * from './lib/services';\nexport * from './lib/angular-editor-lib.component';\nexport * from './lib/angular-editor-lib.module';\nexport * from './lib/store';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["TemplateRef","_.chain","Injectable","BehaviorSubject","startWith","pairwise","filter","map","ComponentStore","i0.ɵɵelement","i0.ɵɵstyleProp","i0.ɵɵtemplate","i0.ɵɵproperty","Component","ViewEncapsulation","ChangeDetectionStrategy","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","i0.ɵɵadvance","Input","i0.ɵɵelementStart","i0.ɵɵelementEnd","i0.ɵɵnamespaceSVG","i0.ɵɵattribute","_.cloneDeep","EventEmitter","Subscription","fromEvent","switchMap","takeUntil","finalize","InputBoolean","Directive","Output","i0.ɵɵlistener","i0.ɵɵtext","i0.ɵɵclassProp","i0.ɵɵtextInterpolate","NzTreeComponent","ViewChild","i0.ɵɵelementContainer","Validators","HostBinding","Optional","SkipSelf","i0.ɵɵprojection","ContentChild","ElementRef","AllIcons","NzCardModule","NzIconModule","NzButtonModule","NzInputNumberModule","NzTabsModule","NzTreeModule","NzDropDownModule","NzPipesModule","NzToolTipModule","NzFormModule","NzInputModule","NzTagModule","NzDividerModule","NzCollapseModule","NzSwitchModule","NzSelectModule","DragDropModule","NzIconService","CommonModule","BrowserAnimationsModule","HttpClientModule","FormsModule","ReactiveFormsModule","NgModule"],"mappings":"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"}