{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../projects/angular-editor-lib/src/lib/services/utils.service.ts","../../projects/angular-editor-lib/src/lib/store.ts","../projects/angular-editor-lib/src/lib/services/store.service.ts","../esm2015/projects/angular-editor-lib/src/lib/components/bordered-area/bordered-area.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/bordered-area/bordered-area.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/box-item/box-item.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/box-item/box-item.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/canvas-background/canvas-background.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/canvas-background/canvas-background.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/canvas-grid/canvas-grid.component.ts","../projects/angular-editor-lib/src/lib/actions/border-and-selected.actions.ts","../projects/angular-editor-lib/src/lib/actions/canvas.actions.ts","../projects/angular-editor-lib/src/lib/actions/nodes.actions.ts","../projects/angular-editor-lib/src/lib/actions/refline.actions.ts","../esm2015/projects/angular-editor-lib/src/lib/components/canvas-grid/canvas-grid.component.html","../projects/angular-editor-lib/src/lib/directives/draggable.directive.ts","../esm2015/projects/angular-editor-lib/src/lib/components/canvas/canvas.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/canvas/canvas.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/layer-tree/layer-tree.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/layer-tree/layer-tree.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/panel/panel.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/panel/panel.component.ts","../esm2015/lib/components/projects/angular-editor-lib/src/lib/components/property-form/forms/canvas-forms/canvas-forms.component.html","../esm2015/lib/components/projects/angular-editor-lib/src/lib/components/property-form/forms/canvas-forms/canvas-forms.component.ts","../esm2015/lib/components/projects/angular-editor-lib/src/lib/components/property-form/forms/widget-form/widget-form.component.html","../esm2015/lib/components/projects/angular-editor-lib/src/lib/components/property-form/forms/widget-form/widget-form.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/property-form/property-form.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/property-form/property-form.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/resize-handle/resize-handle.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/resize-handle/resize-handle.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/rotate-handle/rotate-handle.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/rotate-handle/rotate-handle.component.html","../projects/angular-editor-lib/src/lib/directives/no-zoom-area.directive.ts","../projects/angular-editor-lib/src/lib/directives/selector.directive.ts","../projects/angular-editor-lib/src/lib/directives/zoom-area.directive.ts","../projects/angular-editor-lib/src/lib/directives/ce-toolbar.directive.ts","../esm2015/projects/angular-editor-lib/src/lib/components/toolbar/toolbar.component.html","../esm2015/projects/angular-editor-lib/src/lib/components/toolbar/toolbar.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/widget-list/widget-list.component.ts","../esm2015/projects/angular-editor-lib/src/lib/components/widget-list/widget-list.component.html","../../projects/angular-editor-lib/src/lib/angular-editor-lib.component.html","../../projects/angular-editor-lib/src/lib/angular-editor-lib.component.ts","../../projects/angular-editor-lib/src/lib/ng-zorro.module.ts","../../projects/angular-editor-lib/src/lib/angular-editor-lib.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","create","__read","o","n","m","Symbol","iterator","e","ar","next","done","push","value","error","__spread","concat","SPECIAL_ROTATE","Set","genNodeId","Date","now","Math","round","random","CeUtilsService","shared","this","isTemplateType","content","TemplateRef","isDeepEqual","v1","v2","_this","isArray","flag_1","forEach","v","flag_2","keys","v1k","getNodeById","id","nodes","node","flag","stack","item","pop","children","apply","map","assign","parentNode","getNodeAndParentListById","rootIdSet","path","shift","has","unshift","getSameLayerParentByChildren","childrenIds","parents","prevParent","parent","getPointInLine","direction","line","_b","_c","x1","y1","_d","x2","y2","getAbsolutePosition","cx","cy","width","height","rotate","getAbsolutePositionSpecial","sqrt","pow","patchRad1","atan","patchRad2","currentRad","PI","tl","cos","sin","tr","bl","br","getVerticalAndHorizontalPointByAbsolutePosition","position","t","max","min","l","getBoundingBox","left","top","getAxisListByPosition","bottom","right","axis","positions","reduce","arr","getOuterBoundingBox","sortNodeListByIndex","list","_.chain","sortBy","zIndex","getVerticalLineCrossPoint","PA","PB","PD","PAx","PAy","PBx","PBy","PDx","PDy","L1k","L2k","a","x","getRelativePosition","a1","b1","c1","a2","b2","c2","getItemPercentPositionInGroup","group","getRotate","sx","sy","ex","ey","acos","getPointByVectorSum","ab","ac","getDistanceBeforeToPoint","point1","point2","getChildPositionBaseOnParentCoordinateSystem","parentRect","parentRotate","childRect","parentCenter","originalCenter","newCenterX","newCenterY","getChildPositionBaseOnMultipleParentCoordinataSystem","child","rect","getChildrenBoundingBoxBaseOnParentCoordinateSystem","outerBox","domRect","getResizeBoundingBox","selected","slice","sum","_a","factory","ɵfac","providedIn","DEFAULT_STORE","bordered","canvasBackground","backgroundColor","canvasPosition","scale","canvasSize","refLineState","tx","state","bx","ly","ry","EditorStore","utils","_super","_defaultPanels","title","LayerTreeComponent","show","y","WidgetListComponent","PropertyFormComponent","window","innerWidth","panels","panels$","BehaviorSubject","__","constructor","__extends","initialize","setState","_get","get","dispatch","action","selectDifferent","cb","select","pipe","startWith","pairwise","filter","prev","present","toJSON","JSON","stringify","addPanels","getPanel","find","panel","updatePanelPosition","togglePanelVisible","togglePanelCollapsed","collapsed","ComponentStore","i0.ɵɵelement","i0.ɵɵstyleProp","node_r1","ctx_r0","i0","ɵɵinject","BorderedAreaComponent","store","borderedNodeMap","Map","ngOnInit","borderedNodeList$","size","refreshBorderedList","trackByFn","args","_i","i0.ɵɵproperty","i0.ɵɵelementContainerStart","i0.ɵɵtemplate","i0.ɵɵelementContainerEnd","i0.ɵɵadvance","ɵɵdirectiveInject","selectors","decls","vars","consts","template","rf","ctx","BoxItemComponent","renderer","eleRef","_node","val","generatorStyles","ngAfterViewInit","nativeElement","setAttribute","setStyle","borderStyle","borderColor","borderWidth","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize","Renderer2","ElementRef","inputs","styles","encapsulation","changeDetection","backgroundColor$","backgroundImage$","CanvasBackgroundComponent","i0.ɵɵelementStart","i0.ɵɵelementEnd","CanvasGridComponent","scale$","childDPath$","getPath","parentDPath$","childWidth$","parentWidth$","clearSelected","setSelectedNodes","ids","clearBordered","addBorderedNodes","removeBorderedNodes","includes","setBorderedNodes","updateCanvasPosition","updateNodes","updateNodesSize","nodesSizeMap","inSameLayer","newNode","recursiveUpdateNodeChildrenSize","groupNodes","nodeMap","set","groupRect","groupNode","name","breakNode","_.cloneDeep","newNodes","parent_1","nextParent","oldParentRect","newParentRect","nodeAbsolutePosition","newNodeRect","resetRefLineState","i0.ɵɵnamespaceSVG","i0.ɵɵattribute","ɵɵpipeBind1","DraggableDirective","cdr","ceDragDisabled","ceUseSpace","ceOnStart","EventEmitter","ceOnMove","ceOnStop","ceOnSpaceKeyDown","spaceKeyDown","subscription","Subscription","mouseMove$","fromEvent","mouseUp$","keyDown$","document","keyUp$","mouseDown$","button","mouseEnter$","mouseLeave$","listenSpaceKeyEvent","switchMap","startEv","emit","takeUntil","stopEv","subscribe","moveEv","ngOnDestroy","unsubscribe","add","detectChanges","preventDefault","stopPropagation","finalize","i0.ɵɵlistener","$event","ɵɵrestoreView","_r3_1","ɵɵnextContext","moving","moveEnd","$implicit","showBorder","removeBorder","ChangeDetectorRef","outputs","exportAs","InputBoolean","REF_LINE_DIRECTION_COMPARE_MAP","baseKey","referKey","baseValue","baseRect","referRect","CanvasComponent","pointerSnapshot","nodesSnapshot","gap","nodes$","nodeListTrackByFn","moveStart","ev","clear","clientX","clientY","outerBoxSnapshot","unselectedNodes","cxPercent","cyPercent","scale_1","mx","my","baseRect_1","refLinesState_1","nodeRect","result","abs","base","getRefLineStateByDirection","newNodes_1","properties","s","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__rest","i0.ɵɵtext","_r25_1","node_r9","origin","showBordered","i0.ɵɵclassProp","i0.ɵɵtextInterpolate","contextMenuSrv","treeNodes$","transferNodesToNzNodes","selectedKeys$","groupStatus$","layerTree","getSelectedNodeList","layerTrackByFn","index","isLeaf","contextMenu","event","menu","getParentKey","multipleSelected","parentKey","selectedKeys","clickNode","test","navigator","platform","ctrlKey","metaKey","deleteNodes","undefined","prevParent_1","prevParentId_1","originalParentId","removeNodes","toggleNodesLockState","locked","lockNodes","unlockNodes","i0.ɵɵelementContainer","i3$2","NzContextMenuService","viewQuery","NzTreeComponent","_r3","_r1","PanelComponent","_panel","updatePosition","distance","toggleCollapsed","close","_r4","CanvasFormsComponent","fb","canvasSizeFormGroup","Validators","required","canvasPositionFormGroup","canvasBackgroundFormGroup","patchValue","emitEvent","toFixed","valueChanges","console","log","i1","FormBuilder","WidgetFormComponent","cfr","boundingFormGroup","borderRadius","values","ComponentFactoryResolver","ɵɵpureFunction1","_c2","ɵɵpureFunction0","_c1","_c3","_c4","_c5","formComponent$","_r10_1","resizing","resizeEnd","_r14_1","_r18_1","_r22_1","ResizeHandleComponent","display","nodePositionSnapshotList","selectedSize$","refreshResizeHandle","resizeStart","canvasRect","querySelector","getBoundingClientRect","groupRectSnapshot","groupAbsolutePositionSnapshot","resizePointSnapshot","absolute","relative","resizeMode","percentPosition","resizingNodeList","resizingNode","newPoint","endPointer","getPointByEndPointer","absolutePosition","verticalAndHorizontalPosition","getGroupDiagonalByDirection","newGroupRect","absolutePoint","point","getGroupRectByDirectionPoint","getDOMRectByDirectionAndPosition","newTLPoint","newTRPoint","newBLPoint","newBRPoint","hostVars","hostBindings","RotateHandleComponent","rotateSnapshot","rotateStart","rotating","rotateStop","NoZoomAreaDirective","SelectorDirective","move$","up$","startPointSnapshot","ceSelectorDisabled","ceOnSelectorStart","ceOnSelectorMoving","ceOnSelectorStop","boxRect","transformOrigin","ZoomAreaDirective","i0.ɵɵprojection","CeToolbarDirective","ToolbarComponent","selected$","breakStatus$","contentQueries","dirIndex","ctx_r2","selectorRect","AngularEditorLibComponent","startPoints","nodesRectSnapshot","nodeIdList","matrix","refLineState$","oldState","listenScaleEvent","panelsTrackByFn","toString","dragStart","dragging","dragEnd","scaleEle","containerEleRef","containerBox","wheelDelta","deltaY","selectorStart","clearSelectAndBorder","selectorMoving","bound","isInBound","selectorEnd","ngContentSelectors","antDesignIcons","AllIcons","ICONS","NG_ZORRO_MODULES","NzButtonModule","NzCardModule","NzCollapseModule","NzDividerModule","NzDropDownModule","NzFormModule","NzIconModule","NzInputModule","NzInputNumberModule","NzPipesModule","NzSelectModule","NzSwitchModule","NzTabsModule","NzTagModule","NzToolTipModule","NzTreeModule","NgZorroModule","injector","NzIconService","fetchFromIconfont","scriptUrl","Injector","imports","forRoot","i7","exports","CDK_MODULES","DragDropModule","AngularEditorLibModule","CommonModule","BrowserAnimationsModule","HttpClientModule","FormsModule","ReactiveFormsModule","declarations","i3","NgIf","AsyncPipe"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { Injectable, TemplateRef } from '@angular/core';\nimport * as _ from 'lodash';\nimport { INode } from '../store';\n\nexport type IPosition = [number, number];\nexport interface IAbsolutePosition {\n  tl: IPosition;\n  tr: IPosition;\n  bl: IPosition;\n  br: IPosition;\n}\n\nexport interface IVerticalAndHorizontalPosition {\n  t: IPosition;\n  r: IPosition;\n  b: IPosition;\n  l: IPosition;\n}\n\nexport interface IDOMRect {\n  width: number;\n  height: number;\n  left: number;\n  top: number;\n  cx?: number;\n  cy?: number;\n  bottom?: number;\n  right?: number;\n}\n\nexport type IRectDirection = 'tl' | 't' | 'tr' | 'r' | 'br' | 'b' | 'bl' | 'l';\n\nconst SPECIAL_ROTATE = new Set([0, 90, 180, 270, 360]);\n\nexport function genNodeId(): string {\n  return `${Date.now()}${Math.round(Math.random() * 1000000000000)}`;\n}\n\n@Injectable({ providedIn: 'root' })\nexport class CeUtilsService {\n  public static shared: CeUtilsService;\n\n  constructor() {\n    CeUtilsService.shared = this;\n  }\n\n  public isTemplateType(content: any) {\n    return content instanceof TemplateRef;\n  }\n\n  public isDeepEqual(v1: any, v2: any) {\n    if (typeof v1 !== typeof v2) {\n      return false;\n    } else {\n      switch (typeof v1) {\n        case 'number':\n        case 'string':\n        case 'bigint':\n        case 'boolean':\n        case 'symbol':\n        case 'undefined':\n        case 'function':\n          return v1 === v2;\n        case 'object':\n          if (v1 === null || v2 === null) {\n            return v1 === v2;\n          } else if (Array.isArray(v1)) {\n            if (v1.length !== v2.length) {\n              return false;\n            }\n            let flag = true;\n            v1.forEach((v, i) => {\n              if (flag) {\n                flag = this.isDeepEqual(v, v2[i]);\n              }\n            });\n            return flag;\n          } else if (v1 instanceof Set && v2 instanceof Set) {\n            return this.isDeepEqual([...v1], [...v2]);\n          } else {\n            let flag = true;\n            Object.keys(v1).forEach((v1k) => {\n              if (flag) {\n                if (v2.hasOwnProperty(v1k)) {\n                  flag = this.isDeepEqual(v1[v1k], v2[v1k]);\n                } else {\n                  flag = false;\n                }\n              }\n            });\n            return flag;\n          }\n      }\n    }\n  }\n\n  /**\n   * 通过节点ID在树中查找节点\n   * @param id 节点ID\n   * @param nodes 节点树\n   */\n  public getNodeById<T = any>(id: string, nodes: INode<T>[]): INode<T> {\n    let flag = false;\n    let node: INode<T>;\n    const stack = [...nodes];\n    while (!flag && stack.length) {\n      const item = stack.pop();\n      if (item.id === id) {\n        flag = true;\n        node = item;\n      } else {\n        if (item.children && item.children.length) {\n          stack.push(...item.children.map((i) => ({ ...i, parentNode: item })));\n        }\n      }\n    }\n    return node;\n  }\n\n  /**\n   * 通过节点ID查找节点及节点所有父级\n   * @param id 节点ID\n   * @param nodes 节点树\n   */\n  public getNodeAndParentListById<T = any>(id: string | undefined, nodes: INode<T>[]): INode[] {\n    if (!id) {\n      return [];\n    }\n    const rootIdSet = new Set(nodes.map((node) => node.id));\n    let flag = false;\n    let path: INode[] = [];\n    const stack = [...nodes];\n    while (!flag && stack.length) {\n      const node = stack.shift();\n      if (rootIdSet.has(node.id)) {\n        path = [];\n      }\n      if (node.id === id) {\n        flag = true;\n        path.unshift(node);\n      } else {\n        if (node.children && node.children.length) {\n          path.unshift(node);\n          stack.unshift(...node.children);\n        }\n      }\n    }\n    return path;\n  }\n\n  /**\n   * 通过子节点id集合和节点树，获取子节点的父节点，若子节点不在同一级则返回undefined\n   * @param childrenIds 子节点ID列表\n   * @param nodes 节点集合\n   */\n  public getSameLayerParentByChildren(childrenIds: string[], nodes: INode[]): INode | false {\n    let flag = true;\n    const parents = childrenIds.map((id) => this.getNodeAndParentListById(id, nodes)[1]);\n    let prevParent = parents.pop();\n    while (flag && parents.length) {\n      const parent = parents.pop();\n      if (prevParent?.id === parent?.id) {\n        prevParent = parent;\n      } else {\n        flag = false;\n      }\n    }\n    return flag && prevParent;\n  }\n\n  /**\n   * 通过直线的两点方程获取直线上人一点点的坐标\n   * y = (x-x1)*(y2-y1)/(x2-x1)+y1\n   * x = (y-y1)*(x2-x1)/(y2-y1)+x1\n   * @param direction 要获取点的坐标轴\n   * @param n 要获取点的已知轴的坐标\n   * @param line 确定一条直线的两点的坐标\n   */\n  public getPointInLine(direction: 'x' | 'y', n: number, line: [[number, number], [number, number]]): number {\n    const [[x1, y1], [x2, y2]] = line;\n    switch (direction) {\n      case 'x':\n        return ((n - y1) * (x2 - x1)) / (y2 - y1) + x1;\n      case 'y':\n        return ((n - x1) * (y2 - y1)) / (x2 - x1) + y1;\n    }\n  }\n\n  /**\n   * 通过元素在所在坐标系的中心点、宽、高以及旋转角度获取元素在所在坐标系的四个顶点的坐标\n   * @param cx 中心点x轴坐标\n   * @param cy 中心点y轴坐标\n   * @param width 宽\n   * @param height 高\n   * @param rotate 旋转角度\n   */\n  public getAbsolutePosition(cx: number, cy: number, width: number, height: number, rotate = 0): IAbsolutePosition {\n    if (SPECIAL_ROTATE.has(rotate)) {\n      return this.getAbsolutePositionSpecial(cx, cy, width, height, rotate);\n    } else {\n      const r = Math.sqrt((width / 2) ** 2 + (height / 2) ** 2);\n      const patchRad1 = Math.atan(height / 2 / (width / 2));\n      const patchRad2 = Math.atan(width / 2 / (height / 2));\n      const currentRad = (rotate * Math.PI) / 180;\n\n      return {\n        tl: [cx - Math.cos(currentRad + patchRad1) * r, cy - Math.sin(currentRad + patchRad1) * r],\n        tr: [cx - Math.cos(currentRad + patchRad1 + patchRad2 * 2) * r, cy - Math.sin(currentRad + patchRad1 + patchRad2 * 2) * r],\n        bl: [cx - Math.cos(currentRad - patchRad1) * r, cy - Math.sin(currentRad - patchRad1) * r],\n        br: [cx - Math.cos(currentRad - patchRad1 - patchRad2 * 2) * r, cy - Math.sin(currentRad - patchRad1 - patchRad2 * 2) * r],\n      };\n    }\n  }\n\n  /**\n   * 获取特殊旋转角度下元素的四个顶点在所在坐标系的坐标\n   * @param cx 元素的中心点x轴坐标\n   * @param cy 元素的中心点y轴坐标\n   * @param width 宽\n   * @param height 高\n   * @param rotate 旋转角度\n   */\n  public getAbsolutePositionSpecial(cx: number, cy: number, width: number, height: number, rotate: number): IAbsolutePosition | undefined {\n    if (SPECIAL_ROTATE.has(rotate)) {\n      switch (rotate) {\n        case 0:\n        case 360:\n          return {\n            tl: [cx - width / 2, cy - height / 2],\n            tr: [cx + width / 2, cy - height / 2],\n            bl: [cx - width / 2, cy + height / 2],\n            br: [cx + width / 2, cy + height / 2],\n          };\n        case 90:\n          return {\n            tl: [cx + height / 2, cy - width / 2],\n            tr: [cx + height / 2, cy + width / 2],\n            bl: [cx - height / 2, cy - width / 2],\n            br: [cx - height / 2, cy + width / 2],\n          };\n        case 180:\n          return {\n            tl: [cx + width / 2, cy + height / 2],\n            tr: [cx - width / 2, cy + height / 2],\n            bl: [cx + width / 2, cy - height / 2],\n            br: [cx - width / 2, cy - height / 2],\n          };\n        case 270:\n          return {\n            tl: [cx - height / 2, cy + width / 2],\n            tr: [cx - height / 2, cy - width / 2],\n            bl: [cx + height / 2, cy + width / 2],\n            br: [cx + height / 2, cy - width / 2],\n          };\n      }\n    }\n  }\n\n  /**\n   * 通过元素顶点坐标获取上、右、下和左方向的坐标\n   * @param position\n   */\n  public getVerticalAndHorizontalPointByAbsolutePosition(position: IAbsolutePosition): IVerticalAndHorizontalPosition {\n    const { tl, bl, br, tr } = position;\n    return {\n      t: [(Math.max(tl[0], tr[0]) - Math.min(tl[0], tr[0])) / 2, (Math.max(tl[1], tr[1]) - Math.min(tl[1], tr[1])) / 2],\n      r: [(Math.max(br[0], tr[0]) - Math.min(br[0], tr[0])) / 2, (Math.max(br[1], tr[1]) - Math.min(br[1], tr[1])) / 2],\n      b: [(Math.max(bl[0], br[0]) - Math.min(bl[0], br[0])) / 2, (Math.max(bl[1], br[1]) - Math.min(bl[1], br[1])) / 2],\n      l: [(Math.max(tl[0], bl[0]) - Math.min(tl[0], bl[0])) / 2, (Math.max(tl[1], bl[1]) - Math.min(tl[1], bl[1])) / 2],\n    };\n  }\n\n  /**\n   * 通过HTML元素的宽、高、旋转角度以及所在坐标系的x、y点获取元素在所在坐标系的包围盒\n   * @param width 宽\n   * @param height 高\n   * @param left 在所在坐标系中x轴的坐标\n   * @param top 在所在坐标系中y轴的坐标\n   * @param rotate 旋转角度\n   */\n  public getBoundingBox(width: number, height: number, left: number, top: number, rotate = 0): IDOMRect {\n    const position = this.getAbsolutePosition(left + width / 2, top + height / 2, width, height, rotate);\n    const l = Math.min(...this.getAxisListByPosition('x', [position]));\n    const r = Math.max(...this.getAxisListByPosition('x', [position]));\n    const t = Math.min(...this.getAxisListByPosition('y', [position]));\n    const b = Math.max(...this.getAxisListByPosition('y', [position]));\n    return { left: l, top: t, width: r - l, height: b - t, bottom: b, right: r, cx: l + (r - l) / 2, cy: t + (b - t) / 2 };\n  }\n\n  /**\n   * 通过盒子的绝对坐标列表获取对应坐标的值的集合\n   * @param axis 要获取的坐标轴\n   * @param positions 绝对坐标列表\n   */\n  public getAxisListByPosition(axis: 'x' | 'y', positions: IAbsolutePosition[]): number[] {\n    switch (axis) {\n      case 'x':\n        return positions.reduce((arr, position) => [...arr, position.bl[0], position.br[0], position.tl[0], position.tr[0]], []);\n      case 'y':\n        return positions.reduce((arr, position) => [...arr, position.bl[1], position.br[1], position.tl[1], position.tr[1]], []);\n    }\n  }\n\n  /**\n   * 获取多个盒子的最小外包围盒的尺寸\n   * @param positions 盒子绝对坐标列表\n   */\n  public getOuterBoundingBox(positions: IAbsolutePosition[]): IDOMRect {\n    const l = Math.min(...this.getAxisListByPosition('x', positions));\n    const r = Math.max(...this.getAxisListByPosition('x', positions));\n    const t = Math.min(...this.getAxisListByPosition('y', positions));\n    const b = Math.max(...this.getAxisListByPosition('y', positions));\n    return { left: l, top: t, width: r - l, height: b - t, bottom: b, right: r, cx: l + (r - l) / 2, cy: t + (b - t) / 2 };\n  }\n\n  /**\n   * 依据zIndex对节点递归排序\n   * @param list 节点列表\n   */\n  public sortNodeListByIndex(list?: INode[]): INode[] {\n    return (\n      list &&\n      _.chain(list)\n        .sortBy((item) => item.zIndex)\n        .map((item) => ({ ...item, children: this.sortNodeListByIndex(item.children) }))\n        .value()\n    );\n  }\n\n  /**\n   * 通过直线的斜率方程和直线上两点A，B以及直线外一点D，求出D点上直线AB的垂线DC和直线AB的交点C的坐标\n   * @param PA 点A\n   * @param PB 点B\n   * @param PD 点D\n   */\n  public getVerticalLineCrossPoint(PA: [number, number], PB: [number, number], PD: [number, number]): [number, number] {\n    const [PAx, PAy] = PA;\n    const [PBx, PBy] = PB;\n    const [PDx, PDy] = PD;\n    if (PAx === PBx) {\n      return [PAx, PDy];\n    } else if (PAy === PBy) {\n      return [PDx, PAy];\n    } else {\n      const L1k = (PAy - PBy) / (PAx - PBx);\n      const L2k = -1 / L1k;\n      const a = PAy - L1k * PAx;\n      const b = PDy - L2k * PDx;\n      const x = (b - a) / (L1k - L2k);\n      const y = L1k * x + a;\n      return [x, y];\n    }\n  }\n\n  /**\n   * 通过元素在所在坐标系内四个顶点的坐标，使用直线的两点方程求出两两对点所在直线的交点（矩形的中心点），\n   * 使用勾股定理求出元素宽高，转换后得到元素在所在坐标系的宽、高、x轴坐标和y轴坐标\n   * width = sqrt((trx - tlx)^2 + (try - tly)^2)\n   * height = sqrt((blx - tlx)^2 + (bly - tly)^2)\n   * a1*x + b1*y + c1 = 0\n   * a2*x + b2*y + c2 = 0\n   * a1*x + b1*y + c1 = a2*x + b2*y + c2\n   * 由直线的两点式方程可得a=y0-y1, b=x1-x0, c=x0*y1 - x1*y0\n   * 解方程组可得两条直线的交点x,y\n   * @param position 元素在所在坐标系内四个顶点的坐标\n   */\n  public getRelativePosition(position: IAbsolutePosition): IDOMRect {\n    const { tl, bl, br, tr } = position;\n    const width: number = Math.sqrt((tr[0] - tl[0]) ** 2 + (tr[1] - tl[1]) ** 2);\n\n    const height: number = Math.sqrt((bl[0] - tl[0]) ** 2 + (bl[1] - tl[1]) ** 2);\n\n    const a1 = br[1] - tl[1];\n    const b1 = tl[0] - br[0];\n    const c1 = br[0] * tl[1] - tl[0] * br[1];\n    const a2 = bl[1] - tr[1];\n    const b2 = tr[0] - bl[0];\n    const c2 = bl[0] * tr[1] - tr[0] * bl[1];\n    const cx = (b1 * c2 - b2 * c1) / (a1 * b2 - a2 * b1);\n    const cy = (a2 * c1 - a1 * c2) / (a1 * b2 - a2 * b1);\n\n    return {\n      cx,\n      cy,\n      width,\n      height,\n      left: cx - width / 2,\n      top: cy - height / 2,\n      bottom: cx + width / 2,\n      right: cy + height / 2,\n    };\n  }\n\n  /**\n   * 获取元素的四个顶点在外包围盒的矩形内的坐标的百分比\n   * @param group 元素外包围盒\n   * @param item 元素的四个顶点坐标\n   */\n  public getItemPercentPositionInGroup(group: IDOMRect, item: IAbsolutePosition): IAbsolutePosition {\n    return {\n      tl: [(item.tl[0] - group.left) / group.width, (item.tl[1] - group.top) / group.height],\n      tr: [(item.tr[0] - group.left) / group.width, (item.tr[1] - group.top) / group.height],\n      bl: [(item.bl[0] - group.left) / group.width, (item.bl[1] - group.top) / group.height],\n      br: [(item.br[0] - group.left) / group.width, (item.br[1] - group.top) / group.height],\n    };\n  }\n\n  /**\n   * 通过矩形中心点坐标C(cx,cy)中心点和Y轴平行线在中心点上方的一点S(sx,sy),旋转落点E(ex,ey),利用三角形余弦定理，\n   * 求出∠SCE的角度，再通过ex和sx的大小判断旋转的角度为内角还是外角\n   * @param cx 中心点x坐标\n   * @param cy 中心点y坐标\n   * @param sx 与中心点相同的x坐标\n   * @param sy 与中心点同x坐标的上方一点的y坐标\n   * @param ex 旋转终点x坐标\n   * @param ey x旋转终点y坐标\n   */\n  public getRotate(cx: number, cy: number, sx: number, sy: number, ex: number, ey: number): number {\n    const rotate =\n      (Math.acos(\n        ((cy - sy) ** 2 + (cx - sx) ** 2 + (cx - ex) ** 2 + (cy - ey) ** 2 - ((ex - sx) ** 2 + (ey - sy) ** 2)) /\n          (2 * Math.sqrt((cy - sy) ** 2 + (cx - sx) ** 2) * Math.sqrt((cx - ex) ** 2 + (cy - ey) ** 2))\n      ) *\n        180) /\n      Math.PI;\n    if (ex === sx) {\n      return 180;\n    }\n    if (ex > sx) {\n      return rotate;\n    }\n    if (ex < sx) {\n      return 360 - rotate;\n    }\n  }\n\n  /**\n   * 通过向量四边形法则求出向量ab、向量ac的对角线ad的d点坐标, ab + ac = ad\n   * @param ab 向量ab\n   * @param ac 向量ac\n   * @param a a点坐标\n   */\n  public getPointByVectorSum(ab: [number, number], ac: [number, number], a: [number, number]): [number, number] {\n    return [ab[0] + ac[0] + a[0], ab[1] + ac[1] + a[1]];\n  }\n\n  /**\n   * 获取两点之间的线段长度\n   * @param point1 点1\n   * @param point2 点2\n   */\n  public getDistanceBeforeToPoint(point1: [number, number], point2: [number, number]): number {\n    return Math.sqrt((point1[0] - point2[0]) ** 2 + (point1[1] - point2[1]) ** 2);\n  }\n\n  /**\n   * 通过获取父节点中心点坐标和原始子节点中心点坐标，将向量（父节点中心点-子节点原始中心点）\n   * 旋转父节点旋转的角度(rotate)后得到向量（父节点中心点-子节点中心点）然后利用向量旋转的\n   * 公式直接求出子节点中心点坐标\n   * x1 = x0*cos(rotate) - y0*sin(rotate)\n   * y1 = x0*sin(rotate) - y0*cos(rotate)\n   * @param parentRect 父元素尺寸\n   * @param parentRotate 父元素旋转角度\n   * @param childRect 子元素尺寸\n   */\n  public getChildPositionBaseOnParentCoordinateSystem(parentRect: IDOMRect, parentRotate: number, childRect: IDOMRect): IDOMRect {\n    const parentCenter = [parentRect.left + parentRect.width / 2, parentRect.top + parentRect.height / 2];\n    const originalCenter = [childRect.left + childRect.width / 2 + parentRect.left, childRect.top + childRect.height / 2 + parentRect.top];\n    const [newCenterX, newCenterY] = [\n      (originalCenter[0] - parentCenter[0]) * Math.cos((parentRotate * Math.PI) / 180) -\n        (originalCenter[1] - parentCenter[1]) * Math.sin((parentRotate * Math.PI) / 180) +\n        parentCenter[0],\n      (originalCenter[1] - parentCenter[1]) * Math.cos((parentRotate * Math.PI) / 180) +\n        (originalCenter[0] - parentCenter[0]) * Math.sin((parentRotate * Math.PI) / 180) +\n        parentCenter[1],\n    ];\n    return {\n      left: newCenterX - childRect.width / 2,\n      top: newCenterY - childRect.height / 2,\n      bottom: newCenterX + childRect.width / 2,\n      right: newCenterY + childRect.height / 2,\n      width: childRect.width,\n      height: childRect.height,\n      cx: newCenterX,\n      cy: newCenterY,\n    };\n  }\n\n  /**\n   * 获取单个子节点相对于多层父节点的坐标\n   * @param child 子节点size\n   * @param parents 父节点集合（排序为从左往右依次外扩）\n   */\n  public getChildPositionBaseOnMultipleParentCoordinataSystem(child: IDOMRect, parents: INode[]): IDOMRect {\n    let rect: IDOMRect = { ...child };\n    while (parents.length) {\n      const parent = parents.shift();\n      rect = this.getChildPositionBaseOnParentCoordinateSystem(parent, parent.rotate, child);\n    }\n    return rect;\n  }\n\n  /**\n   * 获取多个子节点相对与多层父节点的坐标\n   * @param children 子节点列表\n   * @param parents 父节点列表\n   */\n  public getChildrenBoundingBoxBaseOnParentCoordinateSystem(children: INode[], parents: INode[]): IDOMRect {\n    const outerBox = this.getOuterBoundingBox(\n      children.map((child) =>\n        this.getAbsolutePosition(child.left + child.width / 2, child.top + child.height / 2, child.width, child.height, child.rotate)\n      )\n    );\n    let domRect = { ...outerBox };\n    while (parents.length) {\n      const parent = parents.shift();\n      domRect = this.getChildPositionBaseOnParentCoordinateSystem(parent, parent.rotate, domRect);\n    }\n    return domRect;\n  }\n\n  /**\n   * 获取已选中节点的缩放框的尺寸\n   * @param selected 已选中节点\n   * @param nodes 节点树\n   */\n  public getResizeBoundingBox(selected: string[], nodes: INode[]): IDOMRect & { rotate: number } {\n    let rect: IDOMRect;\n    let rotate: number;\n    if (selected.length === 1) {\n      const [node, ...parents] = this.getNodeAndParentListById(selected[0], nodes);\n      rect = { ...this.getChildPositionBaseOnMultipleParentCoordinataSystem(node, [...parents]) };\n      rotate = parents.reduce((sum, p) => sum + (p.rotate ?? 0), node.rotate ?? 0);\n    } else {\n      const parent = this.getSameLayerParentByChildren(selected, nodes);\n      if (parent !== false) {\n        const parents = this.getNodeAndParentListById(parent?.id, nodes);\n        rect = this.getChildrenBoundingBoxBaseOnParentCoordinateSystem(\n          selected.map((id) => this.getNodeById(id, nodes)),\n          [...parents]\n        );\n        rotate = parents.reduce((sum, p) => sum + (p.rotate ?? 0), 0);\n      }\n    }\n    return { ...rect, rotate };\n  }\n}\n","import { TemplateRef, Type } from '@angular/core';\n\nexport interface INode<T = any> {\n  id: string;\n  name: string;\n  locked?: boolean;\n  data?: T;\n  children?: INode[];\n  width: number;\n  height: number;\n  left: number;\n  top: number;\n  rotate: number;\n  zIndex: number;\n  borderStyle?: string;\n  borderWidth?: number;\n  borderColor?: string;\n  borderRadius?: number;\n  backgroundColor?: string;\n  backgroundImage?: string;\n  backgroundRepeat?: string;\n  backgroundPosition?: string;\n  backgroundSize?: string;\n  [key: string]: any;\n}\n\nexport interface ICanvasBackground {\n  backgroundColor?: string;\n  backgroundImage?: string;\n}\n\nexport interface ICanvasSize {\n  width: number;\n  height: number;\n}\nexport interface ICanvasPosition {\n  scale: number;\n  left: number;\n  top: number;\n}\n\nexport type IRefLineDirection = 'tx' | 'bx' | 'ly' | 'ry' | 'cx' | 'cy';\nexport interface IRefLineState {\n  state: boolean;\n  position?: number;\n}\n\nexport interface IStore<T = any> {\n  nodes: INode<T>[];\n  selected: Set<string>;\n  bordered: Set<string>;\n  canvasBackground: ICanvasBackground;\n  canvasSize: ICanvasSize;\n  canvasPosition: ICanvasPosition;\n  refLineState: {\n    [P in IRefLineDirection]: IRefLineState;\n  };\n}\n\nexport type IActionType<T = any> = (state: IStore<T>) => IStore<T>;\n\nexport const DEFAULT_STORE: IStore<any> = {\n  nodes: [],\n  selected: new Set(),\n  bordered: new Set(),\n  canvasBackground: { backgroundColor: '#ffffff' },\n  canvasPosition: {\n    left: 100,\n    top: 100,\n    scale: 1,\n  },\n  canvasSize: {\n    width: 1366,\n    height: 768,\n  },\n  refLineState: {\n    tx: { state: false },\n    bx: { state: false },\n    ly: { state: false },\n    ry: { state: false },\n    cx: { state: false },\n    cy: { state: false },\n  },\n};\n\nexport interface IWidget<T = any> {\n  type: string;\n  name: string;\n  thumbnail: string;\n  propsComponent: T;\n}\n\nexport interface ITabConfig<T = any> {\n  key: string;\n  title: string;\n  icon: string;\n  content: T;\n}\n\nexport interface IPanel<T = any> {\n  title: string;\n  key: string;\n  content: Type<T> | TemplateRef<T>;\n  show: boolean;\n  x: number;\n  y: number;\n  collapsed?: boolean;\n}\n","import { Injectable } from '@angular/core';\nimport { ComponentStore } from '@ngrx/component-store';\nimport { BehaviorSubject } from 'rxjs';\nimport { filter, map, pairwise, startWith } from 'rxjs/operators';\nimport { LayerTreeComponent, PropertyFormComponent, WidgetListComponent } from '../components';\nimport { DEFAULT_STORE, IPanel, IStore } from '../store';\nimport { CeUtilsService } from './utils.service';\n\n@Injectable()\nexport class EditorStore<T = any> extends ComponentStore<IStore<T>> {\n  private _defaultPanels: IPanel<any>[] = [\n    { key: 'LAYERS', title: '图层', content: LayerTreeComponent, show: true, x: 10, y: 60 },\n    { key: 'WIDGET_LIST', title: '组件', content: WidgetListComponent, show: false, x: 50, y: 60 },\n    { key: 'PROPERTIES', title: '属性', content: PropertyFormComponent, show: true, x: window.innerWidth - 350, y: 60 },\n  ];\n  private panels: IPanel[] = [];\n  panels$ = new BehaviorSubject<IPanel[]>([...this._defaultPanels, ...this.panels]);\n\n  constructor(private utils: CeUtilsService) {\n    super(DEFAULT_STORE);\n  }\n\n  initialize(state: IStore<T>) {\n    this.setState(state);\n  }\n\n  _get() {\n    return this.get();\n  }\n\n  dispatch(action: (state: IStore<T>) => IStore<T>) {\n    this.setState(action);\n  }\n\n  selectDifferent<R>(cb: (state: IStore<T>) => R) {\n    return this.select(cb).pipe(\n      startWith(null, cb(this.get())),\n      pairwise<R>(),\n      filter(([prev, present]) => !this.utils.isDeepEqual(prev, present)),\n      map(([, present]) => present)\n    );\n  }\n\n  toJSON() {\n    const state = this.get();\n    return JSON.stringify({\n      canvasPosition: state.canvasPosition,\n      canvasSize: state.canvasSize,\n      canvasBackground: state.canvasBackground,\n      nodes: state.nodes,\n      selected: state.selected,\n      bordered: state.bordered,\n    });\n  }\n\n  addPanels(panels: IPanel[]) {\n    this.panels = [...this.panels, ...panels];\n    this.panels$.next([...this._defaultPanels, ...this.panels]);\n  }\n\n  getPanel(key: string) {\n    return [...this._defaultPanels, ...this.panels].find((panel) => panel.key === key);\n  }\n\n  updatePanelPosition(key: string, [x, y]: [number, number]) {\n    [...this._defaultPanels, ...this.panels].forEach((panel) => {\n      if (panel.key === key) {\n        panel.x = x;\n        panel.y = y;\n      }\n    });\n    this.panels$.next([...this._defaultPanels, ...this.panels]);\n  }\n\n  togglePanelVisible(key: string) {\n    [...this._defaultPanels, ...this.panels].forEach((panel) => {\n      if (panel.key === key) {\n        panel.show = !panel.show;\n      }\n    });\n    this.panels$.next([...this._defaultPanels, ...this.panels]);\n  }\n\n  togglePanelCollapsed(key: string) {\n    [...this._defaultPanels, ...this.panels].forEach((panel) => {\n      if (panel.key === key) {\n        panel.collapsed = !panel.collapsed;\n      }\n    });\n    this.panels$.next([...this._defaultPanels, ...this.panels]);\n  }\n}\n","<div\n  class=\"box-border\"\n  *ngFor=\"let node of borderedNodeList$ | async; trackBy: trackByFn\"\n  [style.left.%]=\"node.left\"\n  [style.top.%]=\"node.top\"\n  [style.width.%]=\"node.width\"\n  [style.height.%]=\"node.height\"\n  [style.transform]=\"getRotate(node.rotate)\"\n></div>\n","import { ChangeDetectionStrategy, Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService } from '../../services/utils.service';\nimport { ICanvasSize, INode } from '../../store';\n\n@Component({\n  selector: 'ce-bordered-area,[ceBorderedArea]',\n  templateUrl: './bordered-area.component.html',\n  styleUrls: ['./bordered-area.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BorderedAreaComponent implements OnInit {\n  public borderedNodeMap = new Map<string, Partial<DOMRect & { rotate: number }>>();\n  public borderedNodeList$: Observable<({ id: string } & Partial<DOMRect & { rotate: number }>)[]>;\n\n  constructor(private store: EditorStore, private utils: CeUtilsService) {}\n\n  ngOnInit(): void {\n    this.borderedNodeList$ = this.store\n      .selectDifferent((state) => ({ bordered: state.bordered, nodes: state.nodes, canvasSize: state.canvasSize }))\n      .pipe(\n        map(({ bordered, nodes, canvasSize }) => {\n          if (!bordered.size) {\n            return [];\n          } else {\n            return this.refreshBorderedList(nodes, bordered, canvasSize);\n          }\n        })\n      );\n  }\n\n  getRotate(rotate: number): string {\n    return `rotate(${rotate}deg)`;\n  }\n\n  trackByFn(...args: [number, { id: string } & Partial<DOMRect & { rotate: number }>]): string {\n    return `${args[1].id}-${args[1].width}-${args[1].height}-${args[1].left}-${args[1].top}-${args[1].rotate}`;\n  }\n\n  refreshBorderedList(nodes: INode[], bordered: Set<string>, canvasSize: ICanvasSize) {\n    return [...bordered]\n      .map((id) => this.utils.getNodeById(id, nodes))\n      .filter((node) => !!node)\n      .map((node) => {\n        {\n          const [, ...parents] = this.utils.getNodeAndParentListById(node.id, nodes);\n          let child = { ...node };\n          while (parents.length) {\n            const parent = parents.shift();\n            child = {\n              ...child,\n              ...this.utils.getChildPositionBaseOnParentCoordinateSystem(parent, parent.rotate ?? 0, child),\n              rotate: child.rotate + parent.rotate,\n            };\n          }\n          return {\n            id: node.id,\n            width: (child.width / canvasSize.width) * 100,\n            height: (child.height / canvasSize.height) * 100,\n            left: (child.left / canvasSize.width) * 100,\n            top: (child.top / canvasSize.height) * 100,\n            rotate: child.rotate,\n          };\n        }\n      });\n  }\n}\n","<ng-container *ngIf=\"node?.children && node?.children.length\">\n  <ce-box-item *ngFor=\"let item of node.children\" [node]=\"item\"></ce-box-item>\n</ng-container>\n","import { AfterViewInit, ChangeDetectionStrategy, Component, ElementRef, Input, Renderer2, ViewEncapsulation } from '@angular/core';\nimport { INode } from '../../store';\n\n@Component({\n  selector: 'ce-box-item',\n  templateUrl: 'box-item.component.html',\n  styleUrls: ['box-item.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class BoxItemComponent<T = any> implements AfterViewInit {\n  private _node: INode<T>;\n  @Input()\n  get node(): INode<T> {\n    return this._node;\n  }\n  set node(val: INode<T>) {\n    this._node = val;\n    this.generatorStyles();\n  }\n\n  constructor(private renderer: Renderer2, private eleRef: ElementRef<HTMLElement>) {}\n\n  ngAfterViewInit() {\n    this.generatorStyles();\n  }\n\n  private generatorStyles() {\n    if (this.eleRef.nativeElement) {\n      this.renderer.setAttribute(this.eleRef.nativeElement, 'id', `box-item-${this.node.id}`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'width', `${this.node.width}px`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'height', `${this.node.height}px`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'left', `${this.node.left}px`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'top', `${this.node.top}px`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'transform', `translate3d(0,0,0) rotate(${this.node.rotate ?? 0}deg)`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'border-style', this.node.borderStyle);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'border-color', this.node.borderColor);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'border-width', `${this.node.borderWidth}px`);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'z-index', this.node.zIndex);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'background-image', this.node.backgroundImage);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'background-position', this.node.backgroundPosition);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'background-repeat', this.node.backgroundRepeat);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'background-size', this.node.backgroundSize);\n      this.renderer.setStyle(this.eleRef.nativeElement, 'background-color', this.node.backgroundColor);\n    }\n  }\n}\n","<div [style.background-color]=\"backgroundColor$ | async\">\n  <ng-template [ngIf]=\"backgroundImage$ | async\">\n    <img [src]=\"backgroundImage$ | async | nzSanitizer: 'url'\" alt=\"\" />\n  </ng-template>\n</div>\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { EditorStore } from '../../services';\nimport { IStore } from '../../store';\n\n@Component({\n  selector: 'ce-canvas-background,[ceCanvasBackground]',\n  templateUrl: 'canvas-background.component.html',\n  styleUrls: ['canvas-background.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasBackgroundComponent {\n  public backgroundColor$: Observable<string>;\n  public backgroundImage$: Observable<string>;\n  constructor(private store: EditorStore<IStore>) {\n    this.backgroundColor$ = this.store.selectDifferent((state) => state.canvasBackground.backgroundColor);\n    this.backgroundImage$ = this.store.selectDifferent((state) => state.canvasBackground.backgroundImage);\n  }\n}\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { EditorStore } from '../../services';\nimport { IStore } from '../../store';\n\n@Component({\n  selector: 'ce-canvas-grid',\n  templateUrl: 'canvas-grid.component.html',\n  styleUrls: ['canvas-grid.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasGridComponent {\n  public childDPath$: Observable<string>;\n  public parentDPath$: Observable<string>;\n  public childWidth$: Observable<number>;\n  public parentWidth$: Observable<number>;\n  constructor(private store: EditorStore<IStore>) {\n    const scale$ = this.store.selectDifferent((state) => state.canvasPosition.scale);\n    this.childDPath$ = scale$.pipe(map((scale) => this.getPath(10, scale)));\n    this.parentDPath$ = scale$.pipe(map((scale) => this.getPath(50, scale)));\n    this.childWidth$ = scale$.pipe(map((scale) => 10 * scale));\n    this.parentWidth$ = scale$.pipe(map((scale) => 50 * scale));\n  }\n  getPath(size: number, scale: number): string {\n    return `M ${size * scale || 0} 0 L 0 0 0 ${size * scale || 0}`;\n  }\n}\n","import { IActionType } from '../store';\n\nexport function clearSelected<T = any>(): IActionType<T> {\n  return (state) => ({ ...state, selected: new Set([]) });\n}\n\nexport function addSelectedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, selected: new Set([...state.selected, ...ids]) });\n}\n\nexport function removeSelectedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, selected: new Set([...state.selected].filter((id) => !ids.includes(id))) });\n}\n\nexport function setSelectedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, selected: new Set([...ids]) });\n}\n\nexport function clearBordered<T = any>(): IActionType<T> {\n  return (state) => ({ ...state, bordered: new Set([]) });\n}\n\nexport function addBorderedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, bordered: new Set([...state.bordered, ...ids]) });\n}\n\nexport function removeBorderedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, bordered: new Set([...state.bordered].filter((id) => !ids.includes(id))) });\n}\n\nexport function setBorderedNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, bordered: new Set([...ids]) });\n}\n","import { IActionType, ICanvasBackground, ICanvasPosition, ICanvasSize } from '../store';\n\nexport function updateCanvasSize<T = any>(canvasSize: Partial<ICanvasSize>): IActionType<T> {\n  return (state) => ({ ...state, canvasSize: { ...state.canvasSize, ...canvasSize } });\n}\n\nexport function updateCanvasPosition<T = any>(canvasPosition: Partial<ICanvasPosition>): IActionType<T> {\n  return (state) => ({ ...state, canvasPosition: { ...state.canvasPosition, ...canvasPosition } });\n}\n\nexport function updateCanvasBackground<T = any>(canvasBackground: Partial<ICanvasBackground>): IActionType<T> {\n  return (state) => ({ ...state, canvasBackground: { ...state.canvasBackground, ...canvasBackground } });\n}\n","import * as _ from 'lodash';\nimport { CeUtilsService, genNodeId, IDOMRect } from '../services';\nimport { IActionType, INode } from '../store';\n\nexport function lockNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, nodes: state.nodes.map((node) => (ids.includes(node.id) ? { ...node, locked: true } : node)) });\n}\n\nexport function unlockNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => ({ ...state, nodes: state.nodes.map((node) => (ids.includes(node.id) ? { ...node, locked: false } : node)) });\n}\n\nexport function addNodes<T = any>(nodes: INode<T>[]): IActionType<T> {\n  return (state) => ({ ...state, nodes: [...state.nodes, ...nodes] });\n}\n\nexport function removeNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => {\n    let parent = CeUtilsService.shared.getSameLayerParentByChildren(ids, state.nodes);\n    if (parent === false) {\n      return { ...state };\n    } else if (parent === undefined) {\n      return { ...state, nodes: state.nodes.filter((node) => !ids.includes(node.id)) };\n    } else {\n      const originalParentId = parent.id;\n      let prevParent: INode;\n      let prevParentId: string;\n      const parents = CeUtilsService.shared.getNodeAndParentListById(parent.id, _.cloneDeep(state.nodes));\n      while (parents.length) {\n        parent = parents.shift();\n        let children: INode<T>[];\n        if (parent.id === originalParentId) {\n          children = parent.children.filter((child: INode<T>) => !ids.includes(child.id));\n        } else {\n          children = parent.children\n            .filter((child: INode<T>) => (child.id === prevParentId ? prevParent : child))\n            .filter((child: INode<T>) => !!child);\n        }\n        prevParentId = parent.id;\n        if (children.length > 1) {\n          const rect = CeUtilsService.shared.getOuterBoundingBox(\n            children\n              .map((child) => ({\n                rotate: child.rotate,\n                ...CeUtilsService.shared.getChildPositionBaseOnParentCoordinateSystem(parent as INode, (parent as INode).rotate, child),\n              }))\n              .map((item) => CeUtilsService.shared.getAbsolutePosition(item.cx, item.cy, item.width, item.height, item.rotate))\n          );\n          parent.width = rect.width;\n          parent.height = rect.height;\n          parent.left = rect.left;\n          parent.top = rect.top;\n          parent.children = children;\n        } else if (children.length === 1) {\n          const rect = CeUtilsService.shared.getChildPositionBaseOnParentCoordinateSystem(parent, parent.rotate, children[0]);\n          parent = { ...children[0], ...rect };\n        } else if (children.length === 0) {\n          parent = null;\n        }\n        prevParent = parent as INode;\n      }\n      return { ...state, nodes: state.nodes.map((node) => (node.id === prevParentId ? parent : node)).filter((node) => !!node) as INode<T>[] };\n    }\n  };\n}\n\nexport function updateNodes<T = any>(nodes: INode<T>[]): IActionType<T> {\n  return (state) => ({ ...state, nodes: state.nodes.map((item) => ({ ...item, ...nodes.find((i) => i.id === item.id) })) });\n}\n\nexport function updateNodesSize<T = any>(nodesSizeMap: Map<string, IDOMRect>): IActionType<T> {\n  return (state) => {\n    let inSameLayer = true;\n    const ids = [...nodesSizeMap.keys()];\n    let parent: INode;\n    while (inSameLayer && ids.length) {\n      const id = ids.pop();\n      const node = CeUtilsService.shared.getNodeById(id, state.nodes);\n      inSameLayer = parent?.id === node.parentNode?.id;\n      parent = node.parentNode;\n    }\n\n    if (!inSameLayer) {\n      return state;\n    } else {\n      if (!parent) {\n        return {\n          ...state,\n          nodes: state.nodes.map((node) => {\n            const newNode = { ...node, ...nodesSizeMap.get(node.id) };\n            if (node.children && node.children.length) {\n              return { ...newNode, children: recursiveUpdateNodeChildrenSize(newNode.children, { ...node }, { ...newNode }) };\n            } else {\n              return newNode;\n            }\n          }),\n        };\n      } else {\n        return state;\n      }\n    }\n  };\n}\n\nexport function groupNodes<T = any>(ids: string[]): IActionType<T> {\n  return (state) => {\n    const parent = CeUtilsService.shared.getSameLayerParentByChildren(ids, state.nodes);\n    if (parent === false) {\n      return state;\n    }\n    const nodeMap = new Map<string, INode>();\n    ids.forEach((id) => {\n      const node = state.nodes.find((i) => i.id === id);\n      if (node) {\n        nodeMap.set(id, node);\n      }\n    });\n    const groupRect = CeUtilsService.shared.getOuterBoundingBox(\n      ids\n        .filter((id) => nodeMap.has(id))\n        .map((id) => {\n          const node = nodeMap.get(id);\n          return CeUtilsService.shared.getAbsolutePosition(\n            node.left + node.width / 2,\n            node.top + node.height / 2,\n            node.width,\n            node.height,\n            node.rotate\n          );\n        })\n    );\n    const groupNode: INode = {\n      id: genNodeId(),\n      name: 'Group',\n      ...groupRect,\n      rotate: 0,\n      zIndex: Math.max(...state.nodes.filter((node) => !nodeMap.has(node.id)).map((node) => node.zIndex)) + 1,\n      children: ids\n        .filter((id) => nodeMap.has(id))\n        .map((id) => {\n          const node = nodeMap.get(id);\n          const { bl, br, tl, tr } = CeUtilsService.shared.getAbsolutePosition(\n            node.left + node.width / 2,\n            node.top + node.height / 2,\n            node.width,\n            node.height,\n            node.rotate\n          );\n          return {\n            ...node,\n            ...CeUtilsService.shared.getRelativePosition({\n              bl: [bl[0] - groupRect.left, bl[1] - groupRect.top],\n              br: [br[0] - groupRect.left, br[1] - groupRect.top],\n              tl: [tl[0] - groupRect.left, tl[1] - groupRect.top],\n              tr: [tr[0] - groupRect.left, tr[1] - groupRect.top],\n            }),\n          };\n        }),\n    };\n    return { ...state, nodes: [...state.nodes.filter((node) => !nodeMap.has(node.id)), groupNode] };\n  };\n}\n\nexport function breakNode<T = any>(id: string): IActionType<T> {\n  return (state) => {\n    const [node, ...parents] = CeUtilsService.shared.getNodeAndParentListById(id, _.cloneDeep(state.nodes));\n    const newNodes = node.children.map((child: INode<T>) => {\n      return {\n        ...child,\n        ...CeUtilsService.shared.getChildPositionBaseOnParentCoordinateSystem(node, node.rotate, child),\n        rotate: (child.rotate ?? 0) + (node.rotate ?? 0),\n      };\n    });\n    if (!parents.length) {\n      return { ...state, nodes: [...state.nodes.filter((i) => i.id !== node.id), ...newNodes] };\n    } else {\n      let parent = parents.shift();\n      parent.children = [...parent.children.filter((child: INode<T>) => child.id !== node.id), ...newNodes];\n      while (parents.length) {\n        const nextParent = parents.shift();\n        nextParent.children = nextParent.children.map((child: INode<T>) => (child.id === parent.id ? parent : child));\n        parent = nextParent;\n      }\n      return { ...state, nodes: [...state.nodes.filter((i) => i.id !== parent.id), parent] };\n    }\n  };\n}\n\n// /**\n//  * 递归更新节点的位置和大小\n//  * @param nodes 节点列表\n//  * @param oldParentRect 父节点的旧尺寸和位置\n//  * @param newParentRect 父节点的新尺寸和位置\n//  */\n// function recursiveUpdateNodeChildrenSize(nodes: INode[], oldParentRect: IDOMRect, newParentRect: IDOMRect): INode[] {\n//   const { width, height } = newParentRect;\n//   return nodes.map((node) => {\n//     const cxPercent = (node.left + node.width / 2) / oldParentRect.width;\n//     const cyPercent = (node.top + node.height / 2) / oldParentRect.height;\n//     const widthPercent = node.width / oldParentRect.width;\n//     const heightPercent = node.height / oldParentRect.height;\n//     const newNodeRect: IDOMRect = {\n//       width: widthPercent * width,\n//       height: heightPercent * height,\n//       left: cxPercent * width - (widthPercent * width) / 2,\n//       top: cyPercent * height - (heightPercent * height) / 2,\n//     };\n//     if (node.children && node.children.length) {\n//       return { ...node, ...newNodeRect, children: recursiveUpdateNodeChildrenSize(node.children, { ...node }, { ...newNodeRect }) };\n//     } else {\n//       return { ...node, ...newNodeRect };\n//     }\n//   });\n// }\n\n/**\n * 递归更新节点的位置和大小\n * @param nodes 节点列表\n * @param oldParentRect 父节点的旧尺寸和位置\n * @param newParentRect 父节点的新尺寸和位置\n */\nfunction recursiveUpdateNodeChildrenSize(nodes: INode[], oldParentRect: IDOMRect, newParentRect: IDOMRect): INode[] {\n  const { width, height } = newParentRect;\n  return nodes.map((node) => {\n    const nodeAbsolutePosition = CeUtilsService.shared.getAbsolutePosition(\n      node.left + node.width / 2,\n      node.top + node.height / 2,\n      node.width,\n      node.height,\n      node.rotate\n    );\n    const { tl, tr, bl, br } = CeUtilsService.shared.getItemPercentPositionInGroup(\n      {\n        ...oldParentRect,\n        left: 0,\n        top: 0,\n      },\n      nodeAbsolutePosition\n    );\n    const newNodeRect = CeUtilsService.shared.getRelativePosition({\n      tl: [tl[0] * width, tl[1] * height],\n      tr: [tr[0] * width, tr[1] * height],\n      bl: [bl[0] * width, bl[1] * height],\n      br: [br[0] * width, br[1] * height],\n    });\n    if (node.children && node.children.length) {\n      return { ...node, ...newNodeRect, children: recursiveUpdateNodeChildrenSize(node.children, { ...node }, { ...newNodeRect }) };\n    } else {\n      return { ...node, ...newNodeRect };\n    }\n  });\n}\n","import { DEFAULT_STORE, IActionType, IRefLineDirection, IRefLineState } from '../store';\n\nexport function updateRefLineState<T = any>(direction: IRefLineDirection, state: IRefLineState): IActionType<T> {\n  return (state) => ({ ...state, refLineState: { ...state.refLineState, [direction]: state } });\n}\n\nexport function resetRefLineState<T = any>(): IActionType<T> {\n  return (state) => ({ ...state, refLineState: DEFAULT_STORE.refLineState });\n}\n\nexport function updateRefLinesState<T = any>(refLineState: { [K in IRefLineDirection]: IRefLineState }): IActionType<T> {\n  return (state) => ({ ...state, refLineState: { ...state.refLineState, ...refLineState } });\n}\n","<svg data-html2canvas-ignore class=\"grid\" width=\"100%\" height=\"100%\">\n  <defs>\n    <pattern id=\"smallGrid\" [attr.width]=\"childWidth$ | async\" [attr.height]=\"childWidth$ | async\" patternUnits=\"userSpaceOnUse\">\n      <path [attr.d]=\"childDPath$ | async\" fill=\"none\" stroke=\"rgba(207, 207, 207, 0.8)\" stroke-width=\"1\"></path>\n    </pattern>\n    <pattern id=\"grid\" [attr.width]=\"parentWidth$ | async\" [attr.height]=\"parentWidth$ | async\" patternUnits=\"userSpaceOnUse\">\n      <rect [attr.width]=\"parentWidth$ | async\" [attr.height]=\"parentWidth$ | async\" fill=\"url(#smallGrid)\"></rect>\n      <path [attr.d]=\"parentDPath$ | async\" fill=\"none\" stroke=\"rgba(186, 186, 186, 1)\" stroke-width=\"1\"></path>\n    </pattern>\n  </defs>\n  <rect width=\"100%\" height=\"100%\" fill=\"url(#grid)\"></rect>\n</svg>\n","import { ChangeDetectorRef, Directive, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { InputBoolean } from 'ng-zorro-antd/core/util';\nimport { fromEvent, Observable, Subscription } from 'rxjs';\nimport { filter, finalize, map, switchMap, takeUntil } from 'rxjs/operators';\n\n@Directive({\n  selector: '[ceDraggable]',\n  exportAs: 'ceDraggable',\n})\nexport class DraggableDirective implements OnInit, OnDestroy {\n  @Input()\n  @InputBoolean()\n  public ceDragDisabled = false;\n  @Input()\n  @InputBoolean()\n  public ceUseSpace = false;\n  @Output()\n  public ceOnStart = new EventEmitter<PointerEvent>();\n  @Output()\n  public ceOnMove = new EventEmitter<MouseEvent>();\n  @Output()\n  public ceOnStop = new EventEmitter<PointerEvent>();\n  @Output()\n  public ceOnSpaceKeyDown = new EventEmitter<void>();\n  public spaceKeyDown = false;\n  private subscription = new Subscription();\n  private mouseMove$ = fromEvent<PointerEvent>(window, 'pointermove');\n  private mouseUp$ = fromEvent<PointerEvent>(window, 'pointerup');\n  private mouseDown$: Observable<PointerEvent>;\n  private mouseEnter$: Observable<PointerEvent>;\n  private mouseLeave$: Observable<PointerEvent>;\n  private keyDown$ = fromEvent<KeyboardEvent>(document, 'keydown');\n  private keyUp$ = fromEvent<KeyboardEvent>(document, 'keyup');\n  constructor(private eleRef: ElementRef<HTMLElement>, private cdr: ChangeDetectorRef) {\n    this.mouseDown$ = fromEvent<PointerEvent>(this.eleRef.nativeElement, 'pointerdown').pipe(filter((e) => e.button === 0));\n    this.mouseEnter$ = fromEvent<PointerEvent>(this.eleRef.nativeElement, 'pointerenter');\n    this.mouseLeave$ = fromEvent<PointerEvent>(this.eleRef.nativeElement, 'pointerleave');\n  }\n\n  ngOnInit(): void {\n    this.listenSpaceKeyEvent();\n    this.mouseDown$\n      .pipe(\n        filter(() => !this.ceDragDisabled),\n        filter(() => (this.ceUseSpace ? this.spaceKeyDown : true)),\n        switchMap((startEv) => {\n          this.ceOnStart.emit(startEv);\n          return this.mouseMove$.pipe(takeUntil(this.mouseUp$.pipe(map((stopEv) => this.ceOnStop.emit(stopEv)))));\n        })\n      )\n      .subscribe((moveEv) => this.ceOnMove.emit(moveEv));\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  listenSpaceKeyEvent(): void {\n    this.subscription.add(\n      this.mouseEnter$\n        .pipe(\n          filter(() => !this.ceDragDisabled),\n          filter(() => this.ceUseSpace),\n          switchMap(() =>\n            this.keyDown$.pipe(\n              switchMap((e) => {\n                this.spaceKeyDown = e.key === ' ';\n                this.cdr.detectChanges();\n                if (this.spaceKeyDown) {\n                  e.preventDefault();\n                  e.stopPropagation();\n                }\n                return this.keyUp$;\n              }),\n              map(() => {\n                this.spaceKeyDown = false;\n                this.ceOnStop.emit();\n              }),\n              takeUntil(this.mouseLeave$),\n              finalize(() => {\n                this.spaceKeyDown = false;\n                this.ceOnStop.emit();\n              })\n            )\n          )\n        )\n        .subscribe()\n    );\n  }\n}\n","<ce-box-item\n  *ngFor=\"let node of nodes$ | async; trackBy: nodeListTrackByFn\"\n  ceDraggable\n  [ceDragDisabled]=\"node?.locked\"\n  (ceOnStart)=\"moveStart($event, node)\"\n  (ceOnMove)=\"moving($event)\"\n  (ceOnStop)=\"moveEnd()\"\n  [node]=\"node\"\n  (pointerenter)=\"showBorder(node.id)\"\n  (pointerleave)=\"removeBorder(node.id)\"\n></ce-box-item>\n","import { ChangeDetectionStrategy, Component, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport {\n  addBorderedNodes,\n  addSelectedNodes,\n  clearBordered,\n  clearSelected,\n  removeBorderedNodes,\n  resetRefLineState,\n  updateNodes,\n  updateRefLinesState,\n} from '../../actions';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService, IDOMRect } from '../../services/utils.service';\nimport { ICanvasPosition, INode, IRefLineDirection, IRefLineState, IStore } from '../../store';\n\nconst REF_LINE_DIRECTION_COMPARE_MAP: {\n  [P in IRefLineDirection]: {\n    baseKey: keyof IDOMRect;\n    referKey: keyof IDOMRect;\n    baseValue: (baseRect: IDOMRect, referRect: IDOMRect) => { key: keyof IDOMRect; value: number };\n  }[];\n} = {\n  tx: [\n    {\n      baseKey: 'top',\n      referKey: 'top',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.top }),\n    },\n    {\n      baseKey: 'top',\n      referKey: 'cy',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.cy }),\n    },\n    {\n      baseKey: 'top',\n      referKey: 'bottom',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.bottom }),\n    },\n  ],\n  bx: [\n    {\n      baseKey: 'bottom',\n      referKey: 'top',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.top - baseRect.height }),\n    },\n    {\n      baseKey: 'bottom',\n      referKey: 'cy',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.cy - baseRect.height }),\n    },\n    {\n      baseKey: 'bottom',\n      referKey: 'bottom',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.bottom - baseRect.height }),\n    },\n  ],\n  ly: [\n    {\n      baseKey: 'left',\n      referKey: 'left',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.left }),\n    },\n    {\n      baseKey: 'left',\n      referKey: 'cx',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.cx }),\n    },\n    {\n      baseKey: 'left',\n      referKey: 'right',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.right }),\n    },\n  ],\n  ry: [\n    {\n      baseKey: 'right',\n      referKey: 'left',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.left - baseRect.width }),\n    },\n    {\n      baseKey: 'right',\n      referKey: 'cx',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.cx - baseRect.width }),\n    },\n    {\n      baseKey: 'right',\n      referKey: 'right',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.right - baseRect.width }),\n    },\n  ],\n  cx: [\n    {\n      baseKey: 'cy',\n      referKey: 'top',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.top - baseRect.height / 2 }),\n    },\n    {\n      baseKey: 'cy',\n      referKey: 'cy',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.cy - baseRect.height / 2 }),\n    },\n    {\n      baseKey: 'cy',\n      referKey: 'bottom',\n      baseValue: (baseRect, referRect) => ({ key: 'top', value: referRect.bottom - baseRect.height / 2 }),\n    },\n  ],\n  cy: [\n    {\n      baseKey: 'cx',\n      referKey: 'left',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.left - baseRect.width / 2 }),\n    },\n    {\n      baseKey: 'cx',\n      referKey: 'cx',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.cx - baseRect.width / 2 }),\n    },\n    {\n      baseKey: 'cx',\n      referKey: 'right',\n      baseValue: (baseRect, referRect) => ({ key: 'left', value: referRect.right - baseRect.width / 2 }),\n    },\n  ],\n};\n@Component({\n  selector: 'ce-canvas',\n  templateUrl: 'canvas.component.html',\n  styleUrls: ['canvas.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasComponent {\n  public nodes$: Observable<INode[]>;\n  public nodes: INode[];\n  private selected: Set<string>;\n  private canvasPosition: ICanvasPosition;\n  private pointerSnapshot: [number, number] = null;\n  private nodesSnapshot: Map<string, INode> = new Map();\n  private outerBoxSnapshot: IDOMRect;\n  private unselectedNodes: INode[];\n  private gap = 5;\n\n  constructor(private store: EditorStore<IStore>, private utils: CeUtilsService) {\n    this.nodes$ = this.store.selectDifferent((state) => state.nodes);\n    this.store.select((state) => state.nodes).subscribe((nodes) => (this.nodes = nodes));\n    this.store.select((state) => state.selected).subscribe((state) => (this.selected = state));\n    this.store.select((state) => state.canvasPosition).subscribe((state) => (this.canvasPosition = state));\n  }\n\n  nodeListTrackByFn(i: number, node: INode): string {\n    return node.id;\n  }\n\n  moveStart(ev: PointerEvent, node: INode): void {\n    ev.preventDefault();\n    ev.stopPropagation();\n    this.nodesSnapshot.clear();\n    this.pointerSnapshot = [ev.clientX, ev.clientY];\n    let selected: string[] = [...this.selected];\n    if (!this.selected.has(node.id)) {\n      this.store.dispatch(clearBordered());\n      this.store.dispatch(clearSelected());\n      this.store.dispatch(addSelectedNodes([node.id]));\n      selected = [node.id];\n    }\n\n    this.outerBoxSnapshot = this.utils.getOuterBoundingBox(\n      selected\n        .map((id) => this.utils.getNodeById(id, this.nodes))\n        .map((item) => this.utils.getAbsolutePosition(item.left + item.width / 2, item.top + item.height / 2, item.width, item.height, item.rotate))\n    );\n    this.unselectedNodes = this.nodes.filter((item) => !selected.includes(item.id));\n\n    selected.forEach((id) => {\n      const item = this.nodes.find((n) => n.id === id);\n      this.nodesSnapshot.set(item.id, {\n        ...item,\n        cxPercent: (item.left + item.width / 2 - this.outerBoxSnapshot.left) / this.outerBoxSnapshot.width,\n        cyPercent: (item.top + item.height / 2 - this.outerBoxSnapshot.top) / this.outerBoxSnapshot.height,\n      });\n    });\n  }\n\n  moving(ev: PointerEvent): void {\n    if (this.pointerSnapshot) {\n      this.store.dispatch(resetRefLineState());\n      const { scale } = this.canvasPosition;\n      const [x, y] = this.pointerSnapshot;\n      const [mx, my] = [(ev.clientX - x) / scale, (ev.clientY - y) / scale];\n      const baseRect: IDOMRect = {\n        ...this.outerBoxSnapshot,\n        left: this.outerBoxSnapshot.left + mx,\n        top: this.outerBoxSnapshot.top + my,\n        right: this.outerBoxSnapshot.right + mx,\n        bottom: this.outerBoxSnapshot.bottom + my,\n        cx: this.outerBoxSnapshot.cx + mx,\n        cy: this.outerBoxSnapshot.cy + my,\n      };\n      const refLinesState: { [P in IRefLineDirection]: IRefLineState } = {\n        bx: null,\n        tx: null,\n        ly: null,\n        ry: null,\n        cx: null,\n        cy: null,\n      };\n      this.unselectedNodes.forEach((node) => {\n        const nodeRect = this.utils.getBoundingBox(node.width, node.height, node.left, node.top, node.rotate);\n        ['tx', 'bx', 'ly', 'ry', 'cx', 'cy'].forEach((direction: IRefLineDirection) => {\n          const result = getRefLineStateByDirection(direction, baseRect, nodeRect, this.gap / scale);\n          if (result) {\n            const { state, position, base } = result;\n            if (state) {\n              refLinesState[direction] = { state, position };\n              baseRect[base.key] = base.value;\n            }\n          }\n        });\n      });\n      const newNodes: INode[] = [];\n      this.nodesSnapshot.forEach((node) => {\n        const { cxPercent, cyPercent, width, height, nodeRect, ...properties } = node;\n        newNodes.push({\n          ...properties,\n          width,\n          height,\n          left: cxPercent * baseRect.width + baseRect.left - width / 2,\n          top: cyPercent * baseRect.height + baseRect.top - height / 2,\n        });\n      });\n\n      this.store.dispatch(updateRefLinesState(refLinesState));\n      this.store.dispatch(updateNodes(newNodes));\n    }\n  }\n\n  moveEnd(): void {\n    this.pointerSnapshot = null;\n    this.store.dispatch(resetRefLineState());\n    this.nodesSnapshot.clear();\n  }\n\n  showBorder(id: string): void {\n    this.store.dispatch(addBorderedNodes([id]));\n  }\n\n  removeBorder(id: string): void {\n    if (!this.selected.has(id)) {\n      this.store.dispatch(removeBorderedNodes([id]));\n    }\n  }\n}\n\nfunction getRefLineStateByDirection(\n  direction: IRefLineDirection,\n  baseRect: IDOMRect,\n  referRect: IDOMRect,\n  gap: number\n): IRefLineState & { base: { key: keyof IDOMRect; value: number } } {\n  return REF_LINE_DIRECTION_COMPARE_MAP[direction]\n    .map(({ baseKey, referKey, baseValue }) => ({\n      state: Math.abs(baseRect[baseKey] - referRect[referKey]) < gap,\n      position: referRect[referKey],\n      base: baseValue(baseRect, referRect),\n    }))\n    .find((item) => item.state);\n}\n","<nz-tree\n  #layerTree\n  nzBlockNode\n  nzMultiple\n  [nzData]=\"treeNodes$ | async\"\n  [nzSelectedKeys]=\"selectedKeys$ | async\"\n  [nzTreeTemplate]=\"nzTreeTemplate\"\n  [nzExpandedIcon]=\"multiExpandedIconTpl\"\n  (nzClick)=\"clickNode($event)\"\n>\n  <ng-template #multiExpandedIconTpl let-node let-origin=\"origin\">\n    <i *ngIf=\"!node.isLeaf\" nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\" class=\"ant-tree-switcher-line-icon\"></i>\n  </ng-template>\n  <ng-template #nzTreeTemplate let-node=\"origin\">\n    <div\n      class=\"layer\"\n      [class.locked]=\"node.locked\"\n      (contextmenu)=\"contextMenu($event, menu, node)\"\n      (pointerenter)=\"showBordered(node.id)\"\n      (pointerleave)=\"clearBordered(node.id)\"\n    >\n      <span>{{ node.title }}</span>\n    </div>\n    <nz-dropdown-menu #menu=\"nzDropdownMenu\">\n      <ul nz-menu>\n        <li *ngIf=\"!node.locked\" nz-menu-item class=\"action-item\" (click)=\"toggleNodesLockState(layerTree.nzSelectedKeys, true)\">\n          <i nz-icon nzType=\"lock\"></i>\n          <span>锁定</span>\n        </li>\n        <li *ngIf=\"node.locked\" nz-menu-item class=\"action-item\" (click)=\"toggleNodesLockState(layerTree.nzSelectedKeys, false)\">\n          <i nz-icon nzType=\"unlock\"></i>\n          <span>解锁</span>\n        </li>\n        <li nz-menu-item class=\"action-item\" (click)=\"deleteNodes(layerTree.nzSelectedKeys)\">\n          <i nz-icon nzType=\"delete\"></i>\n          <span>删除</span>\n        </li>\n        <li *ngIf=\"groupStatus$ | async\" nz-menu-item class=\"action-item\" (click)=\"group(layerTree.nzSelectedKeys)\">\n          <i nz-icon nzIconfont=\"icon-group\"></i>\n          <span>组合</span>\n          <span class=\"shortcuts\"> ctrl+shift+G </span>\n        </li>\n        <li *ngIf=\"selected.size === 1 && node.children && node.children.length\" nz-menu-item (click)=\"breakNode(node.id)\" class=\"action-item\">\n          <i nz-icon nzIconfont=\"icon-break\"></i>\n          <span>打散</span>\n          <span class=\"shortcuts\"> ctrl+shift+B </span>\n        </li>\n      </ul>\n    </nz-dropdown-menu>\n  </ng-template>\n</nz-tree>\n","import { ChangeDetectionStrategy, Component, ElementRef, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { NzContextMenuService, NzDropdownMenuComponent } from 'ng-zorro-antd/dropdown';\nimport { NzFormatEmitEvent, NzTreeComponent, NzTreeNode, NzTreeNodeOptions } from 'ng-zorro-antd/tree';\nimport { Observable } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport {\n  addBorderedNodes,\n  breakNode,\n  clearBordered,\n  clearSelected,\n  groupNodes,\n  lockNodes,\n  removeBorderedNodes,\n  removeNodes,\n  setBorderedNodes,\n  setSelectedNodes,\n  unlockNodes,\n} from '../../actions';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService } from '../../services/utils.service';\nimport { INode, IStore } from '../../store';\n\n@Component({\n  selector: 'ce-layer-tree',\n  exportAs: 'ceLayerTree',\n  templateUrl: 'layer-tree.component.html',\n  styleUrls: ['layer-tree.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class LayerTreeComponent {\n  public treeNodes$: Observable<NzTreeNodeOptions[]>;\n  public selected: Set<string>;\n  public selectedKeys$: Observable<string[]>;\n  @ViewChild('layerTree', { read: NzTreeComponent })\n  public layerTree: NzTreeComponent;\n  private parentKey: string;\n  public groupStatus$: Observable<boolean>;\n\n  constructor(\n    public eleRef: ElementRef<HTMLElement>,\n    private store: EditorStore<IStore>,\n    private utils: CeUtilsService,\n    private contextMenuSrv: NzContextMenuService\n  ) {\n    this.treeNodes$ = this.store\n      .selectDifferent((state) => state.nodes)\n      .pipe(map((nodes) => this.transferNodesToNzNodes(this.utils.sortNodeListByIndex(nodes))));\n    this.selectedKeys$ = this.store.selectDifferent((state) => state.selected).pipe(map((selected) => [...selected]));\n    this.groupStatus$ = this.store\n      .selectDifferent((state) => state.selected)\n      .pipe(\n        filter(() => !!this.layerTree),\n        map((selected) =>\n          selected.size > 1\n            ? !![...selected].find((id) => {\n                const node = this.layerTree?.getSelectedNodeList().find((item) => item.key === id);\n                return node && node.parentNode;\n              })\n            : false\n        )\n      );\n    this.store\n      .selectDifferent((state) => state.selected)\n      .subscribe((selected) => {\n        this.selected = selected;\n      });\n  }\n\n  clearBordered(id: string): void {\n    if (!this.selected.has(id)) {\n      this.store.dispatch(removeBorderedNodes([id]));\n    }\n  }\n\n  showBordered(id: string): void {\n    this.store.dispatch(addBorderedNodes([id]));\n  }\n\n  layerTrackByFn(index: number, node: INode): string {\n    return `box-item-${node.id}-${node.zIndex}`;\n  }\n\n  transferNodesToNzNodes(nodes: INode[]): NzTreeNodeOptions[] {\n    return nodes.map((node) => {\n      return {\n        ...node,\n        children: node.children && this.transferNodesToNzNodes(node.children),\n        title: node.name,\n        key: node.id,\n        isLeaf: !node.children?.length,\n      };\n    });\n  }\n\n  contextMenu(event: MouseEvent, menu: NzDropdownMenuComponent, node: NzTreeNode): void {\n    if (!this.selected.has(node.key)) {\n      this.store.dispatch(setSelectedNodes([node.key]));\n    }\n    this.contextMenuSrv.create(event, menu);\n  }\n\n  getParentKey(parentNode?: NzTreeNode): string {\n    return parentNode?.key ?? 'root';\n  }\n\n  multipleSelected(event: NzFormatEmitEvent): void {\n    if (!this.parentKey) {\n      this.parentKey = this.getParentKey(event.node.parentNode);\n    }\n    const ids = event.selectedKeys.filter((node) => this.getParentKey(node.parentNode) === this.parentKey).map((node) => node.key);\n    this.store.dispatch(setSelectedNodes(ids));\n    this.store.dispatch(setBorderedNodes(ids));\n  }\n\n  clickNode(event: NzFormatEmitEvent): void {\n    if (event.node) {\n      if (/Win|Linux/.test(navigator.platform)) {\n        if (event.event.ctrlKey) {\n          this.multipleSelected(event);\n        } else {\n          this.parentKey = this.getParentKey(event.node.parentNode);\n          this.store.dispatch(setSelectedNodes([event.node.key]));\n          this.store.dispatch(setBorderedNodes([event.node.key]));\n        }\n      }\n      if (/Mac/.test(navigator.platform)) {\n        if (event.event.metaKey) {\n          this.multipleSelected(event);\n        } else {\n          this.parentKey = this.getParentKey(event.node.parentNode);\n          this.store.dispatch(setSelectedNodes([event.node.key]));\n          this.store.dispatch(setBorderedNodes([event.node.key]));\n        }\n      }\n    }\n  }\n\n  group(ids: string[]): void {\n    this.store.dispatch(groupNodes(ids));\n  }\n\n  breakNode(id: string): void {\n    this.store.dispatch(clearSelected());\n    this.store.dispatch(clearBordered());\n    this.store.dispatch(breakNode(id));\n  }\n\n  deleteNodes(ids: string[]): void {\n    this.store.dispatch(clearSelected());\n    this.store.dispatch(clearBordered());\n    this.store.dispatch(removeNodes(ids));\n  }\n\n  toggleNodesLockState(ids: string[], state: boolean) {\n    if (state) {\n      this.store.dispatch(lockNodes(ids));\n    } else {\n      this.store.dispatch(unlockNodes(ids));\n    }\n  }\n}\n","<nz-card\n  nzSize=\"small\"\n  [nzTitle]=\"cardTitle\"\n  [nzExtra]=\"cardExtra\"\n  cdkDrag\n  [cdkDragFreeDragPosition]=\"panel\"\n  (cdkDragEnded)=\"updatePosition($event)\"\n  [class.collapsed]=\"panel?.collapsed\"\n>\n  <ng-template #cardTitle>\n    <div cdkDragHandle class=\"d-flex align-items-center\">{{ panel?.title }}</div>\n  </ng-template>\n  <ng-container *ngIf=\"utils.isTemplateType(panel.content)\">\n    <ng-container *ngTemplateOutlet=\"panel.content\"></ng-container>\n  </ng-container>\n  <ng-container *ngIf=\"!utils.isTemplateType(panel.content)\">\n    <ng-container *ngComponentOutlet=\"panel.content\"></ng-container>\n  </ng-container>\n</nz-card>\n\n<ng-template #cardExtra>\n  <button nz-button nzSize=\"small\" nzType=\"link\" (click)=\"toggleCollapsed()\" class=\"collapse-icon\">\n    <i nz-icon nzType=\"caret-down\"></i>\n  </button>\n  <button nz-button nzSize=\"small\" nzType=\"link\" (click)=\"close()\">\n    <i nz-icon nzType=\"close\"></i>\n  </button>\n</ng-template>\n","import { CdkDragEnd } from '@angular/cdk/drag-drop';\nimport { ChangeDetectionStrategy, Component, Input, ViewEncapsulation } from '@angular/core';\nimport { CeUtilsService, EditorStore } from '../../services';\nimport { IPanel } from '../../store';\n\n@Component({\n  selector: 'ce-panel,[cePanel]',\n  templateUrl: './panel.component.html',\n  styleUrls: ['./panel.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PanelComponent<T> {\n  private _panel: IPanel<T>;\n\n  @Input()\n  set panel(val: IPanel<T>) {\n    this._panel = val;\n  }\n  get panel(): IPanel<T> {\n    return this._panel;\n  }\n  constructor(public utils: CeUtilsService, public store: EditorStore) {}\n\n  updatePosition(event: CdkDragEnd) {\n    this.store.updatePanelPosition(this.panel.key, [this.panel.x + event.distance.x, this.panel.y + event.distance.y]);\n  }\n\n  toggleCollapsed() {\n    this.store.togglePanelCollapsed(this.panel.key);\n  }\n\n  close() {\n    this.store.togglePanelVisible(this.panel.key);\n  }\n}\n","<div>\n  <h4>画布尺寸</h4>\n  <form nz-form nzLayout=\"inline\" [formGroup]=\"canvasSizeFormGroup\">\n    <nz-row nzGutter=\"8\">\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-kuandu\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <nz-input-number nzSize=\"small\" formControlName=\"width\"></nz-input-number>\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-gaodu\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <nz-input-number nzSize=\"small\" formControlName=\"height\"></nz-input-number>\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n    </nz-row>\n  </form>\n</div>\n<div class=\"mt-2\">\n  <h4>画布位置</h4>\n  <form nz-form nzLayout=\"inline\" [formGroup]=\"canvasPositionFormGroup\">\n    <nz-row nzGutter=\"8\">\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-left\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <nz-input-number nzSize=\"small\" formControlName=\"left\"></nz-input-number>\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-top\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <nz-input-number nzSize=\"small\" formControlName=\"top\"></nz-input-number>\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-scale\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <nz-input-number nzSize=\"small\" formControlName=\"scale\"></nz-input-number>\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n    </nz-row>\n  </form>\n</div>\n<div class=\"mt-2\">\n  <h4>画布背景</h4>\n  <form nz-form nzLayout=\"inline\" [formGroup]=\"canvasBackgroundFormGroup\">\n    <nz-row nzGutter=\"8\">\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-color\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <input type=\"color\" nz-input nzSize=\"small\" formControlName=\"backgroundColor\" />\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n      <nz-col nzSpan=\"12\">\n        <nz-form-item>\n          <nz-form-label>\n            <i nz-icon nzIconfont=\"icon-image\"></i>\n          </nz-form-label>\n          <nz-form-control>\n            <input type=\"text\" nz-input nzSize=\"small\" formControlName=\"backgroundImage\" />\n          </nz-form-control>\n        </nz-form-item>\n      </nz-col>\n    </nz-row>\n  </form>\n</div>\n<h5 class=\"mt-1\">背景预览</h5>\n<div>\n  <img\n    [style.max-width.%]=\"100\"\n    *ngIf=\"canvasBackgroundFormGroup.controls['backgroundImage'].value\"\n    [src]=\"canvasBackgroundFormGroup.controls['backgroundImage'].value | nzSanitizer: 'url'\"\n  />\n</div>\n","import { ChangeDetectionStrategy, Component, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { updateCanvasBackground, updateCanvasPosition, updateCanvasSize } from '../../../../actions';\nimport { EditorStore } from '../../../../services/store.service';\n\n@Component({\n  selector: 'ce-canvas-forms,[ceCanvasForms]',\n  templateUrl: './canvas-forms.component.html',\n  styleUrls: ['./canvas-forms.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasFormsComponent implements OnInit, OnDestroy {\n  public canvasSizeFormGroup: FormGroup;\n  public canvasPositionFormGroup: FormGroup;\n  public canvasBackgroundFormGroup: FormGroup;\n  private subscription = new Subscription();\n  constructor(public fb: FormBuilder, public store: EditorStore) {\n    this.canvasSizeFormGroup = this.fb.group({\n      width: [0, [Validators.required, Validators.min(0)]],\n      height: [0, [Validators.required, Validators.min(0)]],\n    });\n    this.canvasPositionFormGroup = this.fb.group({\n      left: [0, [Validators.required]],\n      top: [0, [Validators.required]],\n      scale: [1, [Validators.min(0.01), Validators.required]],\n    });\n    this.canvasBackgroundFormGroup = this.fb.group({\n      backgroundColor: ['#ffffff'],\n      backgroundImage: [null],\n    });\n    this.subscription.add(\n      this.store\n        .selectDifferent((state) => state.canvasSize)\n        .subscribe((state) => {\n          this.canvasSizeFormGroup.patchValue(state, { emitEvent: false });\n        })\n    );\n    this.subscription.add(\n      this.store\n        .selectDifferent((state) => state.canvasPosition)\n        .subscribe((state) => {\n          this.canvasPositionFormGroup.patchValue(\n            { left: Math.round(state.left), top: Math.round(state.top), scale: state.scale?.toFixed(2) },\n            { emitEvent: false }\n          );\n        })\n    );\n    this.subscription.add(\n      this.store\n        .selectDifferent((state) => state.canvasBackground)\n        .subscribe((state) => {\n          this.canvasBackgroundFormGroup.patchValue(state, { emitEvent: false });\n        })\n    );\n  }\n\n  ngOnInit(): void {\n    this.canvasSizeFormGroup.valueChanges.subscribe((value) => {\n      this.store.dispatch(updateCanvasSize(value));\n    });\n    this.canvasPositionFormGroup.valueChanges.subscribe((value) => {\n      this.store.dispatch(updateCanvasPosition(value));\n    });\n    this.canvasBackgroundFormGroup.valueChanges.subscribe((value) => {\n      console.log(value);\n      this.store.dispatch(updateCanvasBackground(value));\n    });\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n}\n","<nz-collapse [nzBordered]=\"false\" nzGhost nzAccordion nzSize=\"small\">\n  <nz-collapse-panel nzHeader=\"外包围盒属性\" nzActive>\n    <div>\n      <h5>尺寸</h5>\n      <form nz-form nzLayout=\"inline\" [formGroup]=\"boundingFormGroup\">\n        <nz-row nzGutter=\"8\">\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzIconfont=\"icon-kuandu\"></i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-input-number nzSize=\"small\" formControlName=\"width\"></nz-input-number>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzIconfont=\"icon-gaodu\"></i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-input-number nzSize=\"small\" formControlName=\"height\"></nz-input-number>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n        </nz-row>\n      </form>\n      <h5>位置</h5>\n      <form nz-form nzLayout=\"inline\" [formGroup]=\"boundingFormGroup\">\n        <nz-row nzGutter=\"8\">\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzIconfont=\"icon-left\"></i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-input-number nzSize=\"small\" formControlName=\"left\"></nz-input-number>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzIconfont=\"icon-top\"></i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-input-number nzSize=\"small\" formControlName=\"top\"></nz-input-number>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzType=\"rotate-right\"> </i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-input-number nzSize=\"small\" formControlName=\"rotate\"></nz-input-number>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n          <nz-col nzSpan=\"12\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzType=\"lock\"> </i>\n              </nz-form-label>\n              <nz-form-control>\n                <nz-switch formControlName=\"locked\"></nz-switch>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n        </nz-row>\n      </form>\n      <h5>边框</h5>\n      <form nz-form nzLayout=\"inline\" [formGroup]=\"boundingFormGroup\">\n        <nz-row nzGutter=\"8\">\n          <nz-col nzSpan=\"24\">\n            <nz-form-item>\n              <nz-form-label>\n                <i nz-icon nzType=\"border-outer\"></i>\n              </nz-form-label>\n              <nz-form-control>\n                <ng-template #borderStyleTpl let-selected>\n                  <div class=\"d-flex align-items-center h-100\" [style.width.px]=\"40\">\n                    <ng-container [ngSwitch]=\"selected.nzValue\">\n                      <ng-container *ngSwitchCase=\"'none'\">\n                        <span>none</span>\n                      </ng-container>\n                      <ng-container *ngSwitchCase=\"'dashed'\">\n                        <svg class=\"svg-icon\" viewBox=\"0 0 40 1\">\n                          <path\n                            d=\"M0 1h5V0H0v1zm9 0h5V0H9v1zm10 0h5V0h-5v1zm9 0h5V0h-5v1zm10 0h5V0h-5v1zm9 0h5V0h-5v1zm9 0h5V0h-5v1zm10 0h5V0h-5v1zm9 0h5V0h-5v1z\"\n                          ></path>\n                        </svg>\n                      </ng-container>\n                      <ng-container *ngSwitchCase=\"'solid'\">\n                        <svg class=\"svg-icon\" viewBox=\"0 0 40 1\">\n                          <path d=\"M0 0h80v1H0z\"></path>\n                        </svg>\n                      </ng-container>\n                      <ng-container *ngSwitchCase=\"'dotted'\">\n                        <svg class=\"svg-icon\" viewBox=\"0 0 40 1\">\n                          <path\n                            d=\"M0 1h1V0H0v1zm4 0h1V0H4v1zm4 0h1V0H8v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1zm4 0h1V0h-1v1z\"\n                          ></path>\n                        </svg>\n                      </ng-container>\n                    </ng-container>\n                  </div>\n                </ng-template>\n                <nz-select nzSize=\"small\" formControlName=\"borderStyle\" [nzCustomTemplate]=\"borderStyleTpl\">\n                  <nz-option nzValue=\"none\" nzLabel=\"none\">\n                    <ng-container *ngTemplateOutlet=\"borderStyleTpl; context: { $implicit: { nzValue: 'none' } }\"></ng-container>\n                  </nz-option>\n                  <nz-option nzValue=\"dashed\" nzLabel=\"dashed\" nzCustomContent>\n                    <ng-container *ngTemplateOutlet=\"borderStyleTpl; context: { $implicit: { nzValue: 'dashed' } }\"></ng-container>\n                  </nz-option>\n                  <nz-option nzValue=\"solid\" nzLabel=\"solid\" nzCustomContent>\n                    <ng-container *ngTemplateOutlet=\"borderStyleTpl; context: { $implicit: { nzValue: 'solid' } }\"></ng-container>\n                  </nz-option>\n                  <nz-option nzValue=\"dotted\" nzLabel=\"dotted\" nzCustomContent>\n                    <ng-container *ngTemplateOutlet=\"borderStyleTpl; context: { $implicit: { nzValue: 'dotted' } }\"></ng-container>\n                  </nz-option>\n                </nz-select>\n              </nz-form-control>\n            </nz-form-item>\n          </nz-col>\n        </nz-row>\n      </form>\n    </div>\n  </nz-collapse-panel>\n  <nz-collapse-panel nzHeader=\"组件属性\">\n    <ng-template #container></ng-template>\n  </nz-collapse-panel>\n</nz-collapse>\n","import { Component, ComponentFactoryResolver, OnInit, TemplateRef, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { updateNodes } from '../../../../actions/nodes.actions';\nimport { filter, map, switchMap } from 'rxjs/operators';\nimport { EditorStore } from '../../../../services/store.service';\n\n@Component({\n  selector: 'ce-widget-form,[ceWidgetForm]',\n  templateUrl: './widget-form.component.html',\n  styleUrls: ['./widget-form.component.less'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class WidgetFormComponent implements OnInit {\n  @ViewChild('container')\n  propsFormContainer: TemplateRef<any>;\n  boundingFormGroup: FormGroup;\n  constructor(private fb: FormBuilder, private cfr: ComponentFactoryResolver, private store: EditorStore) {\n    this.boundingFormGroup = this.fb.group({\n      id: [, [Validators.required]],\n      name: [],\n      width: [, [Validators.required]],\n      height: [, [Validators.required]],\n      left: [, [Validators.required]],\n      top: [, [Validators.required]],\n      locked: [],\n      rotate: [, [Validators.required]],\n      zIndex: [, [Validators.required]],\n      borderStyle: [],\n      borderWidth: [],\n      borderColor: [],\n      borderRadius: [],\n      backgroundColor: [],\n      backgroundImage: [],\n      backgroundRepeat: [],\n      backgroundPosition: [],\n      backgroundSize: [],\n    });\n  }\n\n  ngOnInit(): void {\n    this.store\n      .select((state) => state.selected)\n      .pipe(\n        filter((selected) => selected.size === 1),\n        map((selected) => [...selected][0]),\n        switchMap((id) => this.store.select((state) => state.nodes.find((item) => item.id === id))),\n        filter((node) => !!node)\n      )\n      .subscribe((node) => {\n        this.boundingFormGroup.patchValue(\n          {\n            ...node,\n            width: Math.round(node.width),\n            height: Math.round(node.height),\n            left: Math.round(node.left),\n            top: Math.round(node.top),\n          },\n          { emitEvent: false }\n        );\n      });\n    this.boundingFormGroup.valueChanges.subscribe((values) => {\n      this.store.dispatch(updateNodes([values]));\n    });\n  }\n}\n","<ng-container *ngComponentOutlet=\"formComponent$ | async\"></ng-container>\n","import { ChangeDetectionStrategy, Component, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { EditorStore } from '../../services';\nimport { CanvasFormsComponent } from './forms/canvas-forms/canvas-forms.component';\nimport { WidgetFormComponent } from './forms/widget-form/widget-form.component';\n\n@Component({\n  selector: 'ce-property-form,[cePropertyForm]',\n  templateUrl: './property-form.component.html',\n  styleUrls: ['./property-form.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PropertyFormComponent implements OnInit {\n  formComponent$: Observable<any>;\n  @ViewChild('instance')\n  instance: any;\n  constructor(public store: EditorStore) {}\n\n  ngOnInit(): void {\n    this.formComponent$ = this.store\n      .select((state) => state.selected.size)\n      .pipe(map((size) => (size === 1 ? WidgetFormComponent : CanvasFormsComponent)));\n  }\n}\n","<ce-rotate-handle *ngIf=\"(selectedSize$ | async) === 1\"></ce-rotate-handle>\n<div\n  *ngIf=\"selectedSize$ | async\"\n  class=\"resizable-handle t\"\n  ceDraggable\n  (ceOnStart)=\"resizeStart($event)\"\n  (ceOnMove)=\"resizing($event, 't')\"\n  (ceOnStop)=\"resizeEnd()\"\n></div>\n<div\n  *ngIf=\"selectedSize$ | async\"\n  class=\"resizable-handle r\"\n  ceDraggable\n  (ceOnStart)=\"resizeStart($event)\"\n  (ceOnMove)=\"resizing($event, 'r')\"\n  (ceOnStop)=\"resizeEnd()\"\n></div>\n<div\n  *ngIf=\"selectedSize$ | async\"\n  class=\"resizable-handle b\"\n  ceDraggable\n  (ceOnStart)=\"resizeStart($event)\"\n  (ceOnMove)=\"resizing($event, 'b')\"\n  (ceOnStop)=\"resizeEnd()\"\n></div>\n<div\n  *ngIf=\"selectedSize$ | async\"\n  class=\"resizable-handle l\"\n  ceDraggable\n  (ceOnStart)=\"resizeStart($event)\"\n  (ceOnMove)=\"resizing($event, 'l')\"\n  (ceOnStop)=\"resizeEnd()\"\n></div>\n<div class=\"resizable-handle tr\" ceDraggable (ceOnStart)=\"resizeStart($event)\" (ceOnMove)=\"resizing($event, 'tr')\" (ceOnStop)=\"resizeEnd()\"></div>\n<div class=\"resizable-handle br\" ceDraggable (ceOnStart)=\"resizeStart($event)\" (ceOnMove)=\"resizing($event, 'br')\" (ceOnStop)=\"resizeEnd()\"></div>\n<div class=\"resizable-handle tl\" ceDraggable (ceOnStart)=\"resizeStart($event)\" (ceOnMove)=\"resizing($event, 'tl')\" (ceOnStop)=\"resizeEnd()\"></div>\n<div class=\"resizable-handle bl\" ceDraggable (ceOnStart)=\"resizeStart($event)\" (ceOnMove)=\"resizing($event, 'bl')\" (ceOnStop)=\"resizeEnd()\"></div>\n<div *ngIf=\"(selectedSize$ | async) === 1\" class=\"t circle\"></div>\n<div *ngIf=\"(selectedSize$ | async) === 1\" class=\"r circle\"></div>\n<div *ngIf=\"(selectedSize$ | async) === 1\" class=\"b circle\"></div>\n<div *ngIf=\"(selectedSize$ | async) === 1\" class=\"l circle\"></div>\n<div class=\"tr circle\"></div>\n<div class=\"br circle\"></div>\n<div class=\"tl circle\"></div>\n<div class=\"bl circle\"></div>\n","import { ChangeDetectionStrategy, Component, ElementRef, HostBinding, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { updateNodesSize } from '../../actions';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService, IAbsolutePosition, IDOMRect, IRectDirection } from '../../services/utils.service';\nimport { ICanvasPosition, INode, IStore } from '../../store';\n\n@Component({\n  selector: 'ce-resize-handle,[ceResizeHandle]',\n  templateUrl: 'resize-handle.component.html',\n  styleUrls: ['resize-handle.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ResizeHandleComponent {\n  @HostBinding('style.display')\n  public display = 'none';\n  @HostBinding('style.width.px')\n  public width: number;\n  @HostBinding('style.height.px')\n  public height: number;\n  @HostBinding('style.left.px')\n  public left: number;\n  @HostBinding('style.top.px')\n  public top: number;\n  @HostBinding('style.transform')\n  public get transform(): string {\n    return `rotate(${this.rotate ?? 0}deg)`;\n  }\n  public selected: Set<string>;\n  public selectedSize$: Observable<number>;\n  private canvasPosition: ICanvasPosition;\n  private rotate: number;\n  private nodes: INode[];\n  private resizeMode: 'GROUP' | 'SINGLE';\n  private groupRectSnapshot: IDOMRect;\n  private groupAbsolutePositionSnapshot: IAbsolutePosition;\n  private resizePointSnapshot: { absolute: [number, number]; relative: [number, number] };\n  private nodePositionSnapshotList = new Map<string, IAbsolutePosition>();\n\n  constructor(private store: EditorStore<IStore>, private utils: CeUtilsService, public eleRef: ElementRef<HTMLElement>) {\n    this.selectedSize$ = this.store.selectDifferent((state) => state.selected.size);\n    this.store\n      .selectDifferent((state) => ({ selected: state.selected, canvasPosition: state.canvasPosition, nodes: state.nodes }))\n      .subscribe(({ selected, canvasPosition, nodes }) => {\n        this.display = selected.size ? 'block' : 'none';\n        this.selected = selected;\n        this.canvasPosition = canvasPosition;\n        this.nodes = nodes;\n        if (this.selected.size) {\n          this.refreshResizeHandle();\n        }\n      });\n  }\n\n  refreshResizeHandle(): any {\n    if (!this.selected || !this.nodes) {\n      return;\n    }\n\n    const { left, top, width, height, rotate } = this.utils.getResizeBoundingBox([...this.selected], this.nodes);\n    this.left = left * this.canvasPosition.scale;\n    this.top = top * this.canvasPosition.scale;\n    this.width = width * this.canvasPosition.scale;\n    this.height = height * this.canvasPosition.scale;\n    this.rotate = rotate;\n  }\n\n  resizeStart(event: PointerEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    const { scale } = this.canvasPosition;\n    const canvasRect = document.querySelector('ce-canvas').getBoundingClientRect();\n    this.groupRectSnapshot = { width: this.width / scale, height: this.height / scale, left: this.left / scale, top: this.top / scale };\n    this.groupAbsolutePositionSnapshot = this.utils.getAbsolutePosition(\n      (this.left + this.width / 2) / scale,\n      (this.top + this.height / 2) / scale,\n      this.width / scale,\n      this.height / scale\n    );\n    this.resizePointSnapshot = {\n      absolute: [event.clientX, event.clientY],\n      relative: [(event.clientX - canvasRect.left) / scale, (event.clientY - canvasRect.top) / scale],\n    };\n    this.selected.forEach((id) => {\n      const node = this.utils.getNodeById(id, this.nodes);\n      const nodeAbsolutePosition = this.utils.getAbsolutePosition(\n        node.left + node.width / 2,\n        node.top + node.height / 2,\n        node.width,\n        node.height,\n        node.rotate\n      );\n      if (this.selected.size > 1) {\n        this.resizeMode = 'GROUP';\n        const percentPosition = this.utils.getItemPercentPositionInGroup({ ...this.groupRectSnapshot }, nodeAbsolutePosition);\n        this.nodePositionSnapshotList.set(id, percentPosition);\n      } else {\n        this.resizeMode = 'SINGLE';\n        this.nodePositionSnapshotList.set(id, nodeAbsolutePosition);\n      }\n    });\n  }\n\n  resizing(event: PointerEvent, direction: IRectDirection): void {\n    if (this.resizePointSnapshot && this.groupRectSnapshot && this.resizeMode) {\n      const [mx, my] = [event.clientX - this.resizePointSnapshot.absolute[0], event.clientY - this.resizePointSnapshot.absolute[1]];\n      switch (this.resizeMode) {\n        case 'GROUP':\n          this.resizingNodeList(direction, mx, my);\n          break;\n        case 'SINGLE':\n          this.resizingNode(direction, mx, my);\n          break;\n      }\n    }\n  }\n\n  resizeEnd(): void {\n    this.groupRectSnapshot = null;\n    this.resizePointSnapshot = null;\n    this.nodePositionSnapshotList.clear();\n  }\n\n  resizingNodeList(direction: IRectDirection, mx: number, my: number): void {\n    const { scale } = this.canvasPosition;\n    const { relative } = this.resizePointSnapshot;\n    const endPointer: [number, number] = [relative[0] + mx / scale, relative[1] + my / scale];\n    const line = getGroupDiagonalByDirection(direction, this.groupAbsolutePositionSnapshot);\n    const newPoint = getPointByEndPointer(direction, endPointer, line);\n    const newGroupRect: IDOMRect = getGroupRectByDirectionPoint(direction, this.groupAbsolutePositionSnapshot, newPoint);\n    const nodesSizeMap = new Map<string, IDOMRect>();\n    this.nodePositionSnapshotList.forEach(({ tl, bl, br, tr }, id) => {\n      nodesSizeMap.set(\n        id,\n        this.utils.getRelativePosition({\n          bl: [bl[0] * newGroupRect.width + newGroupRect.left, bl[1] * newGroupRect.height + newGroupRect.top],\n          br: [br[0] * newGroupRect.width + newGroupRect.left, br[1] * newGroupRect.height + newGroupRect.top],\n          tl: [tl[0] * newGroupRect.width + newGroupRect.left, tl[1] * newGroupRect.height + newGroupRect.top],\n          tr: [tr[0] * newGroupRect.width + newGroupRect.left, tr[1] * newGroupRect.height + newGroupRect.top],\n        })\n      );\n    });\n    this.store.dispatch(updateNodesSize(nodesSizeMap));\n  }\n\n  resizingNode(direction: IRectDirection, mx: number, my: number): void {\n    const { scale } = this.canvasPosition;\n    const { relative } = this.resizePointSnapshot;\n    const endPointer: [number, number] = [relative[0] + mx / scale, relative[1] + my / scale];\n    this.nodePositionSnapshotList.forEach((position, id) => {\n      this.store.dispatch(\n        updateNodesSize(\n          new Map<string, IDOMRect>([[id, getDOMRectByDirectionAndPosition(direction, position, endPointer)]])\n        )\n      );\n    });\n  }\n}\n\nfunction getGroupDiagonalByDirection(direction: IRectDirection, absolutePosition: IAbsolutePosition): [[number, number], [number, number]] {\n  const verticalAndHorizontalPosition = CeUtilsService.shared.getVerticalAndHorizontalPointByAbsolutePosition(absolutePosition);\n  switch (direction) {\n    case 'tl':\n    case 'br':\n      return [absolutePosition.tl, absolutePosition.br];\n    case 'tr':\n    case 'bl':\n      return [absolutePosition.tr, absolutePosition.bl];\n    case 't':\n    case 'b':\n      return [verticalAndHorizontalPosition.t, verticalAndHorizontalPosition.b];\n    case 'l':\n    case 'r':\n      return [verticalAndHorizontalPosition.l, verticalAndHorizontalPosition.r];\n  }\n}\n\nfunction getPointByEndPointer(direction: IRectDirection, endPointer: [number, number], line: [[number, number], [number, number]]): [number, number] {\n  switch (direction) {\n    case 'tl':\n    case 'tr':\n      if (endPointer[1] >= CeUtilsService.shared.getPointInLine('y', endPointer[0], line)) {\n        return [endPointer[0], CeUtilsService.shared.getPointInLine('y', endPointer[0], line)];\n      } else {\n        return [CeUtilsService.shared.getPointInLine('x', endPointer[1], line), endPointer[1]];\n      }\n    case 'bl':\n    case 'br':\n      if (endPointer[1] >= CeUtilsService.shared.getPointInLine('y', endPointer[0], line)) {\n        return [CeUtilsService.shared.getPointInLine('x', endPointer[1], line), endPointer[1]];\n      } else {\n        return [endPointer[0], CeUtilsService.shared.getPointInLine('y', endPointer[0], line)];\n      }\n  }\n}\n\nfunction getGroupRectByDirectionPoint(direction: IRectDirection, absolutePoint: IAbsolutePosition, point: [number, number]): IDOMRect {\n  switch (direction) {\n    case 'tl':\n      return { left: point[0], top: point[1], width: absolutePoint.tr[0] - point[0], height: absolutePoint.bl[1] - point[1] };\n    case 'tr':\n      return { left: absolutePoint.tl[0], top: point[1], width: point[0] - absolutePoint.tl[0], height: absolutePoint.br[1] - point[1] };\n    case 'br':\n      return { left: absolutePoint.tl[0], top: absolutePoint.tl[1], width: point[0] - absolutePoint.bl[0], height: point[1] - absolutePoint.tr[1] };\n    case 'bl':\n      return { left: point[0], top: absolutePoint.tl[1], width: absolutePoint.br[0] - point[0], height: point[1] - absolutePoint.tl[1] };\n  }\n}\n\nfunction getDOMRectByDirectionAndPosition(direction: IRectDirection, position: IAbsolutePosition, endPointer: [number, number]): IDOMRect {\n  const { bl, br, tl, tr } = position;\n  let newTLPoint: [number, number];\n  let newTRPoint: [number, number];\n  let newBLPoint: [number, number];\n  let newBRPoint: [number, number];\n  switch (direction) {\n    case 'tl':\n      newTRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(br, tr, endPointer);\n      newBLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(br, bl, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl: endPointer, tr: newTRPoint, bl: newBLPoint, br });\n    case 'tr':\n      newTLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(bl, tl, endPointer);\n      newBRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(bl, br, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl: newTLPoint, tr: endPointer, bl, br: newBRPoint });\n    case 'bl':\n      newTLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tr, tl, endPointer);\n      newBRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tr, br, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl: newTLPoint, tr, bl: endPointer, br: newBRPoint });\n    case 'br':\n      newTRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tl, tr, endPointer);\n      newBLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tl, bl, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl, tr: newTRPoint, bl: newBLPoint, br: endPointer });\n    case 't':\n      newTLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(bl, tl, endPointer);\n      newTRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(br, tr, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl: newTLPoint, tr: newTRPoint, bl, br });\n    case 'r':\n      newTRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tl, tr, endPointer);\n      newBRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(bl, br, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl, tr: newTRPoint, bl, br: newBRPoint });\n    case 'b':\n      newBLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tl, bl, endPointer);\n      newBRPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tr, br, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl, tr, bl: newBLPoint, br: newBRPoint });\n    case 'l':\n      newTLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(tr, tl, endPointer);\n      newBLPoint = CeUtilsService.shared.getVerticalLineCrossPoint(br, bl, endPointer);\n      return CeUtilsService.shared.getRelativePosition({ tl: newTLPoint, tr, bl: newBLPoint, br });\n  }\n}\n","import { ChangeDetectionStrategy, Component, OnInit, Optional, SkipSelf, ViewEncapsulation } from '@angular/core';\nimport { updateNodes } from '../../actions';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService } from '../../services/utils.service';\nimport { INode, IStore } from '../../store';\nimport { ResizeHandleComponent } from '../resize-handle/resize-handle.component';\n\n@Component({\n  selector: 'ce-rotate-handle',\n  templateUrl: 'rotate-handle.component.html',\n  styleUrls: ['rotate-handle.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class RotateHandleComponent implements OnInit {\n  private selected: Set<string>;\n  private nodes: INode[];\n  public rotateSnapshot: [number, number, number, number, INode] = null;\n\n  constructor(@Optional() @SkipSelf() private parent: ResizeHandleComponent, private store: EditorStore<IStore>, private utils: CeUtilsService) {}\n\n  ngOnInit(): void {\n    this.store.select((state) => state.selected).subscribe((selected) => (this.selected = selected));\n    this.store.select((state) => state.nodes).subscribe((nodes) => (this.nodes = nodes));\n  }\n\n  rotateStart(event: PointerEvent): void {\n    event.stopPropagation();\n    event.preventDefault();\n    const rect = this.parent.eleRef.nativeElement.getBoundingClientRect().toJSON();\n    this.rotateSnapshot = [\n      rect.left + rect.width / 2,\n      rect.top + rect.height / 2,\n      rect.left + rect.width / 2,\n      rect.top + rect.height / 2 - 100,\n      this.utils.getNodeById([...this.selected][0], this.nodes),\n    ];\n  }\n\n  rotating(event: PointerEvent): void {\n    if (this.rotateSnapshot) {\n      const [cx, cy, sx, sy, node] = this.rotateSnapshot;\n      const ex = event.clientX;\n      const ey = event.clientY;\n      const rotate = Math.round(this.utils.getRotate(cx, cy, sx, sy, ex, ey));\n      this.store.dispatch(updateNodes([{ ...node, rotate: rotate === 360 ? 0 : rotate }]));\n    }\n  }\n\n  rotateStop(): void {\n    this.rotateSnapshot = null;\n  }\n}\n","<div\n  class=\"rotate\"\n  ceDraggable\n  (ceOnStart)=\"rotateStart($event)\"\n  (ceOnMove)=\"rotating($event)\"\n  (ceOnStop)=\"rotateStop()\"\n  [style.cursor]=\"rotateSnapshot && 'grabbing'\"\n>\n  <svg width=\"14\" height=\"14\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path\n      d=\"M10.536 3.464A5 5 0 1 0 11 10l1.424 1.425a7 7 0 1 1-.475-9.374L13.659.34A.2.2 0 0 1 14 .483V5.5a.5.5 0 0 1-.5.5H8.483a.2.2 0 0 1-.142-.341l2.195-2.195z\"\n      fill-rule=\"nonzero\"\n    ></path>\n  </svg>\n</div>\n","import { Directive, HostBinding } from '@angular/core';\nimport { EditorStore } from '../services';\nimport { IStore } from '../store';\n\n@Directive({\n  selector: '[ceNoZoomArea]',\n  exportAs: 'ceNoZoomArea',\n})\nexport class NoZoomAreaDirective {\n  @HostBinding('style.width.px')\n  public width: number;\n  @HostBinding('style.height.px')\n  public height: number;\n  constructor(private store: EditorStore<IStore>) {\n    this.store\n      .select((state) => ({ ...state.canvasSize, scale: state.canvasPosition.scale }))\n      .subscribe((state) => {\n        this.width = state.width * state.scale;\n        this.height = state.height * state.scale;\n      });\n  }\n}\n","import { Directive, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { InputBoolean } from 'ng-zorro-antd/core/util';\nimport { fromEvent, Subscription } from 'rxjs';\nimport { filter, finalize, switchMap, takeUntil } from 'rxjs/operators';\n\nexport interface ISelectorRect {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\n@Directive({\n  selector: '[ceSelector]',\n  exportAs: 'ceSelector',\n})\nexport class SelectorDirective implements OnInit, OnDestroy {\n  private subscription = new Subscription();\n  private move$ = fromEvent<PointerEvent>(window, 'pointermove');\n  private up$ = fromEvent<PointerEvent>(window, 'pointerup');\n  private startPointSnapshot: number[] = null;\n  private boxRect: DOMRect;\n\n  @Input()\n  @InputBoolean()\n  public ceSelectorDisabled = false;\n  @Output()\n  public ceOnSelectorStart = new EventEmitter();\n  @Output()\n  public ceOnSelectorMoving = new EventEmitter<ISelectorRect>();\n  @Output()\n  public ceOnSelectorStop = new EventEmitter();\n  constructor(private eleRef: ElementRef<HTMLDivElement>) {}\n\n  ngOnInit(): void {\n    this.subscription.add(\n      fromEvent<PointerEvent>(this.eleRef.nativeElement, 'pointerdown')\n        .pipe(\n          filter((e) => e.button === 0),\n          filter(() => !this.ceSelectorDisabled),\n          switchMap((ev) => {\n            this.boxRect = this.eleRef.nativeElement.getBoundingClientRect();\n            this.startPointSnapshot = [ev.clientX, ev.clientY];\n            this.ceOnSelectorStart.emit();\n            return this.move$.pipe(\n              finalize(() => {\n                this.startPointSnapshot = null;\n                this.ceOnSelectorStop.emit();\n              }),\n              takeUntil(this.up$)\n            );\n          })\n        )\n        .subscribe((e) => {\n          if (this.startPointSnapshot) {\n            let x: number;\n            let y: number;\n            const [mx, my] = [e.clientX - this.startPointSnapshot[0], e.clientY - this.startPointSnapshot[1]];\n            if (mx >= 0) {\n              x = this.startPointSnapshot[0] - this.boxRect.left;\n            } else {\n              x = e.clientX - this.boxRect.left;\n            }\n            if (my >= 0) {\n              y = this.startPointSnapshot[1] - this.boxRect.top;\n            } else {\n              y = e.clientY - this.boxRect.top;\n            }\n            this.ceOnSelectorMoving.emit({ x, y, width: Math.abs(mx), height: Math.abs(my) });\n          }\n        })\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n}\n","import { Directive, HostBinding } from '@angular/core';\nimport { EditorStore } from '../services';\nimport { IStore } from '../store';\n\n@Directive({\n  selector: '[ceZoomArea]',\n  exportAs: 'ceZoomArea',\n})\nexport class ZoomAreaDirective {\n  @HostBinding('style.transform-origin')\n  transformOrigin = '0 0';\n  @HostBinding('style.transform')\n  public scale: string;\n  @HostBinding('style.width.px')\n  width: number;\n  @HostBinding('style.height.px')\n  height: number;\n  constructor(private store: EditorStore<IStore>) {\n    this.store\n      .select((state) => ({ ...state.canvasSize, scale: state.canvasPosition.scale }))\n      .subscribe((state) => {\n        this.scale = `perspective(1px) scale(${state.scale})`;\n        this.width = state.width;\n        this.height = state.height;\n      });\n  }\n}\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ceToolbar]',\n  exportAs: 'ceToolbar',\n})\nexport class CeToolbarDirective {\n  constructor() {}\n}\n","<ng-container *ngIf=\"ceToolbar; else elseBlock\">\n  <ng-content select=\"[ceToolbar]\"></ng-content>\n</ng-container>\n\n<ng-template #elseBlock>\n  <nz-card nzSize=\"small\" class=\"tool-bar\">\n    <div class=\"d-flex align-items-center col p-0\">\n      <span class=\"ml-2\">Canvas Title</span>\n      <div class=\"d-flex ml-auto align-items-center\">\n        <button [disabled]=\"copyStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-copy\"></i></button>\n        <button nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-paste\"></i></button>\n      </div>\n      <div class=\"d-flex ml-auto align-items-center\">\n        <button [disabled]=\"groupStatus$ | async\" (click)=\"groupNodes()\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-group\"></i></button>\n        <button [disabled]=\"!(breakStatus$ | async)\" (click)=\"breakNode()\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-break\"></i></button>\n      </div>\n      <div class=\"d-flex ml-auto align-items-center\">\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-horizontal-between\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-horizontal-align\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-vertical-between\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-vertical-align\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-left-align\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-right-align\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-top-align\"></i></button>\n        <button [disabled]=\"groupStatus$ | async\" nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-bottom-align\"></i></button>\n      </div>\n      <div class=\"d-flex ml-auto align-items-center\">\n        <nz-tag nzMode=\"checkable\" [nzChecked]=\"store.getPanel('LAYERS')?.show\" (nzCheckedChange)=\"store.togglePanelVisible('LAYERS')\">\n          <i nz-icon nzIconfont=\"icon-tuceng\"></i>\n          <span>图层</span>\n        </nz-tag>\n        <nz-tag nzMode=\"checkable\" [nzChecked]=\"store.getPanel('WIDGET_LIST')?.show\" (nzCheckedChange)=\"store.togglePanelVisible('WIDGET_LIST')\">\n          <i nz-icon nzIconfont=\"icon-widgets\"></i>\n          <span>组件</span>\n        </nz-tag>\n        <nz-tag nzMode=\"checkable\" [nzChecked]=\"store.getPanel('PROPERTIES')?.show\" (nzCheckedChange)=\"store.togglePanelVisible('PROPERTIES')\">\n          <i nz-icon nzIconfont=\"icon-widget\"></i>\n          <span>属性</span>\n        </nz-tag>\n      </div>\n      <div class=\"d-flex ml-auto align-items-center\">\n        <button nz-button nzType=\"link\"><i nz-icon nzIconfont=\"icon-run\"></i></button>\n      </div>\n    </div>\n  </nz-card>\n</ng-template>\n","import { ChangeDetectionStrategy, Component, ContentChild, ViewEncapsulation } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { breakNode, clearBordered, clearSelected, groupNodes } from '../../actions';\nimport { CeToolbarDirective } from '../../directives';\nimport { EditorStore } from '../../services';\nimport { CeUtilsService } from '../../services/utils.service';\nimport { INode, IStore } from '../../store';\n\n@Component({\n  selector: 'ce-toolbar',\n  exportAs: 'ceToolbar',\n  templateUrl: 'toolbar.component.html',\n  styleUrls: ['toolbar.component.less'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ToolbarComponent {\n  @ContentChild(CeToolbarDirective)\n  ceToolbar: CeToolbarDirective;\n  public selected$: Observable<Set<string>>;\n  public scale: number;\n  public get copyStatus$(): Observable<boolean> {\n    return this.selected$.pipe(map((state) => state.size === 0));\n  }\n  public groupStatus$: Observable<boolean>;\n  public breakStatus$: Observable<boolean>;\n  private selected: Set<string>;\n  private nodes: INode[];\n\n  constructor(public store: EditorStore<IStore>, private utils: CeUtilsService) {\n    this.store\n      .selectDifferent((state) => ({ selected: state.selected, nodes: state.nodes }))\n      .subscribe(({ selected, nodes }) => {\n        this.selected = selected;\n        this.nodes = nodes;\n      });\n    this.selected$ = this.store.selectDifferent((state) => state.selected);\n    this.groupStatus$ = this.selected$.pipe(map((state) => state.size <= 1));\n    this.breakStatus$ = this.selected$.pipe(\n      map((state) => (state.size === 1 ? [...state][0] : false)),\n      map((id) => id && !!this.utils.getNodeById(id as string, this.nodes)?.children?.length)\n    );\n  }\n\n  groupNodes(): void {\n    const ids = [...this.selected];\n    this.store.dispatch(clearSelected());\n    this.store.dispatch(clearBordered());\n    this.store.dispatch(groupNodes(ids));\n  }\n\n  breakNode(): void {\n    const node = this.utils.getNodeById([...this.selected][0], this.nodes);\n    this.store.dispatch(clearSelected());\n    this.store.dispatch(clearBordered());\n    this.store.dispatch(breakNode(node.id));\n  }\n}\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\n\n@Component({\n  selector: 'ce-widget-list',\n  templateUrl: 'widget-list.component.html',\n  styleUrls: ['widget-list.component.less'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class WidgetListComponent implements OnInit {\n  constructor() {}\n\n  ngOnInit(): void {}\n}\n","<p>widget-list works!</p>\n","<ng-content select=\"[toolbar]\"></ng-content>\n<div class=\"col p-0 d-flex\">\n  <div\n    #ceDrag=\"ceDraggable\"\n    #container\n    class=\"canvas-container\"\n    ceDraggable\n    ceUseSpace\n    [class.start-drag]=\"ceDrag.spaceKeyDown\"\n    [class.dragging]=\"startPoints\"\n    (ceOnStart)=\"dragStart($event)\"\n    (ceOnMove)=\"dragging($event)\"\n    (ceOnStop)=\"dragEnd()\"\n    ceSelector\n    [ceSelectorDisabled]=\"ceDrag.spaceKeyDown\"\n    (ceOnSelectorStart)=\"selectorStart()\"\n    (ceOnSelectorMoving)=\"selectorMoving($event)\"\n    (ceOnSelectorStop)=\"selectorEnd()\"\n  >\n    <div class=\"canvas-content\" [style.transform]=\"matrix\">\n      <div ceNoZoomArea>\n        <ce-canvas-background></ce-canvas-background>\n        <ce-canvas-grid></ce-canvas-grid>\n      </div>\n      <div ceZoomArea>\n        <ce-canvas></ce-canvas>\n      </div>\n      <div ceNoZoomArea>\n        <ce-bordered-area></ce-bordered-area>\n        <ce-resize-handle></ce-resize-handle>\n        <div\n          cx\n          [class.active]=\"(refLineState$ | async)?.cx?.state\"\n          [style.top.px]=\"(refLineState$ | async)?.cx?.position * canvasPosition.scale\"\n          class=\"ref-line y\"\n        ></div>\n        <div\n          cy\n          [class.active]=\"(refLineState$ | async)?.cy?.state\"\n          [style.left.px]=\"(refLineState$ | async)?.cy?.position * canvasPosition.scale\"\n          class=\"ref-line x\"\n        ></div>\n        <div\n          tx\n          [class.active]=\"(refLineState$ | async)?.tx?.state\"\n          [style.top.px]=\"(refLineState$ | async)?.tx?.position * canvasPosition.scale\"\n          class=\"ref-line y\"\n        ></div>\n        <div\n          bx\n          [class.active]=\"(refLineState$ | async)?.bx?.state\"\n          [style.top.px]=\"(refLineState$ | async)?.bx?.position * canvasPosition.scale\"\n          class=\"ref-line y\"\n        ></div>\n        <div\n          ly\n          [class.active]=\"(refLineState$ | async)?.ly?.state\"\n          [style.left.px]=\"(refLineState$ | async)?.ly?.position * canvasPosition.scale\"\n          class=\"ref-line x\"\n        ></div>\n        <div\n          ry\n          [class.active]=\"(refLineState$ | async)?.ry?.state\"\n          [style.left.px]=\"(refLineState$ | async)?.ry?.position * canvasPosition.scale\"\n          class=\"ref-line x\"\n        ></div>\n      </div>\n    </div>\n    <div\n      class=\"selector\"\n      *ngIf=\"selectorRect\"\n      [style.left.px]=\"selectorRect.x\"\n      [style.top.px]=\"selectorRect.y\"\n      [style.width.px]=\"selectorRect.width\"\n      [style.height.px]=\"selectorRect.height\"\n    ></div>\n  </div>\n</div>\n\n<ng-container *ngFor=\"let panel of store.panels$ | async; trackBy: panelsTrackByFn\">\n  <ce-panel *ngIf=\"panel.show\" [panel]=\"panel\"></ce-panel>\n</ng-container>\n","import { ChangeDetectionStrategy, Component, ElementRef, Input, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { fromEvent, Observable, Subscription } from 'rxjs';\nimport { filter } from 'rxjs/operators';\nimport { clearBordered, clearSelected, setBorderedNodes, setSelectedNodes, updateCanvasPosition } from './actions';\nimport { ISelectorRect } from './directives/selector.directive';\nimport { EditorStore } from './services/store.service';\nimport { ICanvasPosition, INode, IPanel, IRefLineDirection, IRefLineState, IStore } from './store';\n\n@Component({\n  selector: 'ce-editor',\n  templateUrl: 'angular-editor-lib.component.html',\n  styleUrls: ['angular-editor-lib.less'],\n  encapsulation: ViewEncapsulation.None,\n  providers: [EditorStore],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  exportAs: 'ceEditor',\n})\nexport class AngularEditorLibComponent<T = any> {\n  @Input()\n  set state(state: Partial<IStore<T>>) {\n    this.store?.setState((oldState) => ({ ...oldState, ...state }));\n  }\n  @ViewChild('container', { read: ElementRef, static: true })\n  private containerEleRef: ElementRef<HTMLDivElement>;\n  private subscription = new Subscription();\n  public canvasPosition: ICanvasPosition;\n  public startPoints: number[] = [];\n  public matrix: string;\n  public selectorRect: ISelectorRect = null;\n  public nodes: INode[];\n  public refLineState$: Observable<{ [P in IRefLineDirection]: IRefLineState }>;\n  private nodesRectSnapshot: Map<string, Partial<DOMRect>> = null;\n  private nodeIdList: string[] = null;\n  constructor(public store: EditorStore) {\n    this.store\n      .select((state) => state.canvasPosition)\n      .subscribe((canvasPosition) => {\n        this.canvasPosition = canvasPosition;\n        this.matrix = `translate3d(${this.canvasPosition.left}px,${this.canvasPosition.top}px,0)`;\n      });\n\n    this.store.select((state) => state.nodes).subscribe((nodes) => (this.nodes = nodes));\n    this.refLineState$ = this.store.selectDifferent((state) => state.refLineState);\n  }\n\n  ngAfterViewInit(): void {\n    this.listenScaleEvent();\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  panelsTrackByFn(_i: number, panel: IPanel<any>) {\n    return `${panel.key}_${panel.show.toString()}`;\n  }\n\n  dragStart(ev: PointerEvent): void {\n    this.startPoints = [ev.clientX, ev.clientY, this.canvasPosition.left, this.canvasPosition.top];\n  }\n\n  dragging(ev: PointerEvent): void {\n    if (this.startPoints) {\n      const [sx, sy, left, top] = this.startPoints;\n      const [mx, my] = [ev.clientX - sx, ev.clientY - sy];\n      this.store.dispatch(updateCanvasPosition({ left: left + mx, top: top + my }));\n    }\n  }\n\n  dragEnd(): void {\n    this.startPoints = null;\n  }\n\n  listenScaleEvent(): void {\n    const scaleEle = this.containerEleRef.nativeElement;\n    this.subscription.add(\n      fromEvent<WheelEvent & { wheelDelta: number }>(scaleEle, 'wheel')\n        .pipe(filter((e) => e.ctrlKey))\n        .subscribe((e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          const containerBox = scaleEle.getBoundingClientRect();\n          const wheelDelta = (e.wheelDelta / 120 || -e.deltaY / 3) * 0.05;\n          const [x, y] = [e.clientX - containerBox.left, e.clientY - containerBox.top];\n          if (this.canvasPosition.scale + wheelDelta >= 0.2) {\n            this.store.dispatch(\n              updateCanvasPosition({\n                scale: this.canvasPosition.scale + wheelDelta,\n                left: (this.canvasPosition.left - x) * (wheelDelta / this.canvasPosition.scale) + this.canvasPosition.left,\n                top: (this.canvasPosition.top - y) * (wheelDelta / this.canvasPosition.scale) + this.canvasPosition.top,\n              })\n            );\n          }\n        })\n    );\n  }\n\n  selectorStart(): void {\n    this.clearSelectAndBorder();\n    const boxRect = this.containerEleRef.nativeElement.getBoundingClientRect();\n    this.nodesRectSnapshot = new Map<string, Partial<DOMRect>>();\n    this.nodes\n      .filter((node) => !node.locked)\n      .forEach((node) => {\n        const rect = document.querySelector(`#box-item-${node.id}`)?.getBoundingClientRect();\n        if (rect) {\n          const { width, height, left, top } = rect;\n          this.nodesRectSnapshot.set(node.id, { width, height, left: left - boxRect.left, top: top - boxRect.top });\n        }\n      });\n  }\n\n  selectorMoving(rect: ISelectorRect): void {\n    this.selectorRect = rect;\n    this.nodeIdList = [];\n    this.nodesRectSnapshot.forEach((item, id) => {\n      if (isInBound(item, this.selectorRect)) {\n        this.nodeIdList.push(id);\n      }\n    });\n    this.store.dispatch(setBorderedNodes<T>(this.nodeIdList));\n    this.store.dispatch(setSelectedNodes(this.nodeIdList));\n  }\n\n  selectorEnd(): void {\n    this.nodeIdList = [];\n    this.selectorRect = null;\n    this.nodesRectSnapshot = null;\n  }\n\n  private clearSelectAndBorder(): void {\n    this.store.dispatch(clearBordered<T>());\n    this.store.dispatch(clearSelected<T>());\n  }\n}\n\nfunction isInBound(rect: Partial<DOMRect>, bound: ISelectorRect): boolean {\n  return (\n    rect.left >= bound.x && rect.top >= bound.y && rect.left + rect.width <= bound.x + bound.width && rect.top + rect.height <= bound.y + bound.height\n  );\n}\n","import { Injector, NgModule } from '@angular/core';\nimport { IconDefinition } from '@ant-design/icons-angular';\nimport * as AllIcons from '@ant-design/icons-angular/icons';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzCardModule } from 'ng-zorro-antd/card';\nimport { NzCollapseModule } from 'ng-zorro-antd/collapse';\nimport { NzDividerModule } from 'ng-zorro-antd/divider';\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { NzIconModule, NzIconService } from 'ng-zorro-antd/icon';\nimport { NzInputModule } from 'ng-zorro-antd/input';\nimport { NzInputNumberModule } from 'ng-zorro-antd/input-number';\nimport { NzPipesModule } from 'ng-zorro-antd/pipes';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { NzSwitchModule } from 'ng-zorro-antd/switch';\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\nimport { NzTagModule } from 'ng-zorro-antd/tag';\nimport { NzToolTipModule } from 'ng-zorro-antd/tooltip';\nimport { NzTreeModule } from 'ng-zorro-antd/tree';\n\nconst antDesignIcons = AllIcons as {\n  [key: string]: IconDefinition;\n};\nconst ICONS: IconDefinition[] = Object.keys(antDesignIcons).map((key) => antDesignIcons[key]);\n\nconst NG_ZORRO_MODULES = [\n  NzButtonModule,\n  NzCardModule,\n  NzCollapseModule,\n  NzDividerModule,\n  NzDropDownModule,\n  NzFormModule,\n  NzIconModule,\n  NzInputModule,\n  NzInputNumberModule,\n  NzPipesModule,\n  NzSelectModule,\n  NzSwitchModule,\n  NzTabsModule,\n  NzTagModule,\n  NzToolTipModule,\n  NzTreeModule,\n];\n\n@NgModule({\n  imports: [...NG_ZORRO_MODULES, NzIconModule.forRoot(ICONS)],\n  exports: [...NG_ZORRO_MODULES, NzIconModule],\n})\nexport class NgZorroModule {\n  constructor(private injector: Injector) {\n    this.injector.get(NzIconService).fetchFromIconfont({ scriptUrl: 'https://at.alicdn.com/t/font_1310204_lmnttxhl5lk.js' });\n  }\n}\n","import { DragDropModule } from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { AngularEditorLibComponent } from './angular-editor-lib.component';\nimport {\n  BorderedAreaComponent,\n  BoxItemComponent,\n  CanvasBackgroundComponent,\n  CanvasComponent,\n  CanvasFormsComponent,\n  CanvasGridComponent,\n  LayerTreeComponent,\n  PanelComponent,\n  PropertyFormComponent,\n  ResizeHandleComponent,\n  RotateHandleComponent,\n  ToolbarComponent,\n  WidgetFormComponent,\n  WidgetListComponent,\n} from './components';\nimport { CeToolbarDirective, DraggableDirective, NoZoomAreaDirective, SelectorDirective, ZoomAreaDirective } from './directives';\nimport { NgZorroModule } from './ng-zorro.module';\n\nconst CDK_MODULES = [DragDropModule];\n\nconst FORMS_COMPONENT = [CanvasFormsComponent, WidgetFormComponent];\n\nconst COMPONENTS = [\n  ToolbarComponent,\n  LayerTreeComponent,\n  WidgetListComponent,\n  CanvasComponent,\n  CanvasGridComponent,\n  CanvasBackgroundComponent,\n  BoxItemComponent,\n  ResizeHandleComponent,\n  RotateHandleComponent,\n  BorderedAreaComponent,\n  AngularEditorLibComponent,\n  PanelComponent,\n  PropertyFormComponent,\n];\n\nconst DIRECTIVES = [NoZoomAreaDirective, ZoomAreaDirective, DraggableDirective, SelectorDirective, CeToolbarDirective];\n\n@NgModule({\n  imports: [CommonModule, BrowserAnimationsModule, HttpClientModule, FormsModule, ReactiveFormsModule, NgZorroModule, ...CDK_MODULES],\n  declarations: [...COMPONENTS, ...DIRECTIVES, ...FORMS_COMPONENT],\n  exports: [...COMPONENTS, ...DIRECTIVES],\n})\nexport class AngularEditorLibModule {}\n"]}