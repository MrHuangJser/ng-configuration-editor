<nz-card
  nzSize="small"
  [nzTitle]="cardTitle"
  [nzExtra]="cardExtra"
  cdkDrag
  [cdkDragFreeDragPosition]="panel"
  (cdkDragEnded)="updatePosition($event)"
  [class.collapsed]="panel?.collapsed"
>
  <ng-template #cardTitle>
    <div cdkDragHandle class="d-flex align-items-center">{{ panel?.title }}</div>
  </ng-template>
  <ng-container *ngIf="utils.isTemplateType(panel.content)">
    <ng-container *ngTemplateOutlet="panel.content"></ng-container>
  </ng-container>
  <ng-container *ngIf="!utils.isTemplateType(panel.content)">
    <ng-container *ngComponentOutlet="panel.content"></ng-container>
  </ng-container>
</nz-card>

<ng-template #cardExtra>
  <button nz-button nzSize="small" nzType="link" (click)="toggleCollapsed()" class="collapse-icon">
    <i nz-icon nzType="caret-down"></i>
  </button>
  <button nz-button nzSize="small" nzType="link" (click)="close()">
    <i nz-icon nzType="close"></i>
  </button>
</ng-template>
